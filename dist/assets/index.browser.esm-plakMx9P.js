var mo=Object.defineProperty;var yo=(c,t,e)=>t in c?mo(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var ne=(c,t,e)=>yo(c,typeof t!="symbol"?t+"":t,e);import{b_ as wo,b$ as ii,c0 as si,c1 as bo,c2 as vo,c3 as ko,c4 as Ct,c5 as So,c6 as Mo,c7 as Xe,c8 as Kn,c9 as Ki,ca as xo,cb as _o,cc as Ui,cd as De,ce as Io,cf as Ao,cg as Eo,ch as Ro,ci as Ce,cj as Bo,ck as Po,cl as oi,aI as Be,aB as us,cm as hs,cn as To,co as ie,cp as ls,aM as Z,a5 as ue,cq as Wi,cr as fn,cs as C,ct as ai,cu as ci,cv as Jt,cw as dn,cx as P,cy as S,cz as K,cA as z,cB as j,cC as We,cD as fs,cE as Me,cF as O,cG as ui,cH as Fi,cI as Lo,cJ as Co}from"./index-CwMm_7HW.js";var qi,Un,Wn=0,Fn=0;function No(c,t,e){var r=t&&e||0,o=t||new Array(16);c=c||{};var i=c.node||qi,u=c.clockseq!==void 0?c.clockseq:Un;if(i==null||u==null){var w=c.random||(c.rng||wo)();i==null&&(i=qi=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),u==null&&(u=Un=(w[6]<<8|w[7])&16383)}var b=c.msecs!==void 0?c.msecs:Date.now(),k=c.nsecs!==void 0?c.nsecs:Fn+1,v=b-Wn+(k-Fn)/1e4;if(v<0&&c.clockseq===void 0&&(u=u+1&16383),(v<0||b>Wn)&&c.nsecs===void 0&&(k=0),k>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Wn=b,Fn=k,Un=u,b+=122192928e5;var A=((b&268435455)*1e4+k)%4294967296;o[r++]=A>>>24&255,o[r++]=A>>>16&255,o[r++]=A>>>8&255,o[r++]=A&255;var T=b/4294967296*1e4&268435455;o[r++]=T>>>8&255,o[r++]=T&255,o[r++]=T>>>24&15|16,o[r++]=T>>>16&255,o[r++]=u>>>8|128,o[r++]=u&255;for(var E=0;E<6;++E)o[r+E]=i[E];return t||ii(o)}function ds(c){if(!si(c))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(c.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(c.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(c.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(c.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(c.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Oo(c){c=unescape(encodeURIComponent(c));for(var t=[],e=0;e<c.length;++e)t.push(c.charCodeAt(e));return t}var zo="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ko="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ps(c,t,e){function r(o,i,u,w){if(typeof o=="string"&&(o=Oo(o)),typeof i=="string"&&(i=ds(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var b=new Uint8Array(16+o.length);if(b.set(i),b.set(o,i.length),b=e(b),b[6]=b[6]&15|t,b[8]=b[8]&63|128,u){w=w||0;for(var k=0;k<16;++k)u[w+k]=b[k];return u}return ii(b)}try{r.name=c}catch{}return r.DNS=zo,r.URL=Ko,r}function Uo(c){if(typeof c=="string"){var t=unescape(encodeURIComponent(c));c=new Uint8Array(t.length);for(var e=0;e<t.length;++e)c[e]=t.charCodeAt(e)}return Wo(Fo(qo(c),c.length*8))}function Wo(c){for(var t=[],e=c.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var i=c[o>>5]>>>o%32&255,u=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(u)}return t}function gs(c){return(c+64>>>9<<4)+14+1}function Fo(c,t){c[t>>5]|=128<<t%32,c[gs(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,i=271733878,u=0;u<c.length;u+=16){var w=e,b=r,k=o,v=i;e=de(e,r,o,i,c[u],7,-680876936),i=de(i,e,r,o,c[u+1],12,-389564586),o=de(o,i,e,r,c[u+2],17,606105819),r=de(r,o,i,e,c[u+3],22,-1044525330),e=de(e,r,o,i,c[u+4],7,-176418897),i=de(i,e,r,o,c[u+5],12,1200080426),o=de(o,i,e,r,c[u+6],17,-1473231341),r=de(r,o,i,e,c[u+7],22,-45705983),e=de(e,r,o,i,c[u+8],7,1770035416),i=de(i,e,r,o,c[u+9],12,-1958414417),o=de(o,i,e,r,c[u+10],17,-42063),r=de(r,o,i,e,c[u+11],22,-1990404162),e=de(e,r,o,i,c[u+12],7,1804603682),i=de(i,e,r,o,c[u+13],12,-40341101),o=de(o,i,e,r,c[u+14],17,-1502002290),r=de(r,o,i,e,c[u+15],22,1236535329),e=pe(e,r,o,i,c[u+1],5,-165796510),i=pe(i,e,r,o,c[u+6],9,-1069501632),o=pe(o,i,e,r,c[u+11],14,643717713),r=pe(r,o,i,e,c[u],20,-373897302),e=pe(e,r,o,i,c[u+5],5,-701558691),i=pe(i,e,r,o,c[u+10],9,38016083),o=pe(o,i,e,r,c[u+15],14,-660478335),r=pe(r,o,i,e,c[u+4],20,-405537848),e=pe(e,r,o,i,c[u+9],5,568446438),i=pe(i,e,r,o,c[u+14],9,-1019803690),o=pe(o,i,e,r,c[u+3],14,-187363961),r=pe(r,o,i,e,c[u+8],20,1163531501),e=pe(e,r,o,i,c[u+13],5,-1444681467),i=pe(i,e,r,o,c[u+2],9,-51403784),o=pe(o,i,e,r,c[u+7],14,1735328473),r=pe(r,o,i,e,c[u+12],20,-1926607734),e=ge(e,r,o,i,c[u+5],4,-378558),i=ge(i,e,r,o,c[u+8],11,-2022574463),o=ge(o,i,e,r,c[u+11],16,1839030562),r=ge(r,o,i,e,c[u+14],23,-35309556),e=ge(e,r,o,i,c[u+1],4,-1530992060),i=ge(i,e,r,o,c[u+4],11,1272893353),o=ge(o,i,e,r,c[u+7],16,-155497632),r=ge(r,o,i,e,c[u+10],23,-1094730640),e=ge(e,r,o,i,c[u+13],4,681279174),i=ge(i,e,r,o,c[u],11,-358537222),o=ge(o,i,e,r,c[u+3],16,-722521979),r=ge(r,o,i,e,c[u+6],23,76029189),e=ge(e,r,o,i,c[u+9],4,-640364487),i=ge(i,e,r,o,c[u+12],11,-421815835),o=ge(o,i,e,r,c[u+15],16,530742520),r=ge(r,o,i,e,c[u+2],23,-995338651),e=me(e,r,o,i,c[u],6,-198630844),i=me(i,e,r,o,c[u+7],10,1126891415),o=me(o,i,e,r,c[u+14],15,-1416354905),r=me(r,o,i,e,c[u+5],21,-57434055),e=me(e,r,o,i,c[u+12],6,1700485571),i=me(i,e,r,o,c[u+3],10,-1894986606),o=me(o,i,e,r,c[u+10],15,-1051523),r=me(r,o,i,e,c[u+1],21,-2054922799),e=me(e,r,o,i,c[u+8],6,1873313359),i=me(i,e,r,o,c[u+15],10,-30611744),o=me(o,i,e,r,c[u+6],15,-1560198380),r=me(r,o,i,e,c[u+13],21,1309151649),e=me(e,r,o,i,c[u+4],6,-145523070),i=me(i,e,r,o,c[u+11],10,-1120210379),o=me(o,i,e,r,c[u+2],15,718787259),r=me(r,o,i,e,c[u+9],21,-343485551),e=er(e,w),r=er(r,b),o=er(o,k),i=er(i,v)}return[e,r,o,i]}function qo(c){if(c.length===0)return[];for(var t=c.length*8,e=new Uint32Array(gs(t)),r=0;r<t;r+=8)e[r>>5]|=(c[r/8]&255)<<r%32;return e}function er(c,t){var e=(c&65535)+(t&65535),r=(c>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Do(c,t){return c<<t|c>>>32-t}function An(c,t,e,r,o,i){return er(Do(er(er(t,c),er(r,i)),o),e)}function de(c,t,e,r,o,i,u){return An(t&e|~t&r,c,t,o,i,u)}function pe(c,t,e,r,o,i,u){return An(t&r|e&~r,c,t,o,i,u)}function ge(c,t,e,r,o,i,u){return An(t^e^r,c,t,o,i,u)}function me(c,t,e,r,o,i,u){return An(e^(t|~r),c,t,o,i,u)}var Ho=ps("v3",48,Uo);const Vo=Ho;function $o(c,t,e,r){switch(c){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function qn(c,t){return c<<t|c>>>32-t}function Go(c){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof c=="string"){var r=unescape(encodeURIComponent(c));c=[];for(var o=0;o<r.length;++o)c.push(r.charCodeAt(o))}else Array.isArray(c)||(c=Array.prototype.slice.call(c));c.push(128);for(var i=c.length/4+2,u=Math.ceil(i/16),w=new Array(u),b=0;b<u;++b){for(var k=new Uint32Array(16),v=0;v<16;++v)k[v]=c[b*64+v*4]<<24|c[b*64+v*4+1]<<16|c[b*64+v*4+2]<<8|c[b*64+v*4+3];w[b]=k}w[u-1][14]=(c.length-1)*8/Math.pow(2,32),w[u-1][14]=Math.floor(w[u-1][14]),w[u-1][15]=(c.length-1)*8&4294967295;for(var A=0;A<u;++A){for(var T=new Uint32Array(80),E=0;E<16;++E)T[E]=w[A][E];for(var B=16;B<80;++B)T[B]=qn(T[B-3]^T[B-8]^T[B-14]^T[B-16],1);for(var R=e[0],L=e[1],W=e[2],dt=e[3],Q=e[4],Dt=0;Dt<80;++Dt){var et=Math.floor(Dt/20),zt=qn(R,5)+$o(et,L,W,dt)+Q+t[et]+T[Dt]>>>0;Q=dt,dt=W,W=qn(L,30)>>>0,L=R,R=zt}e[0]=e[0]+R>>>0,e[1]=e[1]+L>>>0,e[2]=e[2]+W>>>0,e[3]=e[3]+dt>>>0,e[4]=e[4]+Q>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Zo=ps("v5",80,Go);const Yo=Zo,jo="00000000-0000-0000-0000-000000000000";function Jo(c){if(!si(c))throw TypeError("Invalid UUID");return parseInt(c.substr(14,1),16)}const Xo=Object.freeze(Object.defineProperty({__proto__:null,NIL:jo,parse:ds,stringify:ii,v1:No,v3:Vo,v4:bo,v5:Yo,validate:si,version:Jo},Symbol.toStringTag,{value:"Module"})),[Qo,ta]=Ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(c=>BigInt(c))),Qe=new Uint32Array(80),tr=new Uint32Array(80);class ea extends ko{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:i,Cl:u,Dh:w,Dl:b,Eh:k,El:v,Fh:A,Fl:T,Gh:E,Gl:B,Hh:R,Hl:L}=this;return[t,e,r,o,i,u,w,b,k,v,A,T,E,B,R,L]}set(t,e,r,o,i,u,w,b,k,v,A,T,E,B,R,L){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=u|0,this.Dh=w|0,this.Dl=b|0,this.Eh=k|0,this.El=v|0,this.Fh=A|0,this.Fl=T|0,this.Gh=E|0,this.Gl=B|0,this.Hh=R|0,this.Hl=L|0}process(t,e){for(let Q=0;Q<16;Q++,e+=4)Qe[Q]=t.getUint32(e),tr[Q]=t.getUint32(e+=4);for(let Q=16;Q<80;Q++){const Dt=Qe[Q-15]|0,et=tr[Q-15]|0,zt=Ct.rotrSH(Dt,et,1)^Ct.rotrSH(Dt,et,8)^Ct.shrSH(Dt,et,7),le=Ct.rotrSL(Dt,et,1)^Ct.rotrSL(Dt,et,8)^Ct.shrSL(Dt,et,7),ee=Qe[Q-2]|0,re=tr[Q-2]|0,ye=Ct.rotrSH(ee,re,19)^Ct.rotrBH(ee,re,61)^Ct.shrSH(ee,re,6),G=Ct.rotrSL(ee,re,19)^Ct.rotrBL(ee,re,61)^Ct.shrSL(ee,re,6),Xt=Ct.add4L(le,G,tr[Q-7],tr[Q-16]),m=Ct.add4H(Xt,zt,ye,Qe[Q-7],Qe[Q-16]);Qe[Q]=m|0,tr[Q]=Xt|0}let{Ah:r,Al:o,Bh:i,Bl:u,Ch:w,Cl:b,Dh:k,Dl:v,Eh:A,El:T,Fh:E,Fl:B,Gh:R,Gl:L,Hh:W,Hl:dt}=this;for(let Q=0;Q<80;Q++){const Dt=Ct.rotrSH(A,T,14)^Ct.rotrSH(A,T,18)^Ct.rotrBH(A,T,41),et=Ct.rotrSL(A,T,14)^Ct.rotrSL(A,T,18)^Ct.rotrBL(A,T,41),zt=A&E^~A&R,le=T&B^~T&L,ee=Ct.add5L(dt,et,le,ta[Q],tr[Q]),re=Ct.add5H(ee,W,Dt,zt,Qo[Q],Qe[Q]),ye=ee|0,G=Ct.rotrSH(r,o,28)^Ct.rotrBH(r,o,34)^Ct.rotrBH(r,o,39),Xt=Ct.rotrSL(r,o,28)^Ct.rotrBL(r,o,34)^Ct.rotrBL(r,o,39),m=r&i^r&w^i&w,n=o&u^o&b^u&b;W=R|0,dt=L|0,R=E|0,L=B|0,E=A|0,B=T|0,{h:A,l:T}=Ct.add(k|0,v|0,re|0,ye|0),k=w|0,v=b|0,w=i|0,b=u|0,i=r|0,u=o|0;const a=Ct.add3L(ye,Xt,n);r=Ct.add3H(a,re,G,m),o=a|0}({h:r,l:o}=Ct.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:u}=Ct.add(this.Bh|0,this.Bl|0,i|0,u|0),{h:w,l:b}=Ct.add(this.Ch|0,this.Cl|0,w|0,b|0),{h:k,l:v}=Ct.add(this.Dh|0,this.Dl|0,k|0,v|0),{h:A,l:T}=Ct.add(this.Eh|0,this.El|0,A|0,T|0),{h:E,l:B}=Ct.add(this.Fh|0,this.Fl|0,E|0,B|0),{h:R,l:L}=Ct.add(this.Gh|0,this.Gl|0,R|0,L|0),{h:W,l:dt}=Ct.add(this.Hh|0,this.Hl|0,W|0,dt|0),this.set(r,o,i,u,w,b,k,v,A,T,E,B,R,L,W,dt)}roundClean(){Qe.fill(0),tr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ms=vo(()=>new ea);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pe=BigInt(0),xe=BigInt(1),mn=BigInt(2),ra=BigInt(8),na={zip215:!0};function ia(c){const t=So(c);return Mo(c,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function hi(c){const t=ia(c),{Fp:e,n:r,prehash:o,hash:i,randomBytes:u,nByteLength:w,h:b}=t,k=mn<<BigInt(w*8)-xe,v=e.create,A=t.uvRatio||((d,g)=>{try{return{isValid:!0,value:e.sqrt(d*e.inv(g))}}catch{return{isValid:!1,value:Pe}}}),T=t.adjustScalarBytes||(d=>d),E=t.domain||((d,g,y)=>{if(g.length||y)throw new Error("Contexts/pre-hash are not supported");return d}),B=d=>typeof d=="bigint"&&Pe<d,R=(d,g)=>B(d)&&B(g)&&d<g,L=d=>d===Pe||R(d,k);function W(d,g){if(R(d,g))return d;throw new Error(`Expected valid scalar < ${g}, got ${typeof d} ${d}`)}function dt(d){return d===Pe?d:W(d,r)}const Q=new Map;function Dt(d){if(!(d instanceof et))throw new Error("ExtendedPoint expected")}class et{constructor(g,y,l,s){if(this.ex=g,this.ey=y,this.ez=l,this.et=s,!L(g))throw new Error("x required");if(!L(y))throw new Error("y required");if(!L(l))throw new Error("z required");if(!L(s))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof et)throw new Error("extended point not allowed");const{x:y,y:l}=g||{};if(!L(y)||!L(l))throw new Error("invalid affine point");return new et(y,l,xe,v(y*l))}static normalizeZ(g){const y=e.invertBatch(g.map(l=>l.ez));return g.map((l,s)=>l.toAffine(y[s])).map(et.fromAffine)}_setWindowSize(g){this._WINDOW_SIZE=g,Q.delete(this)}assertValidity(){const{a:g,d:y}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:l,ey:s,ez:f,et:x}=this,_=v(l*l),I=v(s*s),V=v(f*f),U=v(V*V),D=v(_*g),fe=v(V*v(D+I)),$=v(U+v(y*v(_*I)));if(fe!==$)throw new Error("bad point: equation left != right (1)");const Y=v(l*s),we=v(f*x);if(Y!==we)throw new Error("bad point: equation left != right (2)")}equals(g){Dt(g);const{ex:y,ey:l,ez:s}=this,{ex:f,ey:x,ez:_}=g,I=v(y*_),V=v(f*s),U=v(l*_),D=v(x*s);return I===V&&U===D}is0(){return this.equals(et.ZERO)}negate(){return new et(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){const{a:g}=t,{ex:y,ey:l,ez:s}=this,f=v(y*y),x=v(l*l),_=v(mn*v(s*s)),I=v(g*f),V=y+l,U=v(v(V*V)-f-x),D=I+x,fe=D-_,$=I-x,Y=v(U*fe),we=v(D*$),J=v(U*$),X=v(fe*D);return new et(Y,we,X,J)}add(g){Dt(g);const{a:y,d:l}=t,{ex:s,ey:f,ez:x,et:_}=this,{ex:I,ey:V,ez:U,et:D}=g;if(y===BigInt(-1)){const Ye=v((f-s)*(V+I)),nt=v((f+s)*(V-I)),tt=v(nt-Ye);if(tt===Pe)return this.double();const je=v(x*mn*D),it=v(_*mn*U),st=it+je,Je=nt+Ye,ot=it-je,ht=v(st*tt),or=v(Je*ot),lt=v(st*ot),ft=v(tt*Je);return new et(ht,or,ft,lt)}const fe=v(s*I),$=v(f*V),Y=v(_*l*D),we=v(x*U),J=v((s+f)*(I+V)-fe-$),X=we-Y,Ze=we+Y,rt=v($-y*fe),at=v(J*X),sr=v(Ze*rt),ct=v(J*rt),ut=v(X*Ze);return new et(at,sr,ut,ct)}subtract(g){return this.add(g.negate())}wNAF(g){return ee.wNAFCached(this,Q,g,et.normalizeZ)}multiply(g){const{p:y,f:l}=this.wNAF(W(g,r));return et.normalizeZ([y,l])[0]}multiplyUnsafe(g){let y=dt(g);return y===Pe?le:this.equals(le)||y===xe?this:this.equals(zt)?this.wNAF(y).p:ee.unsafeLadder(this,y)}isSmallOrder(){return this.multiplyUnsafe(b).is0()}isTorsionFree(){return ee.unsafeLadder(this,r).is0()}toAffine(g){const{ex:y,ey:l,ez:s}=this,f=this.is0();g==null&&(g=f?ra:e.inv(s));const x=v(y*g),_=v(l*g),I=v(s*g);if(f)return{x:Pe,y:xe};if(I!==xe)throw new Error("invZ was invalid");return{x,y:_}}clearCofactor(){const{h:g}=t;return g===xe?this:this.multiplyUnsafe(g)}static fromHex(g,y=!1){const{d:l,a:s}=t,f=e.BYTES;g=Xe("pointHex",g,f);const x=g.slice(),_=g[f-1];x[f-1]=_&-129;const I=Kn(x);I===Pe||(y?W(I,k):W(I,e.ORDER));const V=v(I*I),U=v(V-xe),D=v(l*V-s);let{isValid:fe,value:$}=A(U,D);if(!fe)throw new Error("Point.fromHex: invalid y coordinate");const Y=($&xe)===xe,we=(_&128)!==0;if(!y&&$===Pe&&we)throw new Error("Point.fromHex: x=0 and x_0=1");return we!==Y&&($=v(-$)),et.fromAffine({x:$,y:I})}static fromPrivateKey(g){return G(g).point}toRawBytes(){const{x:g,y}=this.toAffine(),l=Ki(y,e.BYTES);return l[l.length-1]|=g&xe?128:0,l}toHex(){return xo(this.toRawBytes())}}et.BASE=new et(t.Gx,t.Gy,xe,v(t.Gx*t.Gy)),et.ZERO=new et(Pe,xe,xe,Pe);const{BASE:zt,ZERO:le}=et,ee=_o(et,w*8);function re(d){return De(d,r)}function ye(d){return re(Kn(d))}function G(d){const g=w;d=Xe("private key",d,g);const y=Xe("hashed private key",i(d),2*g),l=T(y.slice(0,g)),s=y.slice(g,2*g),f=ye(l),x=zt.multiply(f),_=x.toRawBytes();return{head:l,prefix:s,scalar:f,point:x,pointBytes:_}}function Xt(d){return G(d).pointBytes}function m(d=new Uint8Array,...g){const y=Ui(...g);return ye(i(E(y,Xe("context",d),!!o)))}function n(d,g,y={}){d=Xe("message",d),o&&(d=o(d));const{prefix:l,scalar:s,pointBytes:f}=G(g),x=m(y.context,l,d),_=zt.multiply(x).toRawBytes(),I=m(y.context,_,f,d),V=re(x+I*s);dt(V);const U=Ui(_,Ki(V,e.BYTES));return Xe("result",U,w*2)}const a=na;function h(d,g,y,l=a){const{context:s,zip215:f}=l,x=e.BYTES;d=Xe("signature",d,2*x),g=Xe("message",g),o&&(g=o(g));const _=Kn(d.slice(x,2*x));let I,V,U;try{I=et.fromHex(y,f),V=et.fromHex(d.slice(0,x),f),U=zt.multiplyUnsafe(_)}catch{return!1}if(!f&&I.isSmallOrder())return!1;const D=m(s,V.toRawBytes(),I.toRawBytes(),g);return V.add(I.multiplyUnsafe(D)).subtract(U).clearCofactor().equals(et.ZERO)}return zt._setWindowSize(8),{CURVE:t,getPublicKey:Xt,sign:n,verify:h,ExtendedPoint:et,utils:{getExtendedPublicKey:G,randomPrivateKey:()=>u(e.BYTES),precompute(d=8,g=et.BASE){return g._setWindowSize(d),g.multiply(BigInt(3)),g}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const li=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Di=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const sa=BigInt(1),jn=BigInt(2),oa=BigInt(5),Hi=BigInt(10),aa=BigInt(20),ca=BigInt(40),Vi=BigInt(80);function ua(c){const t=li,r=c*c%t*c%t,o=Ce(r,jn,t)*r%t,i=Ce(o,sa,t)*c%t,u=Ce(i,oa,t)*i%t,w=Ce(u,Hi,t)*u%t,b=Ce(w,aa,t)*w%t,k=Ce(b,ca,t)*b%t,v=Ce(k,Vi,t)*k%t,A=Ce(v,Vi,t)*k%t,T=Ce(A,Hi,t)*u%t;return{pow_p_5_8:Ce(T,jn,t)*c%t,b2:r}}function ha(c){return c[0]&=248,c[31]&=127,c[31]|=64,c}function la(c,t){const e=li,r=De(t*t*t,e),o=De(r*r*t,e),i=ua(c*o).pow_p_5_8;let u=De(c*r*i,e);const w=De(t*u*u,e),b=u,k=De(u*Di,e),v=w===c,A=w===De(-c,e),T=w===De(-c*Di,e);return v&&(u=b),(A||T)&&(u=k),Ro(u,e)&&(u=De(-u,e)),{isValid:v||A,value:u}}const Ge=Io(li,void 0,!0),fi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ms,randomBytes:Ao,adjustScalarBytes:ha,uvRatio:la},qr=hi(fi);function ys(c,t,e){if(t.length>255)throw new Error("Context is too big");return Bo(Po("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,c)}({...fi});({...fi});const fa=(Ge.ORDER+BigInt(3))/BigInt(8);Ge.pow(jn,fa);Ge.sqrt(Ge.neg(Ge.ONE));(Ge.ORDER-BigInt(5))/BigInt(8);BigInt(486662);Eo(Ge,Ge.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var di={exports:{}};di.exports;(function(c){(function(t,e){function r(m,n){if(!m)throw new Error(n||"Assertion failed")}function o(m,n){m.super_=n;var a=function(){};a.prototype=n.prototype,m.prototype=new a,m.prototype.constructor=m}function i(m,n,a){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((n==="le"||n==="be")&&(a=n,n=10),this._init(m||0,n||10,a||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=oi.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,a){return n.cmp(a)>0?n:a},i.min=function(n,a){return n.cmp(a)<0?n:a},i.prototype._init=function(n,a,h){if(typeof n=="number")return this._initNumber(n,a,h);if(typeof n=="object")return this._initArray(n,a,h);a==="hex"&&(a=16),r(a===(a|0)&&a>=2&&a<=36),n=n.toString().replace(/\s+/g,"");var p=0;n[0]==="-"&&(p++,this.negative=1),p<n.length&&(a===16?this._parseHex(n,p,h):(this._parseBase(n,a,p),h==="le"&&this._initArray(this.toArray(),a,h)))},i.prototype._initNumber=function(n,a,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),a,h)},i.prototype._initArray=function(n,a,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d,g,y=0;if(h==="be")for(p=n.length-1,d=0;p>=0;p-=3)g=n[p]|n[p-1]<<8|n[p-2]<<16,this.words[d]|=g<<y&67108863,this.words[d+1]=g>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(h==="le")for(p=0,d=0;p<n.length;p+=3)g=n[p]|n[p+1]<<8|n[p+2]<<16,this.words[d]|=g<<y&67108863,this.words[d+1]=g>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this._strip()};function w(m,n){var a=m.charCodeAt(n);if(a>=48&&a<=57)return a-48;if(a>=65&&a<=70)return a-55;if(a>=97&&a<=102)return a-87;r(!1,"Invalid character in "+m)}function b(m,n,a){var h=w(m,a);return a-1>=n&&(h|=w(m,a-1)<<4),h}i.prototype._parseHex=function(n,a,h){this.length=Math.ceil((n.length-a)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d=0,g=0,y;if(h==="be")for(p=n.length-1;p>=a;p-=2)y=b(n,a,p)<<d,this.words[g]|=y&67108863,d>=18?(d-=18,g+=1,this.words[g]|=y>>>26):d+=8;else{var l=n.length-a;for(p=l%2===0?a+1:a;p<n.length;p+=2)y=b(n,a,p)<<d,this.words[g]|=y&67108863,d>=18?(d-=18,g+=1,this.words[g]|=y>>>26):d+=8}this._strip()};function k(m,n,a,h){for(var p=0,d=0,g=Math.min(m.length,a),y=n;y<g;y++){var l=m.charCodeAt(y)-48;p*=h,l>=49?d=l-49+10:l>=17?d=l-17+10:d=l,r(l>=0&&d<h,"Invalid character"),p+=d}return p}i.prototype._parseBase=function(n,a,h){this.words=[0],this.length=1;for(var p=0,d=1;d<=67108863;d*=a)p++;p--,d=d/a|0;for(var g=n.length-h,y=g%p,l=Math.min(g,g-y)+h,s=0,f=h;f<l;f+=p)s=k(n,f,f+p,a),this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(y!==0){var x=1;for(s=k(n,f,n.length,a),f=0;f<y;f++)x*=a;this.imuln(x),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red};function v(m,n){m.words=n.words,m.length=n.length,m.negative=n.negative,m.red=n.red}if(i.prototype._move=function(n){v(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,a){n=n||10,a=a|0||1;var h;if(n===16||n==="hex"){h="";for(var p=0,d=0,g=0;g<this.length;g++){var y=this.words[g],l=((y<<p|d)&16777215).toString(16);d=y>>>24-p&16777215,p+=2,p>=26&&(p-=26,g--),d!==0||g!==this.length-1?h=T[6-l.length]+l+h:h=l+h}for(d!==0&&(h=d.toString(16)+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var s=E[n],f=B[n];h="";var x=this.clone();for(x.negative=0;!x.isZero();){var _=x.modrn(f).toString(n);x=x.idivn(f),x.isZero()?h=_+h:h=T[s-_.length]+_+h}for(this.isZero()&&(h="0"+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,a){return this.toArrayLike(u,n,a)}),i.prototype.toArray=function(n,a){return this.toArrayLike(Array,n,a)};var R=function(n,a){return n.allocUnsafe?n.allocUnsafe(a):new n(a)};i.prototype.toArrayLike=function(n,a,h){this._strip();var p=this.byteLength(),d=h||Math.max(1,p);r(p<=d,"byte array longer than desired length"),r(d>0,"Requested array length <= 0");var g=R(n,d),y=a==="le"?"LE":"BE";return this["_toArrayLike"+y](g,p),g},i.prototype._toArrayLikeLE=function(n,a){for(var h=0,p=0,d=0,g=0;d<this.length;d++){var y=this.words[d]<<g|p;n[h++]=y&255,h<n.length&&(n[h++]=y>>8&255),h<n.length&&(n[h++]=y>>16&255),g===6?(h<n.length&&(n[h++]=y>>24&255),p=0,g=0):(p=y>>>24,g+=2)}if(h<n.length)for(n[h++]=p;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,a){for(var h=n.length-1,p=0,d=0,g=0;d<this.length;d++){var y=this.words[d]<<g|p;n[h--]=y&255,h>=0&&(n[h--]=y>>8&255),h>=0&&(n[h--]=y>>16&255),g===6?(h>=0&&(n[h--]=y>>24&255),p=0,g=0):(p=y>>>24,g+=2)}if(h>=0)for(n[h--]=p;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var a=n,h=0;return a>=4096&&(h+=13,a>>>=13),a>=64&&(h+=7,a>>>=7),a>=8&&(h+=4,a>>>=4),a>=2&&(h+=2,a>>>=2),h+a},i.prototype._zeroBits=function(n){if(n===0)return 26;var a=n,h=0;return a&8191||(h+=13,a>>>=13),a&127||(h+=7,a>>>=7),a&15||(h+=4,a>>>=4),a&3||(h+=2,a>>>=2),a&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],a=this._countBits(n);return(this.length-1)*26+a};function L(m){for(var n=new Array(m.bitLength()),a=0;a<n.length;a++){var h=a/26|0,p=a%26;n[a]=m.words[h]>>>p&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,a=0;a<this.length;a++){var h=this._zeroBits(this.words[a]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]|n.words[a];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var a;this.length>n.length?a=n:a=this;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=a.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var a,h;this.length>n.length?(a=this,h=n):(a=n,h=this);for(var p=0;p<h.length;p++)this.words[p]=a.words[p]^h.words[p];if(this!==a)for(;p<a.length;p++)this.words[p]=a.words[p];return this.length=a.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var a=Math.ceil(n/26)|0,h=n%26;this._expand(a),h>0&&a--;for(var p=0;p<a;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,a){r(typeof n=="number"&&n>=0);var h=n/26|0,p=n%26;return this._expand(h+1),a?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this._strip()},i.prototype.iadd=function(n){var a;if(this.negative!==0&&n.negative===0)return this.negative=0,a=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,a=this.isub(n),n.negative=1,a._normSign();var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var d=0,g=0;g<p.length;g++)a=(h.words[g]|0)+(p.words[g]|0)+d,this.words[g]=a&67108863,d=a>>>26;for(;d!==0&&g<h.length;g++)a=(h.words[g]|0)+d,this.words[g]=a&67108863,d=a>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;g<h.length;g++)this.words[g]=h.words[g];return this},i.prototype.add=function(n){var a;return n.negative!==0&&this.negative===0?(n.negative=0,a=this.sub(n),n.negative^=1,a):n.negative===0&&this.negative!==0?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var a=this.iadd(n);return n.negative=1,a._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,d;h>0?(p=this,d=n):(p=n,d=this);for(var g=0,y=0;y<d.length;y++)a=(p.words[y]|0)-(d.words[y]|0)+g,g=a>>26,this.words[y]=a&67108863;for(;g!==0&&y<p.length;y++)a=(p.words[y]|0)+g,g=a>>26,this.words[y]=a&67108863;if(g===0&&y<p.length&&p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=Math.max(this.length,y),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function W(m,n,a){a.negative=n.negative^m.negative;var h=m.length+n.length|0;a.length=h,h=h-1|0;var p=m.words[0]|0,d=n.words[0]|0,g=p*d,y=g&67108863,l=g/67108864|0;a.words[0]=y;for(var s=1;s<h;s++){for(var f=l>>>26,x=l&67108863,_=Math.min(s,n.length-1),I=Math.max(0,s-m.length+1);I<=_;I++){var V=s-I|0;p=m.words[V]|0,d=n.words[I]|0,g=p*d+x,f+=g/67108864|0,x=g&67108863}a.words[s]=x|0,l=f|0}return l!==0?a.words[s]=l|0:a.length--,a._strip()}var dt=function(n,a,h){var p=n.words,d=a.words,g=h.words,y=0,l,s,f,x=p[0]|0,_=x&8191,I=x>>>13,V=p[1]|0,U=V&8191,D=V>>>13,fe=p[2]|0,$=fe&8191,Y=fe>>>13,we=p[3]|0,J=we&8191,X=we>>>13,Ze=p[4]|0,rt=Ze&8191,at=Ze>>>13,sr=p[5]|0,ct=sr&8191,ut=sr>>>13,Ye=p[6]|0,nt=Ye&8191,tt=Ye>>>13,je=p[7]|0,it=je&8191,st=je>>>13,Je=p[8]|0,ot=Je&8191,ht=Je>>>13,or=p[9]|0,lt=or&8191,ft=or>>>13,Gr=d[0]|0,pt=Gr&8191,gt=Gr>>>13,Zr=d[1]|0,mt=Zr&8191,yt=Zr>>>13,Yr=d[2]|0,wt=Yr&8191,bt=Yr>>>13,jr=d[3]|0,vt=jr&8191,kt=jr>>>13,Jr=d[4]|0,St=Jr&8191,Mt=Jr>>>13,Xr=d[5]|0,xt=Xr&8191,_t=Xr>>>13,Qr=d[6]|0,It=Qr&8191,At=Qr>>>13,tn=d[7]|0,Et=tn&8191,Rt=tn>>>13,en=d[8]|0,Bt=en&8191,Pt=en>>>13,rn=d[9]|0,Tt=rn&8191,Lt=rn>>>13;h.negative=n.negative^a.negative,h.length=19,l=Math.imul(_,pt),s=Math.imul(_,gt),s=s+Math.imul(I,pt)|0,f=Math.imul(I,gt);var ar=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,l=Math.imul(U,pt),s=Math.imul(U,gt),s=s+Math.imul(D,pt)|0,f=Math.imul(D,gt),l=l+Math.imul(_,mt)|0,s=s+Math.imul(_,yt)|0,s=s+Math.imul(I,mt)|0,f=f+Math.imul(I,yt)|0;var cr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,l=Math.imul($,pt),s=Math.imul($,gt),s=s+Math.imul(Y,pt)|0,f=Math.imul(Y,gt),l=l+Math.imul(U,mt)|0,s=s+Math.imul(U,yt)|0,s=s+Math.imul(D,mt)|0,f=f+Math.imul(D,yt)|0,l=l+Math.imul(_,wt)|0,s=s+Math.imul(_,bt)|0,s=s+Math.imul(I,wt)|0,f=f+Math.imul(I,bt)|0;var ur=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,l=Math.imul(J,pt),s=Math.imul(J,gt),s=s+Math.imul(X,pt)|0,f=Math.imul(X,gt),l=l+Math.imul($,mt)|0,s=s+Math.imul($,yt)|0,s=s+Math.imul(Y,mt)|0,f=f+Math.imul(Y,yt)|0,l=l+Math.imul(U,wt)|0,s=s+Math.imul(U,bt)|0,s=s+Math.imul(D,wt)|0,f=f+Math.imul(D,bt)|0,l=l+Math.imul(_,vt)|0,s=s+Math.imul(_,kt)|0,s=s+Math.imul(I,vt)|0,f=f+Math.imul(I,kt)|0;var hr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,l=Math.imul(rt,pt),s=Math.imul(rt,gt),s=s+Math.imul(at,pt)|0,f=Math.imul(at,gt),l=l+Math.imul(J,mt)|0,s=s+Math.imul(J,yt)|0,s=s+Math.imul(X,mt)|0,f=f+Math.imul(X,yt)|0,l=l+Math.imul($,wt)|0,s=s+Math.imul($,bt)|0,s=s+Math.imul(Y,wt)|0,f=f+Math.imul(Y,bt)|0,l=l+Math.imul(U,vt)|0,s=s+Math.imul(U,kt)|0,s=s+Math.imul(D,vt)|0,f=f+Math.imul(D,kt)|0,l=l+Math.imul(_,St)|0,s=s+Math.imul(_,Mt)|0,s=s+Math.imul(I,St)|0,f=f+Math.imul(I,Mt)|0;var lr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,l=Math.imul(ct,pt),s=Math.imul(ct,gt),s=s+Math.imul(ut,pt)|0,f=Math.imul(ut,gt),l=l+Math.imul(rt,mt)|0,s=s+Math.imul(rt,yt)|0,s=s+Math.imul(at,mt)|0,f=f+Math.imul(at,yt)|0,l=l+Math.imul(J,wt)|0,s=s+Math.imul(J,bt)|0,s=s+Math.imul(X,wt)|0,f=f+Math.imul(X,bt)|0,l=l+Math.imul($,vt)|0,s=s+Math.imul($,kt)|0,s=s+Math.imul(Y,vt)|0,f=f+Math.imul(Y,kt)|0,l=l+Math.imul(U,St)|0,s=s+Math.imul(U,Mt)|0,s=s+Math.imul(D,St)|0,f=f+Math.imul(D,Mt)|0,l=l+Math.imul(_,xt)|0,s=s+Math.imul(_,_t)|0,s=s+Math.imul(I,xt)|0,f=f+Math.imul(I,_t)|0;var fr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,l=Math.imul(nt,pt),s=Math.imul(nt,gt),s=s+Math.imul(tt,pt)|0,f=Math.imul(tt,gt),l=l+Math.imul(ct,mt)|0,s=s+Math.imul(ct,yt)|0,s=s+Math.imul(ut,mt)|0,f=f+Math.imul(ut,yt)|0,l=l+Math.imul(rt,wt)|0,s=s+Math.imul(rt,bt)|0,s=s+Math.imul(at,wt)|0,f=f+Math.imul(at,bt)|0,l=l+Math.imul(J,vt)|0,s=s+Math.imul(J,kt)|0,s=s+Math.imul(X,vt)|0,f=f+Math.imul(X,kt)|0,l=l+Math.imul($,St)|0,s=s+Math.imul($,Mt)|0,s=s+Math.imul(Y,St)|0,f=f+Math.imul(Y,Mt)|0,l=l+Math.imul(U,xt)|0,s=s+Math.imul(U,_t)|0,s=s+Math.imul(D,xt)|0,f=f+Math.imul(D,_t)|0,l=l+Math.imul(_,It)|0,s=s+Math.imul(_,At)|0,s=s+Math.imul(I,It)|0,f=f+Math.imul(I,At)|0;var dr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,l=Math.imul(it,pt),s=Math.imul(it,gt),s=s+Math.imul(st,pt)|0,f=Math.imul(st,gt),l=l+Math.imul(nt,mt)|0,s=s+Math.imul(nt,yt)|0,s=s+Math.imul(tt,mt)|0,f=f+Math.imul(tt,yt)|0,l=l+Math.imul(ct,wt)|0,s=s+Math.imul(ct,bt)|0,s=s+Math.imul(ut,wt)|0,f=f+Math.imul(ut,bt)|0,l=l+Math.imul(rt,vt)|0,s=s+Math.imul(rt,kt)|0,s=s+Math.imul(at,vt)|0,f=f+Math.imul(at,kt)|0,l=l+Math.imul(J,St)|0,s=s+Math.imul(J,Mt)|0,s=s+Math.imul(X,St)|0,f=f+Math.imul(X,Mt)|0,l=l+Math.imul($,xt)|0,s=s+Math.imul($,_t)|0,s=s+Math.imul(Y,xt)|0,f=f+Math.imul(Y,_t)|0,l=l+Math.imul(U,It)|0,s=s+Math.imul(U,At)|0,s=s+Math.imul(D,It)|0,f=f+Math.imul(D,At)|0,l=l+Math.imul(_,Et)|0,s=s+Math.imul(_,Rt)|0,s=s+Math.imul(I,Et)|0,f=f+Math.imul(I,Rt)|0;var pr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(pr>>>26)|0,pr&=67108863,l=Math.imul(ot,pt),s=Math.imul(ot,gt),s=s+Math.imul(ht,pt)|0,f=Math.imul(ht,gt),l=l+Math.imul(it,mt)|0,s=s+Math.imul(it,yt)|0,s=s+Math.imul(st,mt)|0,f=f+Math.imul(st,yt)|0,l=l+Math.imul(nt,wt)|0,s=s+Math.imul(nt,bt)|0,s=s+Math.imul(tt,wt)|0,f=f+Math.imul(tt,bt)|0,l=l+Math.imul(ct,vt)|0,s=s+Math.imul(ct,kt)|0,s=s+Math.imul(ut,vt)|0,f=f+Math.imul(ut,kt)|0,l=l+Math.imul(rt,St)|0,s=s+Math.imul(rt,Mt)|0,s=s+Math.imul(at,St)|0,f=f+Math.imul(at,Mt)|0,l=l+Math.imul(J,xt)|0,s=s+Math.imul(J,_t)|0,s=s+Math.imul(X,xt)|0,f=f+Math.imul(X,_t)|0,l=l+Math.imul($,It)|0,s=s+Math.imul($,At)|0,s=s+Math.imul(Y,It)|0,f=f+Math.imul(Y,At)|0,l=l+Math.imul(U,Et)|0,s=s+Math.imul(U,Rt)|0,s=s+Math.imul(D,Et)|0,f=f+Math.imul(D,Rt)|0,l=l+Math.imul(_,Bt)|0,s=s+Math.imul(_,Pt)|0,s=s+Math.imul(I,Bt)|0,f=f+Math.imul(I,Pt)|0;var gr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(gr>>>26)|0,gr&=67108863,l=Math.imul(lt,pt),s=Math.imul(lt,gt),s=s+Math.imul(ft,pt)|0,f=Math.imul(ft,gt),l=l+Math.imul(ot,mt)|0,s=s+Math.imul(ot,yt)|0,s=s+Math.imul(ht,mt)|0,f=f+Math.imul(ht,yt)|0,l=l+Math.imul(it,wt)|0,s=s+Math.imul(it,bt)|0,s=s+Math.imul(st,wt)|0,f=f+Math.imul(st,bt)|0,l=l+Math.imul(nt,vt)|0,s=s+Math.imul(nt,kt)|0,s=s+Math.imul(tt,vt)|0,f=f+Math.imul(tt,kt)|0,l=l+Math.imul(ct,St)|0,s=s+Math.imul(ct,Mt)|0,s=s+Math.imul(ut,St)|0,f=f+Math.imul(ut,Mt)|0,l=l+Math.imul(rt,xt)|0,s=s+Math.imul(rt,_t)|0,s=s+Math.imul(at,xt)|0,f=f+Math.imul(at,_t)|0,l=l+Math.imul(J,It)|0,s=s+Math.imul(J,At)|0,s=s+Math.imul(X,It)|0,f=f+Math.imul(X,At)|0,l=l+Math.imul($,Et)|0,s=s+Math.imul($,Rt)|0,s=s+Math.imul(Y,Et)|0,f=f+Math.imul(Y,Rt)|0,l=l+Math.imul(U,Bt)|0,s=s+Math.imul(U,Pt)|0,s=s+Math.imul(D,Bt)|0,f=f+Math.imul(D,Pt)|0,l=l+Math.imul(_,Tt)|0,s=s+Math.imul(_,Lt)|0,s=s+Math.imul(I,Tt)|0,f=f+Math.imul(I,Lt)|0;var mr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(mr>>>26)|0,mr&=67108863,l=Math.imul(lt,mt),s=Math.imul(lt,yt),s=s+Math.imul(ft,mt)|0,f=Math.imul(ft,yt),l=l+Math.imul(ot,wt)|0,s=s+Math.imul(ot,bt)|0,s=s+Math.imul(ht,wt)|0,f=f+Math.imul(ht,bt)|0,l=l+Math.imul(it,vt)|0,s=s+Math.imul(it,kt)|0,s=s+Math.imul(st,vt)|0,f=f+Math.imul(st,kt)|0,l=l+Math.imul(nt,St)|0,s=s+Math.imul(nt,Mt)|0,s=s+Math.imul(tt,St)|0,f=f+Math.imul(tt,Mt)|0,l=l+Math.imul(ct,xt)|0,s=s+Math.imul(ct,_t)|0,s=s+Math.imul(ut,xt)|0,f=f+Math.imul(ut,_t)|0,l=l+Math.imul(rt,It)|0,s=s+Math.imul(rt,At)|0,s=s+Math.imul(at,It)|0,f=f+Math.imul(at,At)|0,l=l+Math.imul(J,Et)|0,s=s+Math.imul(J,Rt)|0,s=s+Math.imul(X,Et)|0,f=f+Math.imul(X,Rt)|0,l=l+Math.imul($,Bt)|0,s=s+Math.imul($,Pt)|0,s=s+Math.imul(Y,Bt)|0,f=f+Math.imul(Y,Pt)|0,l=l+Math.imul(U,Tt)|0,s=s+Math.imul(U,Lt)|0,s=s+Math.imul(D,Tt)|0,f=f+Math.imul(D,Lt)|0;var yr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(yr>>>26)|0,yr&=67108863,l=Math.imul(lt,wt),s=Math.imul(lt,bt),s=s+Math.imul(ft,wt)|0,f=Math.imul(ft,bt),l=l+Math.imul(ot,vt)|0,s=s+Math.imul(ot,kt)|0,s=s+Math.imul(ht,vt)|0,f=f+Math.imul(ht,kt)|0,l=l+Math.imul(it,St)|0,s=s+Math.imul(it,Mt)|0,s=s+Math.imul(st,St)|0,f=f+Math.imul(st,Mt)|0,l=l+Math.imul(nt,xt)|0,s=s+Math.imul(nt,_t)|0,s=s+Math.imul(tt,xt)|0,f=f+Math.imul(tt,_t)|0,l=l+Math.imul(ct,It)|0,s=s+Math.imul(ct,At)|0,s=s+Math.imul(ut,It)|0,f=f+Math.imul(ut,At)|0,l=l+Math.imul(rt,Et)|0,s=s+Math.imul(rt,Rt)|0,s=s+Math.imul(at,Et)|0,f=f+Math.imul(at,Rt)|0,l=l+Math.imul(J,Bt)|0,s=s+Math.imul(J,Pt)|0,s=s+Math.imul(X,Bt)|0,f=f+Math.imul(X,Pt)|0,l=l+Math.imul($,Tt)|0,s=s+Math.imul($,Lt)|0,s=s+Math.imul(Y,Tt)|0,f=f+Math.imul(Y,Lt)|0;var wr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(wr>>>26)|0,wr&=67108863,l=Math.imul(lt,vt),s=Math.imul(lt,kt),s=s+Math.imul(ft,vt)|0,f=Math.imul(ft,kt),l=l+Math.imul(ot,St)|0,s=s+Math.imul(ot,Mt)|0,s=s+Math.imul(ht,St)|0,f=f+Math.imul(ht,Mt)|0,l=l+Math.imul(it,xt)|0,s=s+Math.imul(it,_t)|0,s=s+Math.imul(st,xt)|0,f=f+Math.imul(st,_t)|0,l=l+Math.imul(nt,It)|0,s=s+Math.imul(nt,At)|0,s=s+Math.imul(tt,It)|0,f=f+Math.imul(tt,At)|0,l=l+Math.imul(ct,Et)|0,s=s+Math.imul(ct,Rt)|0,s=s+Math.imul(ut,Et)|0,f=f+Math.imul(ut,Rt)|0,l=l+Math.imul(rt,Bt)|0,s=s+Math.imul(rt,Pt)|0,s=s+Math.imul(at,Bt)|0,f=f+Math.imul(at,Pt)|0,l=l+Math.imul(J,Tt)|0,s=s+Math.imul(J,Lt)|0,s=s+Math.imul(X,Tt)|0,f=f+Math.imul(X,Lt)|0;var br=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(br>>>26)|0,br&=67108863,l=Math.imul(lt,St),s=Math.imul(lt,Mt),s=s+Math.imul(ft,St)|0,f=Math.imul(ft,Mt),l=l+Math.imul(ot,xt)|0,s=s+Math.imul(ot,_t)|0,s=s+Math.imul(ht,xt)|0,f=f+Math.imul(ht,_t)|0,l=l+Math.imul(it,It)|0,s=s+Math.imul(it,At)|0,s=s+Math.imul(st,It)|0,f=f+Math.imul(st,At)|0,l=l+Math.imul(nt,Et)|0,s=s+Math.imul(nt,Rt)|0,s=s+Math.imul(tt,Et)|0,f=f+Math.imul(tt,Rt)|0,l=l+Math.imul(ct,Bt)|0,s=s+Math.imul(ct,Pt)|0,s=s+Math.imul(ut,Bt)|0,f=f+Math.imul(ut,Pt)|0,l=l+Math.imul(rt,Tt)|0,s=s+Math.imul(rt,Lt)|0,s=s+Math.imul(at,Tt)|0,f=f+Math.imul(at,Lt)|0;var vr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(vr>>>26)|0,vr&=67108863,l=Math.imul(lt,xt),s=Math.imul(lt,_t),s=s+Math.imul(ft,xt)|0,f=Math.imul(ft,_t),l=l+Math.imul(ot,It)|0,s=s+Math.imul(ot,At)|0,s=s+Math.imul(ht,It)|0,f=f+Math.imul(ht,At)|0,l=l+Math.imul(it,Et)|0,s=s+Math.imul(it,Rt)|0,s=s+Math.imul(st,Et)|0,f=f+Math.imul(st,Rt)|0,l=l+Math.imul(nt,Bt)|0,s=s+Math.imul(nt,Pt)|0,s=s+Math.imul(tt,Bt)|0,f=f+Math.imul(tt,Pt)|0,l=l+Math.imul(ct,Tt)|0,s=s+Math.imul(ct,Lt)|0,s=s+Math.imul(ut,Tt)|0,f=f+Math.imul(ut,Lt)|0;var kr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(kr>>>26)|0,kr&=67108863,l=Math.imul(lt,It),s=Math.imul(lt,At),s=s+Math.imul(ft,It)|0,f=Math.imul(ft,At),l=l+Math.imul(ot,Et)|0,s=s+Math.imul(ot,Rt)|0,s=s+Math.imul(ht,Et)|0,f=f+Math.imul(ht,Rt)|0,l=l+Math.imul(it,Bt)|0,s=s+Math.imul(it,Pt)|0,s=s+Math.imul(st,Bt)|0,f=f+Math.imul(st,Pt)|0,l=l+Math.imul(nt,Tt)|0,s=s+Math.imul(nt,Lt)|0,s=s+Math.imul(tt,Tt)|0,f=f+Math.imul(tt,Lt)|0;var Sr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,l=Math.imul(lt,Et),s=Math.imul(lt,Rt),s=s+Math.imul(ft,Et)|0,f=Math.imul(ft,Rt),l=l+Math.imul(ot,Bt)|0,s=s+Math.imul(ot,Pt)|0,s=s+Math.imul(ht,Bt)|0,f=f+Math.imul(ht,Pt)|0,l=l+Math.imul(it,Tt)|0,s=s+Math.imul(it,Lt)|0,s=s+Math.imul(st,Tt)|0,f=f+Math.imul(st,Lt)|0;var Mr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,l=Math.imul(lt,Bt),s=Math.imul(lt,Pt),s=s+Math.imul(ft,Bt)|0,f=Math.imul(ft,Pt),l=l+Math.imul(ot,Tt)|0,s=s+Math.imul(ot,Lt)|0,s=s+Math.imul(ht,Tt)|0,f=f+Math.imul(ht,Lt)|0;var xr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(xr>>>26)|0,xr&=67108863,l=Math.imul(lt,Tt),s=Math.imul(lt,Lt),s=s+Math.imul(ft,Tt)|0,f=Math.imul(ft,Lt);var _r=(y+l|0)+((s&8191)<<13)|0;return y=(f+(s>>>13)|0)+(_r>>>26)|0,_r&=67108863,g[0]=ar,g[1]=cr,g[2]=ur,g[3]=hr,g[4]=lr,g[5]=fr,g[6]=dr,g[7]=pr,g[8]=gr,g[9]=mr,g[10]=yr,g[11]=wr,g[12]=br,g[13]=vr,g[14]=kr,g[15]=Sr,g[16]=Mr,g[17]=xr,g[18]=_r,y!==0&&(g[19]=y,h.length++),h};Math.imul||(dt=W);function Q(m,n,a){a.negative=n.negative^m.negative,a.length=m.length+n.length;for(var h=0,p=0,d=0;d<a.length-1;d++){var g=p;p=0;for(var y=h&67108863,l=Math.min(d,n.length-1),s=Math.max(0,d-m.length+1);s<=l;s++){var f=d-s,x=m.words[f]|0,_=n.words[s]|0,I=x*_,V=I&67108863;g=g+(I/67108864|0)|0,V=V+y|0,y=V&67108863,g=g+(V>>>26)|0,p+=g>>>26,g&=67108863}a.words[d]=y,h=g,g=p}return h!==0?a.words[d]=h:a.length--,a._strip()}function Dt(m,n,a){return Q(m,n,a)}i.prototype.mulTo=function(n,a){var h,p=this.length+n.length;return this.length===10&&n.length===10?h=dt(this,n,a):p<63?h=W(this,n,a):p<1024?h=Q(this,n,a):h=Dt(this,n,a),h},i.prototype.mul=function(n){var a=new i(null);return a.words=new Array(this.length+n.length),this.mulTo(n,a)},i.prototype.mulf=function(n){var a=new i(null);return a.words=new Array(this.length+n.length),Dt(this,n,a)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var a=n<0;a&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,p=0;p<this.length;p++){var d=(this.words[p]|0)*n,g=(d&67108863)+(h&67108863);h>>=26,h+=d/67108864|0,h+=g>>>26,this.words[p]=g&67108863}return h!==0&&(this.words[p]=h,this.length++),a?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var a=L(n);if(a.length===0)return new i(1);for(var h=this,p=0;p<a.length&&a[p]===0;p++,h=h.sqr());if(++p<a.length)for(var d=h.sqr();p<a.length;p++,d=d.sqr())a[p]!==0&&(h=h.mul(d));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26,p=67108863>>>26-a<<26-a,d;if(a!==0){var g=0;for(d=0;d<this.length;d++){var y=this.words[d]&p,l=(this.words[d]|0)-y<<a;this.words[d]=l|g,g=y>>>26-a}g&&(this.words[d]=g,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,a,h){r(typeof n=="number"&&n>=0);var p;a?p=(a-a%26)/26:p=0;var d=n%26,g=Math.min((n-d)/26,this.length),y=67108863^67108863>>>d<<d,l=h;if(p-=g,p=Math.max(0,p),l){for(var s=0;s<g;s++)l.words[s]=this.words[s];l.length=g}if(g!==0)if(this.length>g)for(this.length-=g,s=0;s<this.length;s++)this.words[s]=this.words[s+g];else this.words[0]=0,this.length=1;var f=0;for(s=this.length-1;s>=0&&(f!==0||s>=p);s--){var x=this.words[s]|0;this.words[s]=f<<26-d|x>>>d,f=x&y}return l&&f!==0&&(l.words[l.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,a,h){return r(this.negative===0),this.iushrn(n,a,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26,p=1<<a;if(this.length<=h)return!1;var d=this.words[h];return!!(d&p)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(a!==0&&h++,this.length=Math.min(h,this.length),a!==0){var p=67108863^67108863>>>a<<a;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,a,h){var p=n.length+h,d;this._expand(p);var g,y=0;for(d=0;d<n.length;d++){g=(this.words[d+h]|0)+y;var l=(n.words[d]|0)*a;g-=l&67108863,y=(g>>26)-(l/67108864|0),this.words[d+h]=g&67108863}for(;d<this.length-h;d++)g=(this.words[d+h]|0)+y,y=g>>26,this.words[d+h]=g&67108863;if(y===0)return this._strip();for(r(y===-1),y=0,d=0;d<this.length;d++)g=-(this.words[d]|0)+y,y=g>>26,this.words[d]=g&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,a){var h=this.length-n.length,p=this.clone(),d=n,g=d.words[d.length-1]|0,y=this._countBits(g);h=26-y,h!==0&&(d=d.ushln(h),p.iushln(h),g=d.words[d.length-1]|0);var l=p.length-d.length,s;if(a!=="mod"){s=new i(null),s.length=l+1,s.words=new Array(s.length);for(var f=0;f<s.length;f++)s.words[f]=0}var x=p.clone()._ishlnsubmul(d,1,l);x.negative===0&&(p=x,s&&(s.words[l]=1));for(var _=l-1;_>=0;_--){var I=(p.words[d.length+_]|0)*67108864+(p.words[d.length+_-1]|0);for(I=Math.min(I/g|0,67108863),p._ishlnsubmul(d,I,_);p.negative!==0;)I--,p.negative=0,p._ishlnsubmul(d,1,_),p.isZero()||(p.negative^=1);s&&(s.words[_]=I)}return s&&s._strip(),p._strip(),a!=="div"&&h!==0&&p.iushrn(h),{div:s||null,mod:p}},i.prototype.divmod=function(n,a,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,d,g;return this.negative!==0&&n.negative===0?(g=this.neg().divmod(n,a),a!=="mod"&&(p=g.div.neg()),a!=="div"&&(d=g.mod.neg(),h&&d.negative!==0&&d.iadd(n)),{div:p,mod:d}):this.negative===0&&n.negative!==0?(g=this.divmod(n.neg(),a),a!=="mod"&&(p=g.div.neg()),{div:p,mod:g.mod}):this.negative&n.negative?(g=this.neg().divmod(n.neg(),a),a!=="div"&&(d=g.mod.neg(),h&&d.negative!==0&&d.isub(n)),{div:g.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?a==="div"?{div:this.divn(n.words[0]),mod:null}:a==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,a)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var h=a.div.negative!==0?a.mod.isub(n):a.mod,p=n.ushrn(1),d=n.andln(1),g=h.cmp(p);return g<0||d===1&&g===0?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)},i.prototype.modrn=function(n){var a=n<0;a&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,p=0,d=this.length-1;d>=0;d--)p=(h*p+(this.words[d]|0))%n;return a?-p:p},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var a=n<0;a&&(n=-n),r(n<=67108863);for(var h=0,p=this.length-1;p>=0;p--){var d=(this.words[p]|0)+h*67108864;this.words[p]=d/n|0,h=d%n}return this._strip(),a?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var a=this,h=n.clone();a.negative!==0?a=a.umod(n):a=a.clone();for(var p=new i(1),d=new i(0),g=new i(0),y=new i(1),l=0;a.isEven()&&h.isEven();)a.iushrn(1),h.iushrn(1),++l;for(var s=h.clone(),f=a.clone();!a.isZero();){for(var x=0,_=1;!(a.words[0]&_)&&x<26;++x,_<<=1);if(x>0)for(a.iushrn(x);x-- >0;)(p.isOdd()||d.isOdd())&&(p.iadd(s),d.isub(f)),p.iushrn(1),d.iushrn(1);for(var I=0,V=1;!(h.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(h.iushrn(I);I-- >0;)(g.isOdd()||y.isOdd())&&(g.iadd(s),y.isub(f)),g.iushrn(1),y.iushrn(1);a.cmp(h)>=0?(a.isub(h),p.isub(g),d.isub(y)):(h.isub(a),g.isub(p),y.isub(d))}return{a:g,b:y,gcd:h.iushln(l)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var a=this,h=n.clone();a.negative!==0?a=a.umod(n):a=a.clone();for(var p=new i(1),d=new i(0),g=h.clone();a.cmpn(1)>0&&h.cmpn(1)>0;){for(var y=0,l=1;!(a.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(a.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(g),p.iushrn(1);for(var s=0,f=1;!(h.words[0]&f)&&s<26;++s,f<<=1);if(s>0)for(h.iushrn(s);s-- >0;)d.isOdd()&&d.iadd(g),d.iushrn(1);a.cmp(h)>=0?(a.isub(h),p.isub(d)):(h.isub(a),d.isub(p))}var x;return a.cmpn(1)===0?x=p:x=d,x.cmpn(0)<0&&x.iadd(n),x},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var a=this.clone(),h=n.clone();a.negative=0,h.negative=0;for(var p=0;a.isEven()&&h.isEven();p++)a.iushrn(1),h.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=a.cmp(h);if(d<0){var g=a;a=h,h=g}else if(d===0||h.cmpn(1)===0)break;a.isub(h)}while(!0);return h.iushln(p)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var a=n%26,h=(n-a)/26,p=1<<a;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var d=p,g=h;d!==0&&g<this.length;g++){var y=this.words[g]|0;y+=d,d=y>>>26,y&=67108863,this.words[g]=y}return d!==0&&(this.words[g]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var a=n<0;if(this.negative!==0&&!a)return-1;if(this.negative===0&&a)return 1;this._strip();var h;if(this.length>1)h=1;else{a&&(n=-n),r(n<=67108863,"Number is too big");var p=this.words[0]|0;h=p===n?0:p<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var a=this.ucmp(n);return this.negative!==0?-a|0:a},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var a=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,d=n.words[h]|0;if(p!==d){p<d?a=-1:p>d&&(a=1);break}}return a},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new G(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var et={k256:null,p224:null,p192:null,p25519:null};function zt(m,n){this.name=m,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}zt.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},zt.prototype.ireduce=function(n){var a=n,h;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),h=a.bitLength();while(h>this.n);var p=h<this.n?-1:a.ucmp(this.p);return p===0?(a.words[0]=0,a.length=1):p>0?a.isub(this.p):a.strip!==void 0?a.strip():a._strip(),a},zt.prototype.split=function(n,a){n.iushrn(this.n,0,a)},zt.prototype.imulK=function(n){return n.imul(this.k)};function le(){zt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(le,zt),le.prototype.split=function(n,a){for(var h=4194303,p=Math.min(n.length,9),d=0;d<p;d++)a.words[d]=n.words[d];if(a.length=p,n.length<=9){n.words[0]=0,n.length=1;return}var g=n.words[9];for(a.words[a.length++]=g&h,d=10;d<n.length;d++){var y=n.words[d]|0;n.words[d-10]=(y&h)<<4|g>>>22,g=y}g>>>=22,n.words[d-10]=g,g===0&&n.length>10?n.length-=10:n.length-=9},le.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,h=0;h<n.length;h++){var p=n.words[h]|0;a+=p*977,n.words[h]=a&67108863,a=p*64+(a/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function ee(){zt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ee,zt);function re(){zt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(re,zt);function ye(){zt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ye,zt),ye.prototype.imulK=function(n){for(var a=0,h=0;h<n.length;h++){var p=(n.words[h]|0)*19+a,d=p&67108863;p>>>=26,n.words[h]=d,a=p}return a!==0&&(n.words[n.length++]=a),n},i._prime=function(n){if(et[n])return et[n];var a;if(n==="k256")a=new le;else if(n==="p224")a=new ee;else if(n==="p192")a=new re;else if(n==="p25519")a=new ye;else throw new Error("Unknown prime "+n);return et[n]=a,a};function G(m){if(typeof m=="string"){var n=i._prime(m);this.m=n.p,this.prime=n}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}G.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},G.prototype._verify2=function(n,a){r((n.negative|a.negative)===0,"red works only with positives"),r(n.red&&n.red===a.red,"red works only with red numbers")},G.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(v(n,n.umod(this.m)._forceRed(this)),n)},G.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},G.prototype.add=function(n,a){this._verify2(n,a);var h=n.add(a);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},G.prototype.iadd=function(n,a){this._verify2(n,a);var h=n.iadd(a);return h.cmp(this.m)>=0&&h.isub(this.m),h},G.prototype.sub=function(n,a){this._verify2(n,a);var h=n.sub(a);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},G.prototype.isub=function(n,a){this._verify2(n,a);var h=n.isub(a);return h.cmpn(0)<0&&h.iadd(this.m),h},G.prototype.shl=function(n,a){return this._verify1(n),this.imod(n.ushln(a))},G.prototype.imul=function(n,a){return this._verify2(n,a),this.imod(n.imul(a))},G.prototype.mul=function(n,a){return this._verify2(n,a),this.imod(n.mul(a))},G.prototype.isqr=function(n){return this.imul(n,n.clone())},G.prototype.sqr=function(n){return this.mul(n,n)},G.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(r(a%2===1),a===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var p=this.m.subn(1),d=0;!p.isZero()&&p.andln(1)===0;)d++,p.iushrn(1);r(!p.isZero());var g=new i(1).toRed(this),y=g.redNeg(),l=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,l).cmp(y)!==0;)s.redIAdd(y);for(var f=this.pow(s,p),x=this.pow(n,p.addn(1).iushrn(1)),_=this.pow(n,p),I=d;_.cmp(g)!==0;){for(var V=_,U=0;V.cmp(g)!==0;U++)V=V.redSqr();r(U<I);var D=this.pow(f,new i(1).iushln(I-U-1));x=x.redMul(D),f=D.redSqr(),_=_.redMul(f),I=U}return x},G.prototype.invm=function(n){var a=n._invmp(this.m);return a.negative!==0?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},G.prototype.pow=function(n,a){if(a.isZero())return new i(1).toRed(this);if(a.cmpn(1)===0)return n.clone();var h=4,p=new Array(1<<h);p[0]=new i(1).toRed(this),p[1]=n;for(var d=2;d<p.length;d++)p[d]=this.mul(p[d-1],n);var g=p[0],y=0,l=0,s=a.bitLength()%26;for(s===0&&(s=26),d=a.length-1;d>=0;d--){for(var f=a.words[d],x=s-1;x>=0;x--){var _=f>>x&1;if(g!==p[0]&&(g=this.sqr(g)),_===0&&y===0){l=0;continue}y<<=1,y|=_,l++,!(l!==h&&(d!==0||x!==0))&&(g=this.mul(g,p[y]),l=0,y=0)}s=26}return g},G.prototype.convertTo=function(n){var a=n.umod(this.m);return a===n?a.clone():a},G.prototype.convertFrom=function(n){var a=n.clone();return a.red=null,a},i.mont=function(n){return new Xt(n)};function Xt(m){G.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Xt,G),Xt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Xt.prototype.convertFrom=function(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},Xt.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(a),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),g=d;return d.cmp(this.m)>=0?g=d.isub(this.m):d.cmpn(0)<0&&(g=d.iadd(this.m)),g._forceRed(this)},Xt.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new i(0)._forceRed(this);var h=n.mul(a),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),g=d;return d.cmp(this.m)>=0?g=d.isub(this.m):d.cmpn(0)<0&&(g=d.iadd(this.m)),g._forceRed(this)},Xt.prototype.invm=function(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})(c,Be)})(di);var da=di.exports;const $i=us(da);var ce={},pi={exports:{}};pi.exports;(function(c){(function(t,e){function r(m,n){if(!m)throw new Error(n||"Assertion failed")}function o(m,n){m.super_=n;var a=function(){};a.prototype=n.prototype,m.prototype=new a,m.prototype.constructor=m}function i(m,n,a){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((n==="le"||n==="be")&&(a=n,n=10),this._init(m||0,n||10,a||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=oi.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,a){return n.cmp(a)>0?n:a},i.min=function(n,a){return n.cmp(a)<0?n:a},i.prototype._init=function(n,a,h){if(typeof n=="number")return this._initNumber(n,a,h);if(typeof n=="object")return this._initArray(n,a,h);a==="hex"&&(a=16),r(a===(a|0)&&a>=2&&a<=36),n=n.toString().replace(/\s+/g,"");var p=0;n[0]==="-"&&(p++,this.negative=1),p<n.length&&(a===16?this._parseHex(n,p,h):(this._parseBase(n,a,p),h==="le"&&this._initArray(this.toArray(),a,h)))},i.prototype._initNumber=function(n,a,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),a,h)},i.prototype._initArray=function(n,a,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d,g,y=0;if(h==="be")for(p=n.length-1,d=0;p>=0;p-=3)g=n[p]|n[p-1]<<8|n[p-2]<<16,this.words[d]|=g<<y&67108863,this.words[d+1]=g>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(h==="le")for(p=0,d=0;p<n.length;p+=3)g=n[p]|n[p+1]<<8|n[p+2]<<16,this.words[d]|=g<<y&67108863,this.words[d+1]=g>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this._strip()};function w(m,n){var a=m.charCodeAt(n);if(a>=48&&a<=57)return a-48;if(a>=65&&a<=70)return a-55;if(a>=97&&a<=102)return a-87;r(!1,"Invalid character in "+m)}function b(m,n,a){var h=w(m,a);return a-1>=n&&(h|=w(m,a-1)<<4),h}i.prototype._parseHex=function(n,a,h){this.length=Math.ceil((n.length-a)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d=0,g=0,y;if(h==="be")for(p=n.length-1;p>=a;p-=2)y=b(n,a,p)<<d,this.words[g]|=y&67108863,d>=18?(d-=18,g+=1,this.words[g]|=y>>>26):d+=8;else{var l=n.length-a;for(p=l%2===0?a+1:a;p<n.length;p+=2)y=b(n,a,p)<<d,this.words[g]|=y&67108863,d>=18?(d-=18,g+=1,this.words[g]|=y>>>26):d+=8}this._strip()};function k(m,n,a,h){for(var p=0,d=0,g=Math.min(m.length,a),y=n;y<g;y++){var l=m.charCodeAt(y)-48;p*=h,l>=49?d=l-49+10:l>=17?d=l-17+10:d=l,r(l>=0&&d<h,"Invalid character"),p+=d}return p}i.prototype._parseBase=function(n,a,h){this.words=[0],this.length=1;for(var p=0,d=1;d<=67108863;d*=a)p++;p--,d=d/a|0;for(var g=n.length-h,y=g%p,l=Math.min(g,g-y)+h,s=0,f=h;f<l;f+=p)s=k(n,f,f+p,a),this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(y!==0){var x=1;for(s=k(n,f,n.length,a),f=0;f<y;f++)x*=a;this.imuln(x),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red};function v(m,n){m.words=n.words,m.length=n.length,m.negative=n.negative,m.red=n.red}if(i.prototype._move=function(n){v(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,a){n=n||10,a=a|0||1;var h;if(n===16||n==="hex"){h="";for(var p=0,d=0,g=0;g<this.length;g++){var y=this.words[g],l=((y<<p|d)&16777215).toString(16);d=y>>>24-p&16777215,p+=2,p>=26&&(p-=26,g--),d!==0||g!==this.length-1?h=T[6-l.length]+l+h:h=l+h}for(d!==0&&(h=d.toString(16)+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var s=E[n],f=B[n];h="";var x=this.clone();for(x.negative=0;!x.isZero();){var _=x.modrn(f).toString(n);x=x.idivn(f),x.isZero()?h=_+h:h=T[s-_.length]+_+h}for(this.isZero()&&(h="0"+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,a){return this.toArrayLike(u,n,a)}),i.prototype.toArray=function(n,a){return this.toArrayLike(Array,n,a)};var R=function(n,a){return n.allocUnsafe?n.allocUnsafe(a):new n(a)};i.prototype.toArrayLike=function(n,a,h){this._strip();var p=this.byteLength(),d=h||Math.max(1,p);r(p<=d,"byte array longer than desired length"),r(d>0,"Requested array length <= 0");var g=R(n,d),y=a==="le"?"LE":"BE";return this["_toArrayLike"+y](g,p),g},i.prototype._toArrayLikeLE=function(n,a){for(var h=0,p=0,d=0,g=0;d<this.length;d++){var y=this.words[d]<<g|p;n[h++]=y&255,h<n.length&&(n[h++]=y>>8&255),h<n.length&&(n[h++]=y>>16&255),g===6?(h<n.length&&(n[h++]=y>>24&255),p=0,g=0):(p=y>>>24,g+=2)}if(h<n.length)for(n[h++]=p;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,a){for(var h=n.length-1,p=0,d=0,g=0;d<this.length;d++){var y=this.words[d]<<g|p;n[h--]=y&255,h>=0&&(n[h--]=y>>8&255),h>=0&&(n[h--]=y>>16&255),g===6?(h>=0&&(n[h--]=y>>24&255),p=0,g=0):(p=y>>>24,g+=2)}if(h>=0)for(n[h--]=p;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var a=n,h=0;return a>=4096&&(h+=13,a>>>=13),a>=64&&(h+=7,a>>>=7),a>=8&&(h+=4,a>>>=4),a>=2&&(h+=2,a>>>=2),h+a},i.prototype._zeroBits=function(n){if(n===0)return 26;var a=n,h=0;return a&8191||(h+=13,a>>>=13),a&127||(h+=7,a>>>=7),a&15||(h+=4,a>>>=4),a&3||(h+=2,a>>>=2),a&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],a=this._countBits(n);return(this.length-1)*26+a};function L(m){for(var n=new Array(m.bitLength()),a=0;a<n.length;a++){var h=a/26|0,p=a%26;n[a]=m.words[h]>>>p&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,a=0;a<this.length;a++){var h=this._zeroBits(this.words[a]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]|n.words[a];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var a;this.length>n.length?a=n:a=this;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=a.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var a,h;this.length>n.length?(a=this,h=n):(a=n,h=this);for(var p=0;p<h.length;p++)this.words[p]=a.words[p]^h.words[p];if(this!==a)for(;p<a.length;p++)this.words[p]=a.words[p];return this.length=a.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var a=Math.ceil(n/26)|0,h=n%26;this._expand(a),h>0&&a--;for(var p=0;p<a;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,a){r(typeof n=="number"&&n>=0);var h=n/26|0,p=n%26;return this._expand(h+1),a?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this._strip()},i.prototype.iadd=function(n){var a;if(this.negative!==0&&n.negative===0)return this.negative=0,a=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,a=this.isub(n),n.negative=1,a._normSign();var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var d=0,g=0;g<p.length;g++)a=(h.words[g]|0)+(p.words[g]|0)+d,this.words[g]=a&67108863,d=a>>>26;for(;d!==0&&g<h.length;g++)a=(h.words[g]|0)+d,this.words[g]=a&67108863,d=a>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;g<h.length;g++)this.words[g]=h.words[g];return this},i.prototype.add=function(n){var a;return n.negative!==0&&this.negative===0?(n.negative=0,a=this.sub(n),n.negative^=1,a):n.negative===0&&this.negative!==0?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var a=this.iadd(n);return n.negative=1,a._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,d;h>0?(p=this,d=n):(p=n,d=this);for(var g=0,y=0;y<d.length;y++)a=(p.words[y]|0)-(d.words[y]|0)+g,g=a>>26,this.words[y]=a&67108863;for(;g!==0&&y<p.length;y++)a=(p.words[y]|0)+g,g=a>>26,this.words[y]=a&67108863;if(g===0&&y<p.length&&p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=Math.max(this.length,y),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function W(m,n,a){a.negative=n.negative^m.negative;var h=m.length+n.length|0;a.length=h,h=h-1|0;var p=m.words[0]|0,d=n.words[0]|0,g=p*d,y=g&67108863,l=g/67108864|0;a.words[0]=y;for(var s=1;s<h;s++){for(var f=l>>>26,x=l&67108863,_=Math.min(s,n.length-1),I=Math.max(0,s-m.length+1);I<=_;I++){var V=s-I|0;p=m.words[V]|0,d=n.words[I]|0,g=p*d+x,f+=g/67108864|0,x=g&67108863}a.words[s]=x|0,l=f|0}return l!==0?a.words[s]=l|0:a.length--,a._strip()}var dt=function(n,a,h){var p=n.words,d=a.words,g=h.words,y=0,l,s,f,x=p[0]|0,_=x&8191,I=x>>>13,V=p[1]|0,U=V&8191,D=V>>>13,fe=p[2]|0,$=fe&8191,Y=fe>>>13,we=p[3]|0,J=we&8191,X=we>>>13,Ze=p[4]|0,rt=Ze&8191,at=Ze>>>13,sr=p[5]|0,ct=sr&8191,ut=sr>>>13,Ye=p[6]|0,nt=Ye&8191,tt=Ye>>>13,je=p[7]|0,it=je&8191,st=je>>>13,Je=p[8]|0,ot=Je&8191,ht=Je>>>13,or=p[9]|0,lt=or&8191,ft=or>>>13,Gr=d[0]|0,pt=Gr&8191,gt=Gr>>>13,Zr=d[1]|0,mt=Zr&8191,yt=Zr>>>13,Yr=d[2]|0,wt=Yr&8191,bt=Yr>>>13,jr=d[3]|0,vt=jr&8191,kt=jr>>>13,Jr=d[4]|0,St=Jr&8191,Mt=Jr>>>13,Xr=d[5]|0,xt=Xr&8191,_t=Xr>>>13,Qr=d[6]|0,It=Qr&8191,At=Qr>>>13,tn=d[7]|0,Et=tn&8191,Rt=tn>>>13,en=d[8]|0,Bt=en&8191,Pt=en>>>13,rn=d[9]|0,Tt=rn&8191,Lt=rn>>>13;h.negative=n.negative^a.negative,h.length=19,l=Math.imul(_,pt),s=Math.imul(_,gt),s=s+Math.imul(I,pt)|0,f=Math.imul(I,gt);var ar=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,l=Math.imul(U,pt),s=Math.imul(U,gt),s=s+Math.imul(D,pt)|0,f=Math.imul(D,gt),l=l+Math.imul(_,mt)|0,s=s+Math.imul(_,yt)|0,s=s+Math.imul(I,mt)|0,f=f+Math.imul(I,yt)|0;var cr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,l=Math.imul($,pt),s=Math.imul($,gt),s=s+Math.imul(Y,pt)|0,f=Math.imul(Y,gt),l=l+Math.imul(U,mt)|0,s=s+Math.imul(U,yt)|0,s=s+Math.imul(D,mt)|0,f=f+Math.imul(D,yt)|0,l=l+Math.imul(_,wt)|0,s=s+Math.imul(_,bt)|0,s=s+Math.imul(I,wt)|0,f=f+Math.imul(I,bt)|0;var ur=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,l=Math.imul(J,pt),s=Math.imul(J,gt),s=s+Math.imul(X,pt)|0,f=Math.imul(X,gt),l=l+Math.imul($,mt)|0,s=s+Math.imul($,yt)|0,s=s+Math.imul(Y,mt)|0,f=f+Math.imul(Y,yt)|0,l=l+Math.imul(U,wt)|0,s=s+Math.imul(U,bt)|0,s=s+Math.imul(D,wt)|0,f=f+Math.imul(D,bt)|0,l=l+Math.imul(_,vt)|0,s=s+Math.imul(_,kt)|0,s=s+Math.imul(I,vt)|0,f=f+Math.imul(I,kt)|0;var hr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,l=Math.imul(rt,pt),s=Math.imul(rt,gt),s=s+Math.imul(at,pt)|0,f=Math.imul(at,gt),l=l+Math.imul(J,mt)|0,s=s+Math.imul(J,yt)|0,s=s+Math.imul(X,mt)|0,f=f+Math.imul(X,yt)|0,l=l+Math.imul($,wt)|0,s=s+Math.imul($,bt)|0,s=s+Math.imul(Y,wt)|0,f=f+Math.imul(Y,bt)|0,l=l+Math.imul(U,vt)|0,s=s+Math.imul(U,kt)|0,s=s+Math.imul(D,vt)|0,f=f+Math.imul(D,kt)|0,l=l+Math.imul(_,St)|0,s=s+Math.imul(_,Mt)|0,s=s+Math.imul(I,St)|0,f=f+Math.imul(I,Mt)|0;var lr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,l=Math.imul(ct,pt),s=Math.imul(ct,gt),s=s+Math.imul(ut,pt)|0,f=Math.imul(ut,gt),l=l+Math.imul(rt,mt)|0,s=s+Math.imul(rt,yt)|0,s=s+Math.imul(at,mt)|0,f=f+Math.imul(at,yt)|0,l=l+Math.imul(J,wt)|0,s=s+Math.imul(J,bt)|0,s=s+Math.imul(X,wt)|0,f=f+Math.imul(X,bt)|0,l=l+Math.imul($,vt)|0,s=s+Math.imul($,kt)|0,s=s+Math.imul(Y,vt)|0,f=f+Math.imul(Y,kt)|0,l=l+Math.imul(U,St)|0,s=s+Math.imul(U,Mt)|0,s=s+Math.imul(D,St)|0,f=f+Math.imul(D,Mt)|0,l=l+Math.imul(_,xt)|0,s=s+Math.imul(_,_t)|0,s=s+Math.imul(I,xt)|0,f=f+Math.imul(I,_t)|0;var fr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,l=Math.imul(nt,pt),s=Math.imul(nt,gt),s=s+Math.imul(tt,pt)|0,f=Math.imul(tt,gt),l=l+Math.imul(ct,mt)|0,s=s+Math.imul(ct,yt)|0,s=s+Math.imul(ut,mt)|0,f=f+Math.imul(ut,yt)|0,l=l+Math.imul(rt,wt)|0,s=s+Math.imul(rt,bt)|0,s=s+Math.imul(at,wt)|0,f=f+Math.imul(at,bt)|0,l=l+Math.imul(J,vt)|0,s=s+Math.imul(J,kt)|0,s=s+Math.imul(X,vt)|0,f=f+Math.imul(X,kt)|0,l=l+Math.imul($,St)|0,s=s+Math.imul($,Mt)|0,s=s+Math.imul(Y,St)|0,f=f+Math.imul(Y,Mt)|0,l=l+Math.imul(U,xt)|0,s=s+Math.imul(U,_t)|0,s=s+Math.imul(D,xt)|0,f=f+Math.imul(D,_t)|0,l=l+Math.imul(_,It)|0,s=s+Math.imul(_,At)|0,s=s+Math.imul(I,It)|0,f=f+Math.imul(I,At)|0;var dr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,l=Math.imul(it,pt),s=Math.imul(it,gt),s=s+Math.imul(st,pt)|0,f=Math.imul(st,gt),l=l+Math.imul(nt,mt)|0,s=s+Math.imul(nt,yt)|0,s=s+Math.imul(tt,mt)|0,f=f+Math.imul(tt,yt)|0,l=l+Math.imul(ct,wt)|0,s=s+Math.imul(ct,bt)|0,s=s+Math.imul(ut,wt)|0,f=f+Math.imul(ut,bt)|0,l=l+Math.imul(rt,vt)|0,s=s+Math.imul(rt,kt)|0,s=s+Math.imul(at,vt)|0,f=f+Math.imul(at,kt)|0,l=l+Math.imul(J,St)|0,s=s+Math.imul(J,Mt)|0,s=s+Math.imul(X,St)|0,f=f+Math.imul(X,Mt)|0,l=l+Math.imul($,xt)|0,s=s+Math.imul($,_t)|0,s=s+Math.imul(Y,xt)|0,f=f+Math.imul(Y,_t)|0,l=l+Math.imul(U,It)|0,s=s+Math.imul(U,At)|0,s=s+Math.imul(D,It)|0,f=f+Math.imul(D,At)|0,l=l+Math.imul(_,Et)|0,s=s+Math.imul(_,Rt)|0,s=s+Math.imul(I,Et)|0,f=f+Math.imul(I,Rt)|0;var pr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(pr>>>26)|0,pr&=67108863,l=Math.imul(ot,pt),s=Math.imul(ot,gt),s=s+Math.imul(ht,pt)|0,f=Math.imul(ht,gt),l=l+Math.imul(it,mt)|0,s=s+Math.imul(it,yt)|0,s=s+Math.imul(st,mt)|0,f=f+Math.imul(st,yt)|0,l=l+Math.imul(nt,wt)|0,s=s+Math.imul(nt,bt)|0,s=s+Math.imul(tt,wt)|0,f=f+Math.imul(tt,bt)|0,l=l+Math.imul(ct,vt)|0,s=s+Math.imul(ct,kt)|0,s=s+Math.imul(ut,vt)|0,f=f+Math.imul(ut,kt)|0,l=l+Math.imul(rt,St)|0,s=s+Math.imul(rt,Mt)|0,s=s+Math.imul(at,St)|0,f=f+Math.imul(at,Mt)|0,l=l+Math.imul(J,xt)|0,s=s+Math.imul(J,_t)|0,s=s+Math.imul(X,xt)|0,f=f+Math.imul(X,_t)|0,l=l+Math.imul($,It)|0,s=s+Math.imul($,At)|0,s=s+Math.imul(Y,It)|0,f=f+Math.imul(Y,At)|0,l=l+Math.imul(U,Et)|0,s=s+Math.imul(U,Rt)|0,s=s+Math.imul(D,Et)|0,f=f+Math.imul(D,Rt)|0,l=l+Math.imul(_,Bt)|0,s=s+Math.imul(_,Pt)|0,s=s+Math.imul(I,Bt)|0,f=f+Math.imul(I,Pt)|0;var gr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(gr>>>26)|0,gr&=67108863,l=Math.imul(lt,pt),s=Math.imul(lt,gt),s=s+Math.imul(ft,pt)|0,f=Math.imul(ft,gt),l=l+Math.imul(ot,mt)|0,s=s+Math.imul(ot,yt)|0,s=s+Math.imul(ht,mt)|0,f=f+Math.imul(ht,yt)|0,l=l+Math.imul(it,wt)|0,s=s+Math.imul(it,bt)|0,s=s+Math.imul(st,wt)|0,f=f+Math.imul(st,bt)|0,l=l+Math.imul(nt,vt)|0,s=s+Math.imul(nt,kt)|0,s=s+Math.imul(tt,vt)|0,f=f+Math.imul(tt,kt)|0,l=l+Math.imul(ct,St)|0,s=s+Math.imul(ct,Mt)|0,s=s+Math.imul(ut,St)|0,f=f+Math.imul(ut,Mt)|0,l=l+Math.imul(rt,xt)|0,s=s+Math.imul(rt,_t)|0,s=s+Math.imul(at,xt)|0,f=f+Math.imul(at,_t)|0,l=l+Math.imul(J,It)|0,s=s+Math.imul(J,At)|0,s=s+Math.imul(X,It)|0,f=f+Math.imul(X,At)|0,l=l+Math.imul($,Et)|0,s=s+Math.imul($,Rt)|0,s=s+Math.imul(Y,Et)|0,f=f+Math.imul(Y,Rt)|0,l=l+Math.imul(U,Bt)|0,s=s+Math.imul(U,Pt)|0,s=s+Math.imul(D,Bt)|0,f=f+Math.imul(D,Pt)|0,l=l+Math.imul(_,Tt)|0,s=s+Math.imul(_,Lt)|0,s=s+Math.imul(I,Tt)|0,f=f+Math.imul(I,Lt)|0;var mr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(mr>>>26)|0,mr&=67108863,l=Math.imul(lt,mt),s=Math.imul(lt,yt),s=s+Math.imul(ft,mt)|0,f=Math.imul(ft,yt),l=l+Math.imul(ot,wt)|0,s=s+Math.imul(ot,bt)|0,s=s+Math.imul(ht,wt)|0,f=f+Math.imul(ht,bt)|0,l=l+Math.imul(it,vt)|0,s=s+Math.imul(it,kt)|0,s=s+Math.imul(st,vt)|0,f=f+Math.imul(st,kt)|0,l=l+Math.imul(nt,St)|0,s=s+Math.imul(nt,Mt)|0,s=s+Math.imul(tt,St)|0,f=f+Math.imul(tt,Mt)|0,l=l+Math.imul(ct,xt)|0,s=s+Math.imul(ct,_t)|0,s=s+Math.imul(ut,xt)|0,f=f+Math.imul(ut,_t)|0,l=l+Math.imul(rt,It)|0,s=s+Math.imul(rt,At)|0,s=s+Math.imul(at,It)|0,f=f+Math.imul(at,At)|0,l=l+Math.imul(J,Et)|0,s=s+Math.imul(J,Rt)|0,s=s+Math.imul(X,Et)|0,f=f+Math.imul(X,Rt)|0,l=l+Math.imul($,Bt)|0,s=s+Math.imul($,Pt)|0,s=s+Math.imul(Y,Bt)|0,f=f+Math.imul(Y,Pt)|0,l=l+Math.imul(U,Tt)|0,s=s+Math.imul(U,Lt)|0,s=s+Math.imul(D,Tt)|0,f=f+Math.imul(D,Lt)|0;var yr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(yr>>>26)|0,yr&=67108863,l=Math.imul(lt,wt),s=Math.imul(lt,bt),s=s+Math.imul(ft,wt)|0,f=Math.imul(ft,bt),l=l+Math.imul(ot,vt)|0,s=s+Math.imul(ot,kt)|0,s=s+Math.imul(ht,vt)|0,f=f+Math.imul(ht,kt)|0,l=l+Math.imul(it,St)|0,s=s+Math.imul(it,Mt)|0,s=s+Math.imul(st,St)|0,f=f+Math.imul(st,Mt)|0,l=l+Math.imul(nt,xt)|0,s=s+Math.imul(nt,_t)|0,s=s+Math.imul(tt,xt)|0,f=f+Math.imul(tt,_t)|0,l=l+Math.imul(ct,It)|0,s=s+Math.imul(ct,At)|0,s=s+Math.imul(ut,It)|0,f=f+Math.imul(ut,At)|0,l=l+Math.imul(rt,Et)|0,s=s+Math.imul(rt,Rt)|0,s=s+Math.imul(at,Et)|0,f=f+Math.imul(at,Rt)|0,l=l+Math.imul(J,Bt)|0,s=s+Math.imul(J,Pt)|0,s=s+Math.imul(X,Bt)|0,f=f+Math.imul(X,Pt)|0,l=l+Math.imul($,Tt)|0,s=s+Math.imul($,Lt)|0,s=s+Math.imul(Y,Tt)|0,f=f+Math.imul(Y,Lt)|0;var wr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(wr>>>26)|0,wr&=67108863,l=Math.imul(lt,vt),s=Math.imul(lt,kt),s=s+Math.imul(ft,vt)|0,f=Math.imul(ft,kt),l=l+Math.imul(ot,St)|0,s=s+Math.imul(ot,Mt)|0,s=s+Math.imul(ht,St)|0,f=f+Math.imul(ht,Mt)|0,l=l+Math.imul(it,xt)|0,s=s+Math.imul(it,_t)|0,s=s+Math.imul(st,xt)|0,f=f+Math.imul(st,_t)|0,l=l+Math.imul(nt,It)|0,s=s+Math.imul(nt,At)|0,s=s+Math.imul(tt,It)|0,f=f+Math.imul(tt,At)|0,l=l+Math.imul(ct,Et)|0,s=s+Math.imul(ct,Rt)|0,s=s+Math.imul(ut,Et)|0,f=f+Math.imul(ut,Rt)|0,l=l+Math.imul(rt,Bt)|0,s=s+Math.imul(rt,Pt)|0,s=s+Math.imul(at,Bt)|0,f=f+Math.imul(at,Pt)|0,l=l+Math.imul(J,Tt)|0,s=s+Math.imul(J,Lt)|0,s=s+Math.imul(X,Tt)|0,f=f+Math.imul(X,Lt)|0;var br=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(br>>>26)|0,br&=67108863,l=Math.imul(lt,St),s=Math.imul(lt,Mt),s=s+Math.imul(ft,St)|0,f=Math.imul(ft,Mt),l=l+Math.imul(ot,xt)|0,s=s+Math.imul(ot,_t)|0,s=s+Math.imul(ht,xt)|0,f=f+Math.imul(ht,_t)|0,l=l+Math.imul(it,It)|0,s=s+Math.imul(it,At)|0,s=s+Math.imul(st,It)|0,f=f+Math.imul(st,At)|0,l=l+Math.imul(nt,Et)|0,s=s+Math.imul(nt,Rt)|0,s=s+Math.imul(tt,Et)|0,f=f+Math.imul(tt,Rt)|0,l=l+Math.imul(ct,Bt)|0,s=s+Math.imul(ct,Pt)|0,s=s+Math.imul(ut,Bt)|0,f=f+Math.imul(ut,Pt)|0,l=l+Math.imul(rt,Tt)|0,s=s+Math.imul(rt,Lt)|0,s=s+Math.imul(at,Tt)|0,f=f+Math.imul(at,Lt)|0;var vr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(vr>>>26)|0,vr&=67108863,l=Math.imul(lt,xt),s=Math.imul(lt,_t),s=s+Math.imul(ft,xt)|0,f=Math.imul(ft,_t),l=l+Math.imul(ot,It)|0,s=s+Math.imul(ot,At)|0,s=s+Math.imul(ht,It)|0,f=f+Math.imul(ht,At)|0,l=l+Math.imul(it,Et)|0,s=s+Math.imul(it,Rt)|0,s=s+Math.imul(st,Et)|0,f=f+Math.imul(st,Rt)|0,l=l+Math.imul(nt,Bt)|0,s=s+Math.imul(nt,Pt)|0,s=s+Math.imul(tt,Bt)|0,f=f+Math.imul(tt,Pt)|0,l=l+Math.imul(ct,Tt)|0,s=s+Math.imul(ct,Lt)|0,s=s+Math.imul(ut,Tt)|0,f=f+Math.imul(ut,Lt)|0;var kr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(kr>>>26)|0,kr&=67108863,l=Math.imul(lt,It),s=Math.imul(lt,At),s=s+Math.imul(ft,It)|0,f=Math.imul(ft,At),l=l+Math.imul(ot,Et)|0,s=s+Math.imul(ot,Rt)|0,s=s+Math.imul(ht,Et)|0,f=f+Math.imul(ht,Rt)|0,l=l+Math.imul(it,Bt)|0,s=s+Math.imul(it,Pt)|0,s=s+Math.imul(st,Bt)|0,f=f+Math.imul(st,Pt)|0,l=l+Math.imul(nt,Tt)|0,s=s+Math.imul(nt,Lt)|0,s=s+Math.imul(tt,Tt)|0,f=f+Math.imul(tt,Lt)|0;var Sr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,l=Math.imul(lt,Et),s=Math.imul(lt,Rt),s=s+Math.imul(ft,Et)|0,f=Math.imul(ft,Rt),l=l+Math.imul(ot,Bt)|0,s=s+Math.imul(ot,Pt)|0,s=s+Math.imul(ht,Bt)|0,f=f+Math.imul(ht,Pt)|0,l=l+Math.imul(it,Tt)|0,s=s+Math.imul(it,Lt)|0,s=s+Math.imul(st,Tt)|0,f=f+Math.imul(st,Lt)|0;var Mr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,l=Math.imul(lt,Bt),s=Math.imul(lt,Pt),s=s+Math.imul(ft,Bt)|0,f=Math.imul(ft,Pt),l=l+Math.imul(ot,Tt)|0,s=s+Math.imul(ot,Lt)|0,s=s+Math.imul(ht,Tt)|0,f=f+Math.imul(ht,Lt)|0;var xr=(y+l|0)+((s&8191)<<13)|0;y=(f+(s>>>13)|0)+(xr>>>26)|0,xr&=67108863,l=Math.imul(lt,Tt),s=Math.imul(lt,Lt),s=s+Math.imul(ft,Tt)|0,f=Math.imul(ft,Lt);var _r=(y+l|0)+((s&8191)<<13)|0;return y=(f+(s>>>13)|0)+(_r>>>26)|0,_r&=67108863,g[0]=ar,g[1]=cr,g[2]=ur,g[3]=hr,g[4]=lr,g[5]=fr,g[6]=dr,g[7]=pr,g[8]=gr,g[9]=mr,g[10]=yr,g[11]=wr,g[12]=br,g[13]=vr,g[14]=kr,g[15]=Sr,g[16]=Mr,g[17]=xr,g[18]=_r,y!==0&&(g[19]=y,h.length++),h};Math.imul||(dt=W);function Q(m,n,a){a.negative=n.negative^m.negative,a.length=m.length+n.length;for(var h=0,p=0,d=0;d<a.length-1;d++){var g=p;p=0;for(var y=h&67108863,l=Math.min(d,n.length-1),s=Math.max(0,d-m.length+1);s<=l;s++){var f=d-s,x=m.words[f]|0,_=n.words[s]|0,I=x*_,V=I&67108863;g=g+(I/67108864|0)|0,V=V+y|0,y=V&67108863,g=g+(V>>>26)|0,p+=g>>>26,g&=67108863}a.words[d]=y,h=g,g=p}return h!==0?a.words[d]=h:a.length--,a._strip()}function Dt(m,n,a){return Q(m,n,a)}i.prototype.mulTo=function(n,a){var h,p=this.length+n.length;return this.length===10&&n.length===10?h=dt(this,n,a):p<63?h=W(this,n,a):p<1024?h=Q(this,n,a):h=Dt(this,n,a),h},i.prototype.mul=function(n){var a=new i(null);return a.words=new Array(this.length+n.length),this.mulTo(n,a)},i.prototype.mulf=function(n){var a=new i(null);return a.words=new Array(this.length+n.length),Dt(this,n,a)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var a=n<0;a&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,p=0;p<this.length;p++){var d=(this.words[p]|0)*n,g=(d&67108863)+(h&67108863);h>>=26,h+=d/67108864|0,h+=g>>>26,this.words[p]=g&67108863}return h!==0&&(this.words[p]=h,this.length++),a?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var a=L(n);if(a.length===0)return new i(1);for(var h=this,p=0;p<a.length&&a[p]===0;p++,h=h.sqr());if(++p<a.length)for(var d=h.sqr();p<a.length;p++,d=d.sqr())a[p]!==0&&(h=h.mul(d));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26,p=67108863>>>26-a<<26-a,d;if(a!==0){var g=0;for(d=0;d<this.length;d++){var y=this.words[d]&p,l=(this.words[d]|0)-y<<a;this.words[d]=l|g,g=y>>>26-a}g&&(this.words[d]=g,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,a,h){r(typeof n=="number"&&n>=0);var p;a?p=(a-a%26)/26:p=0;var d=n%26,g=Math.min((n-d)/26,this.length),y=67108863^67108863>>>d<<d,l=h;if(p-=g,p=Math.max(0,p),l){for(var s=0;s<g;s++)l.words[s]=this.words[s];l.length=g}if(g!==0)if(this.length>g)for(this.length-=g,s=0;s<this.length;s++)this.words[s]=this.words[s+g];else this.words[0]=0,this.length=1;var f=0;for(s=this.length-1;s>=0&&(f!==0||s>=p);s--){var x=this.words[s]|0;this.words[s]=f<<26-d|x>>>d,f=x&y}return l&&f!==0&&(l.words[l.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,a,h){return r(this.negative===0),this.iushrn(n,a,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26,p=1<<a;if(this.length<=h)return!1;var d=this.words[h];return!!(d&p)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var a=n%26,h=(n-a)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(a!==0&&h++,this.length=Math.min(h,this.length),a!==0){var p=67108863^67108863>>>a<<a;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,a,h){var p=n.length+h,d;this._expand(p);var g,y=0;for(d=0;d<n.length;d++){g=(this.words[d+h]|0)+y;var l=(n.words[d]|0)*a;g-=l&67108863,y=(g>>26)-(l/67108864|0),this.words[d+h]=g&67108863}for(;d<this.length-h;d++)g=(this.words[d+h]|0)+y,y=g>>26,this.words[d+h]=g&67108863;if(y===0)return this._strip();for(r(y===-1),y=0,d=0;d<this.length;d++)g=-(this.words[d]|0)+y,y=g>>26,this.words[d]=g&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,a){var h=this.length-n.length,p=this.clone(),d=n,g=d.words[d.length-1]|0,y=this._countBits(g);h=26-y,h!==0&&(d=d.ushln(h),p.iushln(h),g=d.words[d.length-1]|0);var l=p.length-d.length,s;if(a!=="mod"){s=new i(null),s.length=l+1,s.words=new Array(s.length);for(var f=0;f<s.length;f++)s.words[f]=0}var x=p.clone()._ishlnsubmul(d,1,l);x.negative===0&&(p=x,s&&(s.words[l]=1));for(var _=l-1;_>=0;_--){var I=(p.words[d.length+_]|0)*67108864+(p.words[d.length+_-1]|0);for(I=Math.min(I/g|0,67108863),p._ishlnsubmul(d,I,_);p.negative!==0;)I--,p.negative=0,p._ishlnsubmul(d,1,_),p.isZero()||(p.negative^=1);s&&(s.words[_]=I)}return s&&s._strip(),p._strip(),a!=="div"&&h!==0&&p.iushrn(h),{div:s||null,mod:p}},i.prototype.divmod=function(n,a,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,d,g;return this.negative!==0&&n.negative===0?(g=this.neg().divmod(n,a),a!=="mod"&&(p=g.div.neg()),a!=="div"&&(d=g.mod.neg(),h&&d.negative!==0&&d.iadd(n)),{div:p,mod:d}):this.negative===0&&n.negative!==0?(g=this.divmod(n.neg(),a),a!=="mod"&&(p=g.div.neg()),{div:p,mod:g.mod}):this.negative&n.negative?(g=this.neg().divmod(n.neg(),a),a!=="div"&&(d=g.mod.neg(),h&&d.negative!==0&&d.isub(n)),{div:g.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?a==="div"?{div:this.divn(n.words[0]),mod:null}:a==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,a)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var h=a.div.negative!==0?a.mod.isub(n):a.mod,p=n.ushrn(1),d=n.andln(1),g=h.cmp(p);return g<0||d===1&&g===0?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)},i.prototype.modrn=function(n){var a=n<0;a&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,p=0,d=this.length-1;d>=0;d--)p=(h*p+(this.words[d]|0))%n;return a?-p:p},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var a=n<0;a&&(n=-n),r(n<=67108863);for(var h=0,p=this.length-1;p>=0;p--){var d=(this.words[p]|0)+h*67108864;this.words[p]=d/n|0,h=d%n}return this._strip(),a?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var a=this,h=n.clone();a.negative!==0?a=a.umod(n):a=a.clone();for(var p=new i(1),d=new i(0),g=new i(0),y=new i(1),l=0;a.isEven()&&h.isEven();)a.iushrn(1),h.iushrn(1),++l;for(var s=h.clone(),f=a.clone();!a.isZero();){for(var x=0,_=1;!(a.words[0]&_)&&x<26;++x,_<<=1);if(x>0)for(a.iushrn(x);x-- >0;)(p.isOdd()||d.isOdd())&&(p.iadd(s),d.isub(f)),p.iushrn(1),d.iushrn(1);for(var I=0,V=1;!(h.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(h.iushrn(I);I-- >0;)(g.isOdd()||y.isOdd())&&(g.iadd(s),y.isub(f)),g.iushrn(1),y.iushrn(1);a.cmp(h)>=0?(a.isub(h),p.isub(g),d.isub(y)):(h.isub(a),g.isub(p),y.isub(d))}return{a:g,b:y,gcd:h.iushln(l)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var a=this,h=n.clone();a.negative!==0?a=a.umod(n):a=a.clone();for(var p=new i(1),d=new i(0),g=h.clone();a.cmpn(1)>0&&h.cmpn(1)>0;){for(var y=0,l=1;!(a.words[0]&l)&&y<26;++y,l<<=1);if(y>0)for(a.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(g),p.iushrn(1);for(var s=0,f=1;!(h.words[0]&f)&&s<26;++s,f<<=1);if(s>0)for(h.iushrn(s);s-- >0;)d.isOdd()&&d.iadd(g),d.iushrn(1);a.cmp(h)>=0?(a.isub(h),p.isub(d)):(h.isub(a),d.isub(p))}var x;return a.cmpn(1)===0?x=p:x=d,x.cmpn(0)<0&&x.iadd(n),x},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var a=this.clone(),h=n.clone();a.negative=0,h.negative=0;for(var p=0;a.isEven()&&h.isEven();p++)a.iushrn(1),h.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=a.cmp(h);if(d<0){var g=a;a=h,h=g}else if(d===0||h.cmpn(1)===0)break;a.isub(h)}while(!0);return h.iushln(p)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var a=n%26,h=(n-a)/26,p=1<<a;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var d=p,g=h;d!==0&&g<this.length;g++){var y=this.words[g]|0;y+=d,d=y>>>26,y&=67108863,this.words[g]=y}return d!==0&&(this.words[g]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var a=n<0;if(this.negative!==0&&!a)return-1;if(this.negative===0&&a)return 1;this._strip();var h;if(this.length>1)h=1;else{a&&(n=-n),r(n<=67108863,"Number is too big");var p=this.words[0]|0;h=p===n?0:p<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var a=this.ucmp(n);return this.negative!==0?-a|0:a},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var a=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,d=n.words[h]|0;if(p!==d){p<d?a=-1:p>d&&(a=1);break}}return a},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new G(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var et={k256:null,p224:null,p192:null,p25519:null};function zt(m,n){this.name=m,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}zt.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},zt.prototype.ireduce=function(n){var a=n,h;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),h=a.bitLength();while(h>this.n);var p=h<this.n?-1:a.ucmp(this.p);return p===0?(a.words[0]=0,a.length=1):p>0?a.isub(this.p):a.strip!==void 0?a.strip():a._strip(),a},zt.prototype.split=function(n,a){n.iushrn(this.n,0,a)},zt.prototype.imulK=function(n){return n.imul(this.k)};function le(){zt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(le,zt),le.prototype.split=function(n,a){for(var h=4194303,p=Math.min(n.length,9),d=0;d<p;d++)a.words[d]=n.words[d];if(a.length=p,n.length<=9){n.words[0]=0,n.length=1;return}var g=n.words[9];for(a.words[a.length++]=g&h,d=10;d<n.length;d++){var y=n.words[d]|0;n.words[d-10]=(y&h)<<4|g>>>22,g=y}g>>>=22,n.words[d-10]=g,g===0&&n.length>10?n.length-=10:n.length-=9},le.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,h=0;h<n.length;h++){var p=n.words[h]|0;a+=p*977,n.words[h]=a&67108863,a=p*64+(a/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function ee(){zt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ee,zt);function re(){zt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(re,zt);function ye(){zt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ye,zt),ye.prototype.imulK=function(n){for(var a=0,h=0;h<n.length;h++){var p=(n.words[h]|0)*19+a,d=p&67108863;p>>>=26,n.words[h]=d,a=p}return a!==0&&(n.words[n.length++]=a),n},i._prime=function(n){if(et[n])return et[n];var a;if(n==="k256")a=new le;else if(n==="p224")a=new ee;else if(n==="p192")a=new re;else if(n==="p25519")a=new ye;else throw new Error("Unknown prime "+n);return et[n]=a,a};function G(m){if(typeof m=="string"){var n=i._prime(m);this.m=n.p,this.prime=n}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}G.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},G.prototype._verify2=function(n,a){r((n.negative|a.negative)===0,"red works only with positives"),r(n.red&&n.red===a.red,"red works only with red numbers")},G.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(v(n,n.umod(this.m)._forceRed(this)),n)},G.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},G.prototype.add=function(n,a){this._verify2(n,a);var h=n.add(a);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},G.prototype.iadd=function(n,a){this._verify2(n,a);var h=n.iadd(a);return h.cmp(this.m)>=0&&h.isub(this.m),h},G.prototype.sub=function(n,a){this._verify2(n,a);var h=n.sub(a);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},G.prototype.isub=function(n,a){this._verify2(n,a);var h=n.isub(a);return h.cmpn(0)<0&&h.iadd(this.m),h},G.prototype.shl=function(n,a){return this._verify1(n),this.imod(n.ushln(a))},G.prototype.imul=function(n,a){return this._verify2(n,a),this.imod(n.imul(a))},G.prototype.mul=function(n,a){return this._verify2(n,a),this.imod(n.mul(a))},G.prototype.isqr=function(n){return this.imul(n,n.clone())},G.prototype.sqr=function(n){return this.mul(n,n)},G.prototype.sqrt=function(n){if(n.isZero())return n.clone();var a=this.m.andln(3);if(r(a%2===1),a===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var p=this.m.subn(1),d=0;!p.isZero()&&p.andln(1)===0;)d++,p.iushrn(1);r(!p.isZero());var g=new i(1).toRed(this),y=g.redNeg(),l=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,l).cmp(y)!==0;)s.redIAdd(y);for(var f=this.pow(s,p),x=this.pow(n,p.addn(1).iushrn(1)),_=this.pow(n,p),I=d;_.cmp(g)!==0;){for(var V=_,U=0;V.cmp(g)!==0;U++)V=V.redSqr();r(U<I);var D=this.pow(f,new i(1).iushln(I-U-1));x=x.redMul(D),f=D.redSqr(),_=_.redMul(f),I=U}return x},G.prototype.invm=function(n){var a=n._invmp(this.m);return a.negative!==0?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},G.prototype.pow=function(n,a){if(a.isZero())return new i(1).toRed(this);if(a.cmpn(1)===0)return n.clone();var h=4,p=new Array(1<<h);p[0]=new i(1).toRed(this),p[1]=n;for(var d=2;d<p.length;d++)p[d]=this.mul(p[d-1],n);var g=p[0],y=0,l=0,s=a.bitLength()%26;for(s===0&&(s=26),d=a.length-1;d>=0;d--){for(var f=a.words[d],x=s-1;x>=0;x--){var _=f>>x&1;if(g!==p[0]&&(g=this.sqr(g)),_===0&&y===0){l=0;continue}y<<=1,y|=_,l++,!(l!==h&&(d!==0||x!==0))&&(g=this.mul(g,p[y]),l=0,y=0)}s=26}return g},G.prototype.convertTo=function(n){var a=n.umod(this.m);return a===n?a.clone():a},G.prototype.convertFrom=function(n){var a=n.clone();return a.red=null,a},i.mont=function(n){return new Xt(n)};function Xt(m){G.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Xt,G),Xt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Xt.prototype.convertFrom=function(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},Xt.prototype.imul=function(n,a){if(n.isZero()||a.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(a),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),g=d;return d.cmp(this.m)>=0?g=d.isub(this.m):d.cmpn(0)<0&&(g=d.iadd(this.m)),g._forceRed(this)},Xt.prototype.mul=function(n,a){if(n.isZero()||a.isZero())return new i(0)._forceRed(this);var h=n.mul(a),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),g=d;return d.cmp(this.m)>=0?g=d.isub(this.m):d.cmpn(0)<0&&(g=d.iadd(this.m)),g._forceRed(this)},Xt.prototype.invm=function(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})(c,Be)})(pi);var pa=pi.exports;function Ve(c,t,e){return t<=c&&c<=e}function En(c){if(c===void 0)return{};if(c===Object(c))return c;throw TypeError("Could not convert argument to dictionary")}function ga(c){for(var t=String(c),e=t.length,r=0,o=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)o.push(65533);else{var u=c.charCodeAt(r+1);if(56320<=u&&u<=57343){var w=i&1023,b=u&1023;o.push(65536+(w<<10)+b),r+=1}else o.push(65533)}r+=1}return o}function ma(c){for(var t="",e=0;e<c.length;++e){var r=c[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var vn=-1;function gi(c){this.tokens=[].slice.call(c)}gi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():vn},prepend:function(c){if(Array.isArray(c))for(var t=c;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(c)},push:function(c){if(Array.isArray(c))for(var t=c;t.length;)this.tokens.push(t.shift());else this.tokens.push(c)}};var Ur=-1;function Dn(c,t){if(c)throw TypeError("Decoder error");return t||65533}var kn="utf-8";function Sn(c,t){if(!(this instanceof Sn))return new Sn(c,t);if(c=c!==void 0?String(c).toLowerCase():kn,c!==kn)throw new Error("Encoding not supported. Only utf-8 is supported");t=En(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Sn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=En(e),this._streaming||(this._decoder=new ya({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new gi(r),i=[],u;!o.endOfStream()&&(u=this._decoder.handler(o,o.read()),u!==Ur);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(o,o.read()),u===Ur)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ma(i)}};function Mn(c,t){if(!(this instanceof Mn))return new Mn(c,t);if(c=c!==void 0?String(c).toLowerCase():kn,c!==kn)throw new Error("Encoding not supported. Only utf-8 is supported");t=En(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Mn.prototype={encode:function(t,e){t=t?String(t):"",e=En(e),this._streaming||(this._encoder=new wa(this._options)),this._streaming=!!e.stream;for(var r=[],o=new gi(ga(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==Ur);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==Ur;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ya(c){var t=c.fatal,e=0,r=0,o=0,i=128,u=191;this.handler=function(w,b){if(b===vn&&o!==0)return o=0,Dn(t);if(b===vn)return Ur;if(o===0){if(Ve(b,0,127))return b;if(Ve(b,194,223))o=1,e=b-192;else if(Ve(b,224,239))b===224&&(i=160),b===237&&(u=159),o=2,e=b-224;else if(Ve(b,240,244))b===240&&(i=144),b===244&&(u=143),o=3,e=b-240;else return Dn(t);return e=e<<6*o,null}if(!Ve(b,i,u))return e=o=r=0,i=128,u=191,w.prepend(b),Dn(t);if(i=128,u=191,r+=1,e+=b-128<<6*(o-r),r!==o)return null;var k=e;return e=o=r=0,k}}function wa(c){c.fatal,this.handler=function(t,e){if(e===vn)return Ur;if(Ve(e,0,127))return e;var r,o;Ve(e,128,2047)?(r=1,o=192):Ve(e,2048,65535)?(r=2,o=224):Ve(e,65536,1114111)&&(r=3,o=240);for(var i=[(e>>6*r)+o];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const ba=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Sn,TextEncoder:Mn},Symbol.toStringTag,{value:"Module"})),va=hs(ba);var ka=Be&&Be.__createBinding||(Object.create?function(c,t,e,r){r===void 0&&(r=e),Object.defineProperty(c,r,{enumerable:!0,get:function(){return t[e]}})}:function(c,t,e,r){r===void 0&&(r=e),c[r]=t[e]}),Sa=Be&&Be.__setModuleDefault||(Object.create?function(c,t){Object.defineProperty(c,"default",{enumerable:!0,value:t})}:function(c,t){c.default=t}),Fe=Be&&Be.__decorate||function(c,t,e,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(c,t,e,r);else for(var w=c.length-1;w>=0;w--)(u=c[w])&&(i=(o<3?u(i):o>3?u(t,e,i):u(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i},Ma=Be&&Be.__importStar||function(c){if(c&&c.__esModule)return c;var t={};if(c!=null)for(var e in c)e!=="default"&&Object.hasOwnProperty.call(c,e)&&ka(t,c,e);return Sa(t,c),t},ws=Be&&Be.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ce,"__esModule",{value:!0});var bs=ce.deserializeUnchecked=_s=ce.deserialize=xs=ce.serialize=ce.BinaryReader=ce.BinaryWriter=ce.BorshError=ce.baseDecode=ce.baseEncode=void 0;const rr=ws(pa),vs=ws(To),xa=Ma(va),_a=typeof TextDecoder!="function"?xa.TextDecoder:TextDecoder,Ia=new _a("utf-8",{fatal:!0});function Aa(c){return typeof c=="string"&&(c=ie.from(c,"utf8")),vs.default.encode(ie.from(c))}ce.baseEncode=Aa;function Ea(c){return ie.from(vs.default.decode(c))}ce.baseDecode=Ea;const Hn=1024;class be extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ce.BorshError=be;class ks{constructor(){this.buf=ie.alloc(Hn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ie.concat([this.buf,ie.alloc(Hn)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(ie.from(new rr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(ie.from(new rr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(ie.from(new rr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(ie.from(new rr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=ie.concat([ie.from(this.buf.subarray(0,this.length)),t,ie.alloc(Hn)]),this.length+=t.length}writeString(t){this.maybeResize();const e=ie.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(ie.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ce.BinaryWriter=ks;function qe(c,t,e){const r=e.value;e.value=function(...o){try{return r.apply(this,o)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new be("Reached the end of buffer when deserializing")}throw i}}}class Ae{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new rr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new rr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new rr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new rr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new be(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Ia.decode(e)}catch(r){throw new be(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let o=0;o<e;++o)r.push(t());return r}}Fe([qe],Ae.prototype,"readU8",null);Fe([qe],Ae.prototype,"readU16",null);Fe([qe],Ae.prototype,"readU32",null);Fe([qe],Ae.prototype,"readU64",null);Fe([qe],Ae.prototype,"readU128",null);Fe([qe],Ae.prototype,"readU256",null);Fe([qe],Ae.prototype,"readU512",null);Fe([qe],Ae.prototype,"readString",null);Fe([qe],Ae.prototype,"readFixedArray",null);Fe([qe],Ae.prototype,"readArray",null);ce.BinaryReader=Ae;function Ss(c){return c.charAt(0).toUpperCase()+c.slice(1)}function Ir(c,t,e,r,o){try{if(typeof r=="string")o[`write${Ss(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new be(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new be(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Ir(c,null,e[i],r[0],o)}else o.writeArray(e,i=>{Ir(c,t,i,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),Ir(c,t,e,r.type,o));break}case"map":{o.writeU32(e.size),e.forEach((i,u)=>{Ir(c,t,u,r.key,o),Ir(c,t,i,r.value,o)});break}default:throw new be(`FieldType ${r} unrecognized`)}else Ms(c,e,o)}catch(i){throw i instanceof be&&i.addToFieldPath(t),i}}function Ms(c,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=c.get(t.constructor);if(!r)throw new be(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,i])=>{Ir(c,o,t[o],i,e)});else if(r.kind==="enum"){const o=t[r.field];for(let i=0;i<r.values.length;++i){const[u,w]=r.values[i];if(u===o){e.writeU8(i),Ir(c,u,t[u],w,e);break}}}else throw new be(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ra(c,t,e=ks){const r=new e;return Ms(c,t,r),r.toArray()}var xs=ce.serialize=Ra;function Ar(c,t,e,r){try{if(typeof e=="string")return r[`read${Ss(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const o=[];for(let i=0;i<e[1];i++)o.push(Ar(c,null,e[0],r));return o}else return r.readArray(()=>Ar(c,t,e[0],r))}if(e.kind==="option")return r.readU8()?Ar(c,t,e.type,r):void 0;if(e.kind==="map"){let o=new Map;const i=r.readU32();for(let u=0;u<i;u++){const w=Ar(c,t,e.key,r),b=Ar(c,t,e.value,r);o.set(w,b)}return o}return mi(c,e,r)}catch(o){throw o instanceof be&&o.addToFieldPath(t),o}}function mi(c,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=c.get(t);if(!r)throw new be(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const o={};for(const[i,u]of c.get(t).fields)o[i]=Ar(c,i,u,e);return new t(o)}if(r.kind==="enum"){const o=e.readU8();if(o>=r.values.length)throw new be(`Enum index: ${o} is out of range`);const[i,u]=r.values[o],w=Ar(c,i,u,e);return new t({[i]:w})}throw new be(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ba(c,t,e,r=Ae){const o=new r(e),i=mi(c,t,o);if(o.offset<e.length)throw new be(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return i}var _s=ce.deserialize=Ba;function Pa(c,t,e,r=Ae){const o=new r(e);return mi(c,t,o)}bs=ce.deserializeUnchecked=Pa;var M={};Object.defineProperty(M,"__esModule",{value:!0});M.s16=M.s8=M.nu64be=M.u48be=M.u40be=M.u32be=M.u24be=M.u16be=ae=M.nu64=M.u48=M.u40=F=M.u32=M.u24=Ee=M.u16=Wt=M.u8=nr=M.offset=M.greedy=M.Constant=M.UTF8=M.CString=M.Blob=M.Boolean=M.BitField=M.BitStructure=M.VariantLayout=M.Union=M.UnionLayoutDiscriminator=M.UnionDiscriminator=M.Structure=M.Sequence=M.DoubleBE=M.Double=M.FloatBE=M.Float=M.NearInt64BE=M.NearInt64=M.NearUInt64BE=M.NearUInt64=M.IntBE=M.Int=M.UIntBE=M.UInt=M.OffsetLayout=M.GreedyCount=M.ExternalLayout=M.bindConstructorLayout=M.nameWithProperty=M.Layout=M.uint8ArrayToBuffer=M.checkUint8Array=void 0;M.constant=M.utf8=M.cstr=Yt=M.blob=M.unionLayoutDiscriminator=M.union=he=M.seq=M.bits=q=M.struct=M.f64be=M.f64=M.f32be=M.f32=M.ns64be=M.s48be=M.s40be=M.s32be=M.s24be=M.s16be=_e=M.ns64=M.s48=M.s40=M.s32=M.s24=void 0;const yi=oi;function Dr(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}M.checkUint8Array=Dr;function qt(c){return Dr(c),yi.Buffer.from(c.buffer,c.byteOffset,c.length)}M.uint8ArrayToBuffer=qt;class $t{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}M.Layout=$t;function wi(c,t){return t.property?c+"["+t.property+"]":c}M.nameWithProperty=wi;function Ta(c,t){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof $t))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=t,t.boundConstructor_=c,t.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(c,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}M.bindConstructorLayout=Ta;class Se extends $t{isCount(){throw new Error("ExternalLayout is abstract")}}M.ExternalLayout=Se;class Is extends Se{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Dr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}M.GreedyCount=Is;class bi extends Se{constructor(t,e=0,r){if(!(t instanceof $t))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Re||this.layout instanceof Te}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}M.OffsetLayout=bi;class Re extends $t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return qt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return qt(e).writeUIntLE(t,r,this.span),this.span}}M.UInt=Re;class Te extends $t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return qt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return qt(e).writeUIntBE(t,r,this.span),this.span}}M.UIntBE=Te;class Tr extends $t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return qt(t).readIntLE(e,this.span)}encode(t,e,r=0){return qt(e).writeIntLE(t,r,this.span),this.span}}M.Int=Tr;class Hr extends $t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return qt(t).readIntBE(e,this.span)}encode(t,e,r=0){return qt(e).writeIntBE(t,r,this.span),this.span}}M.IntBE=Hr;const Jn=Math.pow(2,32);function Rn(c){const t=Math.floor(c/Jn),e=c-t*Jn;return{hi32:t,lo32:e}}function Bn(c,t){return c*Jn+t}class As extends $t{constructor(t){super(8,t)}decode(t,e=0){const r=qt(t),o=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Bn(i,o)}encode(t,e,r=0){const o=Rn(t),i=qt(e);return i.writeUInt32LE(o.lo32,r),i.writeUInt32LE(o.hi32,r+4),8}}M.NearUInt64=As;class Es extends $t{constructor(t){super(8,t)}decode(t,e=0){const r=qt(t),o=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Bn(o,i)}encode(t,e,r=0){const o=Rn(t),i=qt(e);return i.writeUInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}M.NearUInt64BE=Es;class Rs extends $t{constructor(t){super(8,t)}decode(t,e=0){const r=qt(t),o=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Bn(i,o)}encode(t,e,r=0){const o=Rn(t),i=qt(e);return i.writeUInt32LE(o.lo32,r),i.writeInt32LE(o.hi32,r+4),8}}M.NearInt64=Rs;class Bs extends $t{constructor(t){super(8,t)}decode(t,e=0){const r=qt(t),o=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Bn(o,i)}encode(t,e,r=0){const o=Rn(t),i=qt(e);return i.writeInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}M.NearInt64BE=Bs;class Ps extends $t{constructor(t){super(4,t)}decode(t,e=0){return qt(t).readFloatLE(e)}encode(t,e,r=0){return qt(e).writeFloatLE(t,r),4}}M.Float=Ps;class Ts extends $t{constructor(t){super(4,t)}decode(t,e=0){return qt(t).readFloatBE(e)}encode(t,e,r=0){return qt(e).writeFloatBE(t,r),4}}M.FloatBE=Ts;class Ls extends $t{constructor(t){super(8,t)}decode(t,e=0){return qt(t).readDoubleLE(e)}encode(t,e,r=0){return qt(e).writeDoubleLE(t,r),8}}M.Double=Ls;class Cs extends $t{constructor(t){super(8,t)}decode(t,e=0){return qt(t).readDoubleBE(e)}encode(t,e,r=0){return qt(e).writeDoubleBE(t,r),8}}M.DoubleBE=Cs;class Ns extends $t{constructor(t,e,r){if(!(t instanceof $t))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Se&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof Se)&&0<t.span&&(o=e*t.span),super(o,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,o=this.count;if(o instanceof Se&&(o=o.decode(t,e)),0<this.elementLayout.span)r=o*this.elementLayout.span;else{let i=0;for(;i<o;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let o=0,i=this.count;for(i instanceof Se&&(i=i.decode(t,e));o<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return r}encode(t,e,r=0){const o=this.elementLayout,i=t.reduce((u,w)=>u+o.encode(w,e,r+u),0);return this.count instanceof Se&&this.count.encode(t.length,e,r),i}}M.Sequence=Ns;class Os extends $t{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof $t,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((o,i)=>{const u=i.getSpan(t,e);return e+=u,o+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Dr(t);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const o=r;let i=0,u=0;for(const w of this.fields){let b=w.span;if(u=0<b?b:0,w.property!==void 0){const k=t[w.property];k!==void 0&&(u=w.encode(k,e,r),0>b&&(b=w.getSpan(e,r)))}i=r,r+=b}return i+u-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}M.Structure=Os;class vi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}M.UnionDiscriminator=vi;class xn extends vi{constructor(t,e){if(!(t instanceof Se&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}M.UnionLayoutDiscriminator=xn;class ki extends $t{constructor(t,e,r){let o;if(t instanceof Re||t instanceof Te)o=new xn(new bi(t));else if(t instanceof Se&&t.isCount())o=new xn(t);else if(t instanceof vi)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof $t))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Re||t instanceof Te)&&(i+=o.layout.span)),super(i,r),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof Re||t instanceof Te,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(w){return u(w)},this.configGetSourceVariant=function(w){u=w.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const o=this.discriminator,i=o.decode(t,e),u=this.registry[i];if(u===void 0){const w=this.defaultLayout;let b=0;this.usesPrefixDiscriminator&&(b=o.layout.span),r=this.makeDestinationObject(),r[o.property]=i,r[w.property]=w.decode(t,e+b)}else r=u.decode(t,e);return r}encode(t,e,r=0){const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,u=this.defaultLayout;let w=0;return this.usesPrefixDiscriminator&&(w=i.layout.span),i.encode(t[i.property],e,r),w+u.encode(t[u.property],e,r+w)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new zs(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}M.Union=ki;class zs extends $t{constructor(t,e,r,o){if(!(t instanceof ki))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof $t))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+r)),r+o}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),i+=this.layout.getSpan(e,r+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}M.VariantLayout=zs;function Nr(c){return 0>c&&(c+=4294967296),c}class Si extends $t{constructor(t,e,r){if(!(t instanceof Re||t instanceof Te))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(i){return o=Nr(i),this},this._packedGetValue=function(){return o}}decode(t,e=0){const r=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const o=this.word.decode(e,r);this._packedSetValue(o);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Mi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Ks(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}M.BitStructure=Si;class Mi{constructor(t,e,r){if(!(t instanceof Si))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const o=8*t.span,i=t.fields.reduce((u,w)=>u+w.bits,0);if(e+i>o)throw new Error("bits too long for span remainder ("+(o-i)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=o-i-e),this.wordMask=Nr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Nr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Nr(t&this.valueMask))throw new TypeError(wi("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Nr(t<<this.start);this.container._packedSetValue(Nr(e&~this.wordMask)|r)}}M.BitField=Mi;let Ks=class extends Mi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};M.Boolean=Ks;class Us extends $t{constructor(t,e){if(!(t instanceof Se&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Se||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),qt(t).slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Se&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError(wi("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(r+o>e.length)throw new RangeError("encoding overruns Uint8Array");const i=qt(t);return qt(e).write(i.toString("hex"),r,o,"hex"),this.length instanceof Se&&this.length.encode(o,e,r),o}}M.Blob=Us;class Ws extends $t{constructor(t){super(-1,t)}getSpan(t,e=0){Dr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return qt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=yi.Buffer.from(t,"utf8"),i=o.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=qt(e);return o.copy(u,r),u[r+i]=0,i+1}}M.CString=Ws;class Fs extends $t{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Dr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return qt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=yi.Buffer.from(t,"utf8"),i=o.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(qt(e),r),i}}M.UTF8=Fs;class qs extends $t{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}M.Constant=qs;M.greedy=(c,t)=>new Is(c,t);var nr=M.offset=(c,t,e)=>new bi(c,t,e),Wt=M.u8=c=>new Re(1,c),Ee=M.u16=c=>new Re(2,c);M.u24=c=>new Re(3,c);var F=M.u32=c=>new Re(4,c);M.u40=c=>new Re(5,c);M.u48=c=>new Re(6,c);var ae=M.nu64=c=>new As(c);M.u16be=c=>new Te(2,c);M.u24be=c=>new Te(3,c);M.u32be=c=>new Te(4,c);M.u40be=c=>new Te(5,c);M.u48be=c=>new Te(6,c);M.nu64be=c=>new Es(c);M.s8=c=>new Tr(1,c);M.s16=c=>new Tr(2,c);M.s24=c=>new Tr(3,c);M.s32=c=>new Tr(4,c);M.s40=c=>new Tr(5,c);M.s48=c=>new Tr(6,c);var _e=M.ns64=c=>new Rs(c);M.s16be=c=>new Hr(2,c);M.s24be=c=>new Hr(3,c);M.s32be=c=>new Hr(4,c);M.s40be=c=>new Hr(5,c);M.s48be=c=>new Hr(6,c);M.ns64be=c=>new Bs(c);M.f32=c=>new Ps(c);M.f32be=c=>new Ts(c);M.f64=c=>new Ls(c);M.f64be=c=>new Cs(c);var q=M.struct=(c,t,e)=>new Os(c,t,e);M.bits=(c,t,e)=>new Si(c,t,e);var he=M.seq=(c,t,e)=>new Ns(c,t,e);M.union=(c,t,e)=>new ki(c,t,e);M.unionLayoutDiscriminator=(c,t)=>new xn(c,t);var Yt=M.blob=(c,t)=>new Us(c,t);M.cstr=c=>new Ws(c);M.utf8=(c,t)=>new Fs(c,t);M.constant=(c,t)=>new qs(c,t);var pn={};Object.defineProperty(pn,"__esModule",{value:!0});function La(c){{const t=ie.from(c);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Ca=pn.toBigIntLE=La;function Na(c){{const t=c.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}pn.toBigIntBE=Na;function Oa(c,t){{const e=c.toString(16),r=ie.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Ds=pn.toBufferLE=Oa;function za(c,t){{const e=c.toString(16);return ie.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}pn.toBufferBE=za;const Hs=hs(Xo),Ka=Hs.v4,Ua=function(c,t,e,r){if(typeof c!="string")throw new TypeError(c+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const i={method:c};if(o===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return Ka()};i.id=u(i,r)}else o===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Wa=Ua;const Fa=Hs.v4,qa=Wa,an=function(c,t){if(!(this instanceof an))return new an(c,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Fa()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=c};var Da=an;an.prototype.request=function(c,t,e,r){const o=this;let i=null;const u=Array.isArray(c)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&c&&typeof c=="object"&&typeof t=="function")r=t,i=c;else{typeof e=="function"&&(r=e,e=void 0);const k=typeof r=="function";try{i=qa(c,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(v){if(k)return r(v);throw v}if(!k)return i}let b;try{b=JSON.stringify(i,this.options.replacer)}catch(k){return r(k)}return this.callServer(b,function(k,v){o._parseResponse(k,v,r)}),i};an.prototype._parseResponse=function(c,t,e){if(c){e(c);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){const o=function(u){return typeof u.error<"u"},i=function(u){return!o(u)};return e(null,r.filter(o),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const Ha=us(Da);var Va=class extends ls{constructor(t,e,r){super();ne(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(t,e,r){const o=r||e;try{this.socket.send(t),o()}catch(i){o(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function $a(c,t){return new Va(c,t)}var Ga=class{encode(c){return JSON.stringify(c)}decode(c){return JSON.parse(c)}},Za=class extends ls{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:o=!0,reconnect_interval:i=1e3,max_reconnects:u=5,...w}={},b,k){super();ne(this,"address");ne(this,"rpc_id");ne(this,"queue");ne(this,"options");ne(this,"autoconnect");ne(this,"ready");ne(this,"reconnect");ne(this,"reconnect_timer_id");ne(this,"reconnect_interval");ne(this,"max_reconnects");ne(this,"rest_options");ne(this,"current_reconnects");ne(this,"generate_request_id");ne(this,"socket");ne(this,"webSocketFactory");ne(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=u,this.rest_options=w,this.current_reconnects=0,this.generate_request_id=b||(()=>++this.rpc_id),k?this.dataPack=k:this.dataPack=new Ga,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,o){return!o&&typeof r=="object"&&(o=r,r=null),new Promise((i,u)=>{if(!this.ready)return u(new Error("socket not ready"));const w=this.generate_request_id(t,e),b={jsonrpc:"2.0",method:t,params:e||void 0,id:w};this.socket.send(this.dataPack.encode(b),o,k=>{if(k)return u(k);this.queue[w]={promise:[i,u]},r&&(this.queue[w].timeout=setTimeout(()=>{delete this.queue[w],u(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,o)=>{if(!this.ready)return o(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),u=>{if(u)return o(u);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Z.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const o=[r.notification];if(r.params.constructor===Object)o.push(r.params);else for(let i=0;i<r.params.length;i++)o.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",r,o),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const Ya=qr.utils.randomPrivateKey,Gi=()=>{const c=qr.utils.randomPrivateKey(),t=_n(c),e=new Uint8Array(64);return e.set(c),e.set(t,32),{publicKey:t,secretKey:e}},_n=qr.getPublicKey;function Zi(c){try{return qr.ExtendedPoint.fromHex(c),!0}catch{return!1}}const xi=(c,t)=>qr.sign(c,t.slice(0,32)),ja=qr.verify,Ot=c=>Z.isBuffer(c)?c:c instanceof Uint8Array?Z.from(c.buffer,c.byteOffset,c.byteLength):Z.from(c);class _i{constructor(t){Object.assign(this,t)}encode(){return Z.from(xs(on,this))}static decode(t){return _s(on,this,t)}static decodeUnchecked(t){return bs(on,this,t)}}class Ja extends _i{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const on=new Map;var Vs;const $s=32,Ue=32;function Xa(c){return c._bn!==void 0}let Yi=1;class N extends _i{constructor(t){if(super({}),this._bn=void 0,Xa(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ue.decode(t);if(e.length!=Ue)throw new Error("Invalid public key input");this._bn=new $i(e)}else this._bn=new $i(t);if(this._bn.byteLength()>Ue)throw new Error("Invalid public key input")}}static unique(){const t=new N(Yi);return Yi+=1,new N(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ue.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Z);if(t.length===Ue)return t;const e=Z.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=Z.concat([t.toBuffer(),Z.from(e),r.toBuffer()]),i=Wi(o);return new N(i)}static createProgramAddressSync(t,e){let r=Z.alloc(0);t.forEach(function(i){if(i.length>$s)throw new TypeError("Max seed length exceeded");r=Z.concat([r,Ot(i)])}),r=Z.concat([r,e.toBuffer(),Z.from("ProgramDerivedAddress")]);const o=Wi(r);if(Zi(o))throw new Error("Invalid seeds, address must fall off the curve");return new N(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const i=t.concat(Z.from([r]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new N(t);return Zi(e.toBytes())}}Vs=N;N.default=new Vs("11111111111111111111111111111111");on.set(N,{kind:"struct",fields:[["_bn","u256"]]});class Qa{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Ot(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Ot(Ya()),this._publicKey=Ot(_n(this._secretKey))}get publicKey(){return new N(this._publicKey)}get secretKey(){return Z.concat([this._secretKey,this._publicKey],64)}}const tc=new N("BPFLoader1111111111111111111111111111111111"),ir=1232,Pn=127,cn=64;class Ii extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ii.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ai extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ai.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Or extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Or.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class un{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const o=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(u=>o(u.pubkey)),data:i.data}))}}const Kt=(c="publicKey")=>Yt(32,c),ec=(c="signature")=>Yt(64,c),Rr=(c="string")=>{const t=q([F("length"),F("lengthPadding"),Yt(nr(F(),-8),"chars")],c),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(i,u)=>e(i,u).chars.toString(),o.encode=(i,u,w)=>{const b={chars:Z.from(i,"utf8")};return r(b,u,w)},o.alloc=i=>F().span+F().span+Z.from(i,"utf8").length,o},rc=(c="authorized")=>q([Kt("staker"),Kt("withdrawer")],c),nc=(c="lockup")=>q([_e("unixTimestamp"),_e("epoch"),Kt("custodian")],c),ic=(c="voteInit")=>q([Kt("nodePubkey"),Kt("authorizedVoter"),Kt("authorizedWithdrawer"),Wt("commission")],c),sc=(c="voteAuthorizeWithSeedArgs")=>q([F("voteAuthorizationType"),Kt("currentAuthorityDerivedKeyOwnerPubkey"),Rr("currentAuthorityDerivedKeySeed"),Kt("newAuthorized")],c);function Gs(c,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const i=t[o.property];if(Array.isArray(i))return i.length*e(o.elementLayout)}else if("fields"in o)return Gs({layout:o},t[o.property]);return 0};let r=0;return c.layout.fields.forEach(o=>{r+=e(o)}),r}function ve(c){let t=0,e=0;for(;;){let r=c.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Ie(c,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){c.push(r);break}else r|=128,c.push(r)}}function Ft(c,t){if(!c)throw new Error(t||"Assertion failed")}class Tn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=u=>{const w=u.toBase58();let b=r.get(w);return b===void 0&&(b={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(w,b)),b},i=o(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){o(u.programId).isInvoked=!0;for(const w of u.keys){const b=o(w.pubkey);b.isSigner||(b.isSigner=w.isSigner),b.isWritable||(b.isWritable=w.isWritable)}}return new Tn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ft(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,b])=>b.isSigner&&b.isWritable),r=t.filter(([,b])=>b.isSigner&&!b.isWritable),o=t.filter(([,b])=>!b.isSigner&&b.isWritable),i=t.filter(([,b])=>!b.isSigner&&!b.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ft(e.length>0,"Expected at least one writable signer key");const[b]=e[0];Ft(b===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const w=[...e.map(([b])=>new N(b)),...r.map(([b])=>new N(b)),...o.map(([b])=>new N(b)),...i.map(([b])=>new N(b))];return[u,w]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const w=new N(i),b=t.findIndex(k=>k.equals(w));b>=0&&(Ft(b<256,"Max lookup table index exceeded"),r.push(b),o.push(w),this.keyMetaMap.delete(i))}return[r,o]}}const Zs="Reached end of buffer unexpectedly";function Oe(c){if(c.length===0)throw new Error(Zs);return c.shift()}function ke(c,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>c.length:e>=c.length)throw new Error(Zs);return c.splice(...t)}class Le{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new N(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ue.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new un(this.staticAccountKeys)}static compile(t){const e=Tn.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),u=new un(o).compileInstructions(t.instructions).map(w=>({programIdIndex:w.programIdIndex,accounts:w.accountKeyIndexes,data:ue.encode(w.data)}));return new Le({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ie(e,t);const r=this.instructions.map(A=>{const{accounts:T,programIdIndex:E}=A,B=Array.from(ue.decode(A.data));let R=[];Ie(R,T.length);let L=[];return Ie(L,B.length),{programIdIndex:E,keyIndicesCount:Z.from(R),keyIndices:T,dataLength:Z.from(L),data:B}});let o=[];Ie(o,r.length);let i=Z.alloc(ir);Z.from(o).copy(i);let u=o.length;r.forEach(A=>{const E=q([Wt("programIdIndex"),Yt(A.keyIndicesCount.length,"keyIndicesCount"),he(Wt("keyIndex"),A.keyIndices.length,"keyIndices"),Yt(A.dataLength.length,"dataLength"),he(Wt("userdatum"),A.data.length,"data")]).encode(A,i,u);u+=E}),i=i.slice(0,u);const w=q([Yt(1,"numRequiredSignatures"),Yt(1,"numReadonlySignedAccounts"),Yt(1,"numReadonlyUnsignedAccounts"),Yt(e.length,"keyCount"),he(Kt("key"),t,"keys"),Kt("recentBlockhash")]),b={numRequiredSignatures:Z.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Z.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Z.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Z.from(e),keys:this.accountKeys.map(A=>Ot(A.toBytes())),recentBlockhash:ue.decode(this.recentBlockhash)};let k=Z.alloc(2048);const v=w.encode(b,k);return i.copy(k,v),k.slice(0,v+i.length)}static from(t){let e=[...t];const r=Oe(e);if(r!==(r&Pn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=Oe(e),i=Oe(e),u=ve(e);let w=[];for(let T=0;T<u;T++){const E=ke(e,0,Ue);w.push(new N(Z.from(E)))}const b=ke(e,0,Ue),k=ve(e);let v=[];for(let T=0;T<k;T++){const E=Oe(e),B=ve(e),R=ke(e,0,B),L=ve(e),W=ke(e,0,L),dt=ue.encode(Z.from(W));v.push({programIdIndex:E,accounts:R,data:dt})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:ue.encode(Z.from(b)),accountKeys:w,instructions:v};return new Le(A)}}class Br{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new un(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,i=this.addressTableLookups.reduce((u,w)=>u+w.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){const o=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return o<u}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(i=>i.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Tn.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const v of i){const A=e.extractTableLookup(v);if(A!==void 0){const[T,{writable:E,readonly:B}]=A;r.push(T),o.writable.push(...E),o.readonly.push(...B)}}const[u,w]=e.getMessageComponents(),k=new un(w,o).compileInstructions(t.instructions);return new Br({header:u,staticAccountKeys:w,recentBlockhash:t.recentBlockhash,compiledInstructions:k,addressTableLookups:r})}serialize(){const t=Array();Ie(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ie(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),i=Array();Ie(i,this.addressTableLookups.length);const u=q([Wt("prefix"),q([Wt("numRequiredSignatures"),Wt("numReadonlySignedAccounts"),Wt("numReadonlyUnsignedAccounts")],"header"),Yt(t.length,"staticAccountKeysLength"),he(Kt(),this.staticAccountKeys.length,"staticAccountKeys"),Kt("recentBlockhash"),Yt(r.length,"instructionsLength"),Yt(e.length,"serializedInstructions"),Yt(i.length,"addressTableLookupsLength"),Yt(o.length,"serializedAddressTableLookups")]),w=new Uint8Array(ir),k=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(v=>v.toBytes()),recentBlockhash:ue.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},w);return w.slice(0,k)}serializeInstructions(){let t=0;const e=new Uint8Array(ir);for(const r of this.compiledInstructions){const o=Array();Ie(o,r.accountKeyIndexes.length);const i=Array();Ie(i,r.data.length);const u=q([Wt("programIdIndex"),Yt(o.length,"encodedAccountKeyIndexesLength"),he(Wt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Yt(i.length,"encodedDataLength"),Yt(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ir);for(const r of this.addressTableLookups){const o=Array();Ie(o,r.writableIndexes.length);const i=Array();Ie(i,r.readonlyIndexes.length);const u=q([Kt("accountKey"),Yt(o.length,"encodedWritableIndexesLength"),he(Wt(),r.writableIndexes.length,"writableIndexes"),Yt(i.length,"encodedReadonlyIndexesLength"),he(Wt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Oe(e),o=r&Pn;Ft(r!==o,"Expected versioned message but received legacy message");const i=o;Ft(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:Oe(e),numReadonlySignedAccounts:Oe(e),numReadonlyUnsignedAccounts:Oe(e)},w=[],b=ve(e);for(let B=0;B<b;B++)w.push(new N(ke(e,0,Ue)));const k=ue.encode(ke(e,0,Ue)),v=ve(e),A=[];for(let B=0;B<v;B++){const R=Oe(e),L=ve(e),W=ke(e,0,L),dt=ve(e),Q=new Uint8Array(ke(e,0,dt));A.push({programIdIndex:R,accountKeyIndexes:W,data:Q})}const T=ve(e),E=[];for(let B=0;B<T;B++){const R=new N(ke(e,0,Ue)),L=ve(e),W=ke(e,0,L),dt=ve(e),Q=ke(e,0,dt);E.push({accountKey:R,writableIndexes:W,readonlyIndexes:Q})}return new Br({header:u,staticAccountKeys:w,recentBlockhash:k,compiledInstructions:A,addressTableLookups:E})}}const Ei={deserializeMessageVersion(c){const t=c[0],e=t&Pn;return e===t?"legacy":e},deserialize:c=>{const t=Ei.deserializeMessageVersion(c);if(t==="legacy")return Le.from(c);if(t===0)return Br.deserialize(c);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let He=function(c){return c[c.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",c[c.PROCESSED=1]="PROCESSED",c[c.TIMED_OUT=2]="TIMED_OUT",c[c.NONCE_INVALID=3]="NONCE_INVALID",c}({});const oc=Z.alloc(cn).fill(0);class Gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Z.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ht{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Gt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const o=[],i=[];e.forEach(R=>{R.keys.forEach(W=>{i.push({...W})});const L=R.programId.toString();o.includes(L)||o.push(L)}),o.forEach(R=>{i.push({pubkey:new N(R),isSigner:!1,isWritable:!1})});const u=[];i.forEach(R=>{const L=R.pubkey.toString(),W=u.findIndex(dt=>dt.pubkey.toString()===L);W>-1?(u[W].isWritable=u[W].isWritable||R.isWritable,u[W].isSigner=u[W].isSigner||R.isSigner):u.push(R)}),u.sort(function(R,L){if(R.isSigner!==L.isSigner)return R.isSigner?-1:1;if(R.isWritable!==L.isWritable)return R.isWritable?-1:1;const W={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",W)});const w=u.findIndex(R=>R.pubkey.equals(r));if(w>-1){const[R]=u.splice(w,1);R.isSigner=!0,R.isWritable=!0,u.unshift(R)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const R of this.signatures){const L=u.findIndex(W=>W.pubkey.equals(R.publicKey));if(L>-1)u[L].isSigner||(u[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let b=0,k=0,v=0;const A=[],T=[];u.forEach(({pubkey:R,isSigner:L,isWritable:W})=>{L?(A.push(R.toString()),b+=1,W||(k+=1)):(T.push(R.toString()),W||(v+=1))});const E=A.concat(T),B=e.map(R=>{const{data:L,programId:W}=R;return{programIdIndex:E.indexOf(W.toString()),accounts:R.keys.map(dt=>E.indexOf(dt.pubkey.toString())),data:ue.encode(L)}});return B.forEach(R=>{Ft(R.programIdIndex>=0),R.accounts.forEach(L=>Ft(L>=0))}),new Le({header:{numRequiredSignatures:b,numReadonlySignedAccounts:k,numReadonlyUnsignedAccounts:v},accountKeys:E,recentBlockhash:t,instructions:B})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const i=xi(r,o.secretKey);this._addSignature(o.publicKey,Ot(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Ft(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Z.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:i}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(i):ja(o,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(o,e);if(i){let u="Signature verification failed.";throw i.invalid&&(u+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(w=>w.toBase58()).join("`, `")}\`].`),i.missing&&(u+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(w=>w.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];Ie(r,e.length);const o=r.length+e.length*64+t.length,i=Z.alloc(o);return Ft(e.length<256),Z.from(r).copy(i,0),e.forEach(({signature:u},w)=>{u!==null&&(Ft(u.length===64,"signature has invalid length"),Z.from(u).copy(i,r.length+w*64))}),t.copy(i,r.length+e.length*64),Ft(i.length<=ir,`Transaction too large: ${i.length} > ${ir}`),i}get keys(){return Ft(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ft(this.instructions.length===1),this.instructions[0].programId}get data(){return Ft(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ve(e);let o=[];for(let i=0;i<r;i++){const u=ke(e,0,cn);o.push(ue.encode(Z.from(u)))}return Ht.populate(Le.from(e),o)}static populate(t,e=[]){const r=new Ht;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{const u={signature:o==ue.encode(oc)?null:ue.decode(o),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(o=>{const i=o.accounts.map(u=>{const w=t.accountKeys[u];return{pubkey:w,isSigner:r.signatures.some(b=>b.publicKey.toString()===w.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new Gt({keys:i,programId:t.accountKeys[o.programIdIndex],data:ue.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class Ri{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:o,recentBlockhash:i}=t,{numRequiredSignatures:u,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:b}=r,k=u-w;Ft(k>0,"Message header is invalid");const v=t.staticAccountKeys.length-u-b;Ft(v>=0,"Message header is invalid");const A=t.getAccountKeys(e),T=A.get(0);if(T===void 0)throw new Error("Failed to decompile message because no account keys were found");const E=[];for(const B of o){const R=[];for(const W of B.accountKeyIndexes){const dt=A.get(W);if(dt===void 0)throw new Error(`Failed to find key for account key index ${W}`);const Q=W<u;let Dt;Q?Dt=W<k:W<A.staticAccountKeys.length?Dt=W-u<v:Dt=W-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,R.push({pubkey:dt,isSigner:W<r.numRequiredSignatures,isWritable:Dt})}const L=A.get(B.programIdIndex);if(L===void 0)throw new Error(`Failed to find program id for program id index ${B.programIdIndex}`);E.push(new Gt({programId:L,data:Ot(B.data),keys:R}))}return new Ri({payerKey:T,instructions:E,recentBlockhash:i})}compileToLegacyMessage(){return Le.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Br.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Bi{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ft(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(cn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ie(e,this.signatures.length);const r=q([Yt(e.length,"encodedSignaturesLength"),he(ec(),this.signatures.length,"signatures"),Yt(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t];const r=[],o=ve(e);for(let u=0;u<o;u++)r.push(new Uint8Array(ke(e,0,cn)));const i=Ei.deserialize(new Uint8Array(e));return new Bi(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const i=r.findIndex(u=>u.equals(o.publicKey));Ft(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=xi(e,o.secretKey)}}addSignature(t,e){Ft(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ft(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const ac=160,cc=64,uc=ac/cc,Ys=1e3/uc,Ne=new N("SysvarC1ock11111111111111111111111111111111"),hc=new N("SysvarEpochSchedu1e111111111111111111111111"),lc=new N("Sysvar1nstructions1111111111111111111111111"),wn=new N("SysvarRecentB1ockHashes11111111111111111111"),Wr=new N("SysvarRent111111111111111111111111111111111"),fc=new N("SysvarRewards111111111111111111111111111111"),dc=new N("SysvarS1otHashes111111111111111111111111111"),pc=new N("SysvarS1otHistory11111111111111111111111111"),bn=new N("SysvarStakeHistory1111111111111111111111111");class hn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:o}){const i=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",u="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let w;switch(t){case"send":w=`Transaction ${e} resulted in an error. 
${r}. `+i+u;break;case"simulate":w=`Simulation failed. 
Message: ${r}. 
`+i+u;break;default:w=`Unknown action '${(b=>b)(t)}'`}super(w),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const i=o.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const gc={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class H extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function Xn(c,t,e,r){const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await c.sendTransaction(t,e,o);let u;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)u=(await c.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:w}=t.nonceInfo,b=w.keys[0].pubkey;u=(await c.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:b,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),u=(await c.confirmTransaction(i,r&&r.commitment)).value;if(u.err)throw i!=null?new hn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(u)})`);return i}function Er(c){return new Promise(t=>setTimeout(t,c))}function Ut(c,t){const e=c.layout.span>=0?c.layout.span:Gs(c,t),r=Z.alloc(e),o=Object.assign({instruction:c.index},t);return c.layout.encode(o,r),r}function Vt(c,t){let e;try{e=c.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==c.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${c.index}`);return e}const js=ae("lamportsPerSignature"),Js=q([F("version"),F("state"),Kt("authorizedPubkey"),Kt("nonce"),q([js],"feeCalculator")]),Qn=Js.span;class Ln{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Js.decode(Ot(t),0);return new Ln({authorizedPubkey:new N(e.authorizedPubkey),nonce:new N(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const mc=c=>{const t=c.decode.bind(c),e=c.encode.bind(c);return{decode:t,encode:e}},yc=c=>t=>{const e=Yt(c,t),{encode:r,decode:o}=mc(e),i=e;return i.decode=(u,w)=>{const b=o(u,w);return Ca(Z.from(b))},i.encode=(u,w,b)=>{const k=Ds(u,c);return r(k,w,b)},i},Fr=yc(8);class wc{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=F("instruction").decode(t.data);let o;for(const[i,u]of Object.entries(Zt))if(u.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a SystemInstruction");return o}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:o}=Vt(Zt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new N(o)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Vt(Zt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:o}=Vt(Zt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new N(o)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Vt(Zt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:o,programId:i}=Vt(Zt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new N(e),seed:r,space:o,programId:new N(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Vt(Zt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new N(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:o}=Vt(Zt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new N(e),seed:r,programId:new N(o)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:o,space:i,programId:u}=Vt(Zt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new N(e),seed:r,lamports:o,space:i,programId:new N(u)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Vt(Zt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new N(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Vt(Zt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Vt(Zt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Vt(Zt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new N(e)}}static checkProgramId(t){if(!t.equals(oe.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Zt=Object.freeze({Create:{index:0,layout:q([F("instruction"),_e("lamports"),_e("space"),Kt("programId")])},Assign:{index:1,layout:q([F("instruction"),Kt("programId")])},Transfer:{index:2,layout:q([F("instruction"),Fr("lamports")])},CreateWithSeed:{index:3,layout:q([F("instruction"),Kt("base"),Rr("seed"),_e("lamports"),_e("space"),Kt("programId")])},AdvanceNonceAccount:{index:4,layout:q([F("instruction")])},WithdrawNonceAccount:{index:5,layout:q([F("instruction"),_e("lamports")])},InitializeNonceAccount:{index:6,layout:q([F("instruction"),Kt("authorized")])},AuthorizeNonceAccount:{index:7,layout:q([F("instruction"),Kt("authorized")])},Allocate:{index:8,layout:q([F("instruction"),_e("space")])},AllocateWithSeed:{index:9,layout:q([F("instruction"),Kt("base"),Rr("seed"),_e("space"),Kt("programId")])},AssignWithSeed:{index:10,layout:q([F("instruction"),Kt("base"),Rr("seed"),Kt("programId")])},TransferWithSeed:{index:11,layout:q([F("instruction"),Fr("lamports"),Rr("seed"),Kt("programId")])},UpgradeNonceAccount:{index:12,layout:q([F("instruction")])}});class oe{constructor(){}static createAccount(t){const e=Zt.Create,r=Ut(e,{lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});return new Gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=Zt.TransferWithSeed;e=Ut(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=Zt.Transfer;e=Ut(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=Zt.AssignWithSeed;e=Ut(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Zt.Assign;e=Ut(o,{programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Zt.CreateWithSeed,r=Ut(e,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Gt({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Ht;"basePubkey"in t&&"seed"in t?e.add(oe.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Qn,programId:this.programId})):e.add(oe.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Qn,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Zt.InitializeNonceAccount,r=Ut(e,{authorized:Ot(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:Wr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Gt(o)}static nonceAdvance(t){const e=Zt.AdvanceNonceAccount,r=Ut(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Gt(o)}static nonceWithdraw(t){const e=Zt.WithdrawNonceAccount,r=Ut(e,{lamports:t.lamports});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:Wr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Zt.AuthorizeNonceAccount,r=Ut(e,{authorized:Ot(t.newAuthorizedPubkey.toBuffer())});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=Zt.AllocateWithSeed;e=Ut(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Zt.Allocate;e=Ut(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}}oe.programId=new N("11111111111111111111111111111111");const bc=ir-300;class Pr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Pr.chunkSize)+1+1)}static async load(t,e,r,o,i){{const A=await t.getMinimumBalanceForRentExemption(i.length),T=await t.getAccountInfo(r.publicKey,"confirmed");let E=null;if(T!==null){if(T.executable)return console.error("Program load failed, account is already executable"),!1;T.data.length!==i.length&&(E=E||new Ht,E.add(oe.allocate({accountPubkey:r.publicKey,space:i.length}))),T.owner.equals(o)||(E=E||new Ht,E.add(oe.assign({accountPubkey:r.publicKey,programId:o}))),T.lamports<A&&(E=E||new Ht,E.add(oe.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:A-T.lamports})))}else E=new Ht().add(oe.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:A>0?A:1,space:i.length,programId:o}));E!==null&&await Xn(t,E,[e,r],{commitment:"confirmed"})}const u=q([F("instruction"),F("offset"),F("bytesLength"),F("bytesLengthPadding"),he(Wt("byte"),nr(F(),-8),"bytes")]),w=Pr.chunkSize;let b=0,k=i,v=[];for(;k.length>0;){const A=k.slice(0,w),T=Z.alloc(w+16);u.encode({instruction:0,offset:b,bytes:A,bytesLength:0,bytesLengthPadding:0},T);const E=new Ht().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:T});v.push(Xn(t,E,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Er(1e3/4),b+=w,k=k.slice(w)}await Promise.all(v);{const A=q([F("instruction")]),T=Z.alloc(A.span);A.encode({instruction:1},T);const E=new Ht().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Wr,isSigner:!1,isWritable:!1}],programId:o,data:T}),B="processed",R=await t.sendTransaction(E,[e,r],{preflightCommitment:B}),{context:L,value:W}=await t.confirmTransaction({signature:R,lastValidBlockHeight:E.lastValidBlockHeight,blockhash:E.recentBlockhash},B);if(W.err)throw new Error(`Transaction ${R} failed (${JSON.stringify(W)})`);for(;;){try{if(await t.getSlot({commitment:B})>L.slot)break}catch{}await new Promise(dt=>setTimeout(dt,Math.round(Ys/2)))}}return!0}}Pr.chunkSize=bc;const vc=new N("BPFLoader2111111111111111111111111111111111");class kc{static getMinNumSignatures(t){return Pr.getMinNumSignatures(t)}static load(t,e,r,o,i){return Pr.load(t,e,r,i,o)}}function Sc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Mc=Object.prototype.toString,xc=Object.keys||function(c){var t=[];for(var e in c)t.push(e);return t};function sn(c,t){var e,r,o,i,u,w,b;if(c===!0)return"true";if(c===!1)return"false";switch(typeof c){case"object":if(c===null)return null;if(c.toJSON&&typeof c.toJSON=="function")return sn(c.toJSON(),t);if(b=Mc.call(c),b==="[object Array]"){for(o="[",r=c.length-1,e=0;e<r;e++)o+=sn(c[e],!0)+",";return r>-1&&(o+=sn(c[e],!0)),o+"]"}else if(b==="[object Object]"){for(i=xc(c).sort(),r=i.length,o="",e=0;e<r;)u=i[e],w=sn(c[u],!1),w!==void 0&&(o&&(o+=","),o+=JSON.stringify(u)+":"+w),e++;return"{"+o+"}"}else return JSON.stringify(c);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(c);default:return isFinite(c)?c:null}}var _c=function(c){var t=sn(c,!1);if(t!==void 0)return""+t},ji=Sc(_c);const nn=32;function Vn(c){let t=0;for(;c>1;)c/=2,t++;return t}function Ic(c){return c===0?1:(c--,c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,c|=c>>16,c|=c>>32,c+1)}class Xs{constructor(t,e,r,o,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Vn(Ic(t+nn+1))-Vn(nn)-1,r=this.getSlotsInEpoch(e),o=t-(r-nn);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[o,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*nn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Vn(nn)):this.slotsPerEpoch}}var Ac=globalThis.fetch;class Ec extends Za{constructor(t,e,r){const o=i=>{const u=$a(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Rc(c,t){let e;try{e=c.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==c.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${c.index}`);return e}const Ji=56;class ti{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Rc(Bc,t),r=t.length-Ji;Ft(r>=0,"lookup table is invalid"),Ft(r%32===0,"lookup table is invalid");const o=r/32,{addresses:i}=q([he(Kt(),o,"addresses")]).decode(t.slice(Ji));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new N(e.authority[0]):void 0,addresses:i.map(u=>new N(u))}}}const Bc={index:1,layout:q([F("typeIndex"),Fr("deactivationSlot"),ae("lastExtendedSlot"),Wt("lastExtendedStartIndex"),Wt(),he(Kt(),nr(Wt(),-1),"authority")])},Pc=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Tc(c){const t=c.match(Pc);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${c}\``);const[e,r,o,i]=t,u=c.startsWith("https:")?"wss:":"ws:",w=o==null?null:parseInt(o.slice(1),10),b=w==null?"":`:${w+1}`;return`${u}//${r}${b}${i}`}const te=fn(ai(N),C(),c=>new N(c)),Qs=ci([C(),Jt("base64")]),Pi=fn(ai(Z),Qs,c=>Z.from(c[0],"base64")),to=30*1e3;function Lc(c){if(/^https?:/.test(c)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return c}function jt(c){let t,e;if(typeof c=="string")t=c;else if(c){const{commitment:r,...o}=c;t=r,e=o}return{commitment:t,config:e}}function eo(c){return Me([P({jsonrpc:Jt("2.0"),id:C(),result:c}),P({jsonrpc:Jt("2.0"),id:C(),error:P({code:dn(),message:C(),data:j(Lo())})})])}const Cc=eo(dn());function Nt(c){return fn(eo(c),Cc,t=>"error"in t?t:{...t,result:O(t.result,c)})}function Qt(c){return Nt(P({context:P({slot:S()}),value:c}))}function Cn(c){return P({context:P({slot:S()}),value:c})}function $n(c,t){return c===0?new Br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new N(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ue.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Le(t)}const Nc=P({foundation:S(),foundationTerm:S(),initial:S(),taper:S(),terminal:S()}),Oc=Nt(K(z(P({epoch:S(),effectiveSlot:S(),amount:S(),postBalance:S(),commission:j(z(S()))})))),zc=K(P({slot:S(),prioritizationFee:S()})),Kc=P({total:S(),validator:S(),foundation:S(),epoch:S()}),Uc=P({epoch:S(),slotIndex:S(),slotsInEpoch:S(),absoluteSlot:S(),blockHeight:j(S()),transactionCount:j(S())}),Wc=P({slotsPerEpoch:S(),leaderScheduleSlotOffset:S(),warmup:We(),firstNormalEpoch:S(),firstNormalSlot:S()}),Fc=fs(C(),K(S())),Lr=z(Me([P({}),C()])),qc=P({err:Lr}),Dc=Jt("receivedSignature"),Hc=P({"solana-core":C(),"feature-set":j(S())}),Xi=Qt(P({err:z(Me([P({}),C()])),logs:z(K(C())),accounts:j(z(K(z(P({executable:We(),owner:C(),lamports:S(),data:K(C()),rentEpoch:j(S())}))))),unitsConsumed:j(S()),returnData:j(z(P({programId:C(),data:ci([C(),Jt("base64")])})))})),Vc=Qt(P({byIdentity:fs(C(),K(S())),range:P({firstSlot:S(),lastSlot:S()})}));function $c(c,t,e,r,o,i){const u=e||Ac;let w;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let b;return r&&(b=async(v,A)=>{const T=await new Promise((E,B)=>{try{r(v,A,(R,L)=>E([R,L]))}catch(R){B(R)}});return await u(...T)}),new Ha(async(v,A)=>{const T={method:"POST",body:v,agent:w,headers:Object.assign({"Content-Type":"application/json"},t||{},Gu)};try{let E=5,B,R=500;for(;b?B=await b(c,T):B=await u(c,T),!(B.status!==429||o===!0||(E-=1,E===0));)console.error(`Server responded with ${B.status} ${B.statusText}.  Retrying after ${R}ms delay...`),await Er(R),R*=2;const L=await B.text();B.ok?A(null,L):A(new Error(`${B.status} ${B.statusText}: ${L}`))}catch(E){E instanceof Error&&A(E)}},{})}function Gc(c){return(t,e)=>new Promise((r,o)=>{c.request(t,e,(i,u)=>{if(i){o(i);return}r(u)})})}function Zc(c){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(i=>c.request(i.methodName,i.args));c.request(o,(i,u)=>{if(i){r(i);return}e(u)})})}const Yc=Nt(Nc),jc=Nt(Kc),Jc=Nt(zc),Xc=Nt(Uc),Qc=Nt(Wc),tu=Nt(Fc),eu=Nt(S()),ru=Qt(P({total:S(),circulating:S(),nonCirculating:S(),nonCirculatingAccounts:K(te)})),ei=P({amount:C(),uiAmount:z(S()),decimals:S(),uiAmountString:j(C())}),nu=Qt(K(P({address:te,amount:C(),uiAmount:z(S()),decimals:S(),uiAmountString:j(C())}))),iu=Qt(K(P({pubkey:te,account:P({executable:We(),owner:te,lamports:S(),data:Pi,rentEpoch:S()})}))),ri=P({program:C(),parsed:dn(),space:S()}),su=Qt(K(P({pubkey:te,account:P({executable:We(),owner:te,lamports:S(),data:ri,rentEpoch:S()})}))),ou=Qt(K(P({lamports:S(),address:te}))),ln=P({executable:We(),owner:te,lamports:S(),data:Pi,rentEpoch:S()}),au=P({pubkey:te,account:ln}),cu=fn(Me([ai(Z),ri]),Me([Qs,ri]),c=>Array.isArray(c)?O(c,Pi):c),ni=P({executable:We(),owner:te,lamports:S(),data:cu,rentEpoch:S()}),uu=P({pubkey:te,account:ni}),hu=P({state:Me([Jt("active"),Jt("inactive"),Jt("activating"),Jt("deactivating")]),active:S(),inactive:S()}),lu=Nt(K(P({signature:C(),slot:S(),err:Lr,memo:z(C()),blockTime:j(z(S()))}))),fu=Nt(K(P({signature:C(),slot:S(),err:Lr,memo:z(C()),blockTime:j(z(S()))}))),du=P({subscription:S(),result:Cn(ln)}),pu=P({pubkey:te,account:ln}),gu=P({subscription:S(),result:Cn(pu)}),mu=P({parent:S(),slot:S(),root:S()}),yu=P({subscription:S(),result:mu}),wu=Me([P({type:Me([Jt("firstShredReceived"),Jt("completed"),Jt("optimisticConfirmation"),Jt("root")]),slot:S(),timestamp:S()}),P({type:Jt("createdBank"),parent:S(),slot:S(),timestamp:S()}),P({type:Jt("frozen"),slot:S(),timestamp:S(),stats:P({numTransactionEntries:S(),numSuccessfulTransactions:S(),numFailedTransactions:S(),maxTransactionsPerEntry:S()})}),P({type:Jt("dead"),slot:S(),timestamp:S(),err:C()})]),bu=P({subscription:S(),result:wu}),vu=P({subscription:S(),result:Cn(Me([qc,Dc]))}),ku=P({subscription:S(),result:S()}),Su=P({pubkey:C(),gossip:z(C()),tpu:z(C()),rpc:z(C()),version:z(C())}),Qi=P({votePubkey:C(),nodePubkey:C(),activatedStake:S(),epochVoteAccount:We(),epochCredits:K(ci([S(),S(),S()])),commission:S(),lastVote:S(),rootSlot:z(S())}),Mu=Nt(P({current:K(Qi),delinquent:K(Qi)})),xu=Me([Jt("processed"),Jt("confirmed"),Jt("finalized")]),_u=P({slot:S(),confirmations:z(S()),err:Lr,confirmationStatus:j(xu)}),Iu=Qt(K(z(_u))),Au=Nt(S()),ro=P({accountKey:te,writableIndexes:K(S()),readonlyIndexes:K(S())}),Ti=P({signatures:K(C()),message:P({accountKeys:K(C()),header:P({numRequiredSignatures:S(),numReadonlySignedAccounts:S(),numReadonlyUnsignedAccounts:S()}),instructions:K(P({accounts:K(S()),data:C(),programIdIndex:S()})),recentBlockhash:C(),addressTableLookups:j(K(ro))})}),no=P({pubkey:te,signer:We(),writable:We(),source:j(Me([Jt("transaction"),Jt("lookupTable")]))}),io=P({accountKeys:K(no),signatures:K(C())}),so=P({parsed:dn(),program:C(),programId:te}),oo=P({accounts:K(te),data:C(),programId:te}),Eu=Me([oo,so]),Ru=Me([P({parsed:dn(),program:C(),programId:C()}),P({accounts:K(C()),data:C(),programId:C()})]),ao=fn(Eu,Ru,c=>"accounts"in c?O(c,oo):O(c,so)),co=P({signatures:K(C()),message:P({accountKeys:K(no),instructions:K(ao),recentBlockhash:C(),addressTableLookups:j(z(K(ro)))})}),In=P({accountIndex:S(),mint:C(),owner:j(C()),uiTokenAmount:ei}),uo=P({writable:K(te),readonly:K(te)}),Nn=P({err:Lr,fee:S(),innerInstructions:j(z(K(P({index:S(),instructions:K(P({accounts:K(S()),data:C(),programIdIndex:S()}))})))),preBalances:K(S()),postBalances:K(S()),logMessages:j(z(K(C()))),preTokenBalances:j(z(K(In))),postTokenBalances:j(z(K(In))),loadedAddresses:j(uo),computeUnitsConsumed:j(S())}),Li=P({err:Lr,fee:S(),innerInstructions:j(z(K(P({index:S(),instructions:K(ao)})))),preBalances:K(S()),postBalances:K(S()),logMessages:j(z(K(C()))),preTokenBalances:j(z(K(In))),postTokenBalances:j(z(K(In))),loadedAddresses:j(uo),computeUnitsConsumed:j(S())}),Vr=Me([Jt(0),Jt("legacy")]),Cr=P({pubkey:C(),lamports:S(),postBalance:z(S()),rewardType:z(C()),commission:j(z(S()))}),Bu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),transactions:K(P({transaction:Ti,meta:z(Nn),version:j(Vr)})),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Pu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Tu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),transactions:K(P({transaction:io,meta:z(Nn),version:j(Vr)})),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Lu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),transactions:K(P({transaction:co,meta:z(Li),version:j(Vr)})),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Cu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),transactions:K(P({transaction:io,meta:z(Li),version:j(Vr)})),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Nu=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),rewards:j(K(Cr)),blockTime:z(S()),blockHeight:z(S())}))),Ou=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),transactions:K(P({transaction:Ti,meta:z(Nn)})),rewards:j(K(Cr)),blockTime:z(S())}))),ts=Nt(z(P({blockhash:C(),previousBlockhash:C(),parentSlot:S(),signatures:K(C()),blockTime:z(S())}))),Gn=Nt(z(P({slot:S(),meta:z(Nn),blockTime:j(z(S())),transaction:Ti,version:j(Vr)}))),yn=Nt(z(P({slot:S(),transaction:co,meta:z(Li),blockTime:j(z(S())),version:j(Vr)}))),zu=Qt(P({blockhash:C(),feeCalculator:P({lamportsPerSignature:S()})})),Ku=Qt(P({blockhash:C(),lastValidBlockHeight:S()})),Uu=Qt(We()),Wu=P({slot:S(),numTransactions:S(),numSlots:S(),samplePeriodSecs:S()}),Fu=Nt(K(Wu)),qu=Qt(z(P({feeCalculator:P({lamportsPerSignature:S()})}))),Du=Nt(C()),Hu=Nt(C()),Vu=P({err:Lr,logs:K(C()),signature:C()}),$u=P({result:Cn(Vu),subscription:S()}),Gu={"solana-client":"js/0.0.0-development"};class Zu{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const k={};return async v=>{const{commitment:A,config:T}=jt(v),E=this._buildArgs([],A,void 0,T),B=ji(E);return k[B]=k[B]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",E),L=O(R,Nt(S()));if("error"in L)throw new H(L.error,"failed to get block height information");return L.result}finally{delete k[B]}})(),await k[B]}})();let r,o,i,u,w,b;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,w=e.disableRetryOnRateLimit,b=e.httpAgent),this._rpcEndpoint=Lc(t),this._rpcWsEndpoint=r||Tc(t),this._rpcClient=$c(t,o,i,u,w,b),this._rpcRequest=Gc(this._rpcClient),this._rpcBatchRequest=Zc(this._rpcClient),this._rpcWebSocket=new Ec(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgs([t.toBase58()],r,void 0,o),u=await this._rpcRequest("getBalance",i),w=O(u,Qt(S()));if("error"in w)throw new H(w.error,`failed to get balance for ${t.toBase58()}`);return w.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=O(e,Nt(z(S())));if("error"in r)throw new H(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=O(t,Nt(S()));if("error"in e)throw new H(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=O(t,eu);if("error"in e)throw new H(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=O(r,ru);if("error"in o)throw new H(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),i=O(o,Qt(ei));if("error"in i)throw new H(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),i=O(o,Qt(ei));if("error"in i)throw new H(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:i}=jt(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const w=this._buildArgs(u,o,"base64",i),b=await this._rpcRequest("getTokenAccountsByOwner",w),k=O(b,iu);if("error"in k)throw new H(k.error,`failed to get token accounts owned by account ${t.toBase58()}`);return k.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const i=this._buildArgs(o,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),w=O(u,su);if("error"in w)throw new H(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),i=O(o,ou);if("error"in i)throw new H(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),i=O(o,nu);if("error"in i)throw new H(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgs([t.toBase58()],r,"base64",o),u=await this._rpcRequest("getAccountInfo",i),w=O(u,Qt(z(ln)));if("error"in w)throw new H(w.error,`failed to get info about account ${t.toBase58()}`);return w.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getAccountInfo",i),w=O(u,Qt(z(ni)));if("error"in w)throw new H(w.error,`failed to get info about account ${t.toBase58()}`);return w.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=jt(e),i=t.map(k=>k.toBase58()),u=this._buildArgs([i],r,"jsonParsed",o),w=await this._rpcRequest("getMultipleAccounts",u),b=O(w,Qt(K(z(ni))));if("error"in b)throw new H(b.error,`failed to get info for accounts ${i}`);return b.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=jt(e),i=t.map(k=>k.toBase58()),u=this._buildArgs([i],r,"base64",o),w=await this._rpcRequest("getMultipleAccounts",u),b=O(w,Qt(K(z(ln))));if("error"in b)throw new H(b.error,`failed to get info for accounts ${i}`);return b.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:i}=jt(e),u=this._buildArgs([t.toBase58()],o,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),w=await this._rpcRequest("getStakeActivation",u),b=O(w,Nt(hu));if("error"in b)throw new H(b.error,`failed to get Stake Activation ${t.toBase58()}`);return b.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=jt(e),{encoding:i,...u}=o||{},w=this._buildArgs([t.toBase58()],r,i||"base64",u),b=await this._rpcRequest("getProgramAccounts",w),k=K(au),v=u.withContext===!0?O(b,Qt(k)):O(b,Nt(k));if("error"in v)throw new H(v.error,`failed to get accounts owned by program ${t.toBase58()}`);return v.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),u=await this._rpcRequest("getProgramAccounts",i),w=O(u,Nt(K(uu)));if("error"in w)throw new H(w.error,`failed to get accounts owned by program ${t.toBase58()}`);return w.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const u=t;if((i=u.abortSignal)!=null&&i.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let o;try{o=ue.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ft(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,i=!1;const u=new Promise((b,k)=>{try{r=this.onSignature(e,(A,T)=>{r=void 0;const E={context:T,value:A};b({__type:He.PROCESSED,response:E})},t);const v=new Promise(A=>{r==null?A():o=this._onSubscriptionStateChange(r,T=>{T==="subscribed"&&A()})});(async()=>{if(await v,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:T,value:E}=A;if(E!=null)if(E!=null&&E.err)k(E.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(E.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(E.confirmationStatus==="processed"||E.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,b({__type:He.PROCESSED,response:{context:T,value:E}})}})()}catch(v){k(v)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let i=!1;const u=new Promise(A=>{const T=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let E=await T();if(!i){for(;E<=r;)if(await Er(1e3),i||(E=await T(),i))return;A({__type:He.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:w,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),k=this.getCancellationPromise(e);let v;try{const A=await Promise.race([k,b,u]);if(A.__type===He.PROCESSED)v=A.response;else throw new Ii(o)}finally{i=!0,w()}return v}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:i,signature:u}}){let w=!1;const b=new Promise(E=>{let B=i,R=null;const L=async()=>{try{const{context:W,value:dt}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return R=W.slot,dt==null?void 0:dt.nonce}catch{return B}};(async()=>{if(B=await L(),!w)for(;;){if(i!==B){E({__type:He.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await Er(2e3),w||(B=await L(),w))return}})()}),{abortConfirmation:k,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),A=this.getCancellationPromise(e);let T;try{const E=await Promise.race([A,v,b]);if(E.__type===He.PROCESSED)T=E.response;else{let B;for(;;){const R=await this.getSignatureStatus(u);if(R==null)break;if(R.context.slot<(E.slotInWhichNonceDidAdvance??r)){await Er(400);continue}B=R;break}if(B!=null&&B.value){const R=t||"finalized",{confirmationStatus:L}=B.value;switch(R){case"processed":case"recent":if(L!=="processed"&&L!=="confirmed"&&L!=="finalized")throw new Or(u);break;case"confirmed":case"single":case"singleGossip":if(L!=="confirmed"&&L!=="finalized")throw new Or(u);break;case"finalized":case"max":case"root":if(L!=="finalized")throw new Or(u);break;default:}T={context:B.context,value:{err:B.value.err}}}else throw new Or(u)}}finally{w=!0,k()}return T}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(b=>{let k=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{k=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>b({__type:He.TIMED_OUT,timeoutMs:k}),k)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let w;try{const b=await Promise.race([u,o]);if(b.__type===He.PROCESSED)w=b.response;else throw new Ai(e,b.timeoutMs/1e3)}finally{clearTimeout(r),i()}return w}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=O(t,Nt(K(Su)));if("error"in e)throw new H(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=O(r,Mu);if("error"in o)throw new H(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",o),u=O(i,Nt(S()));if("error"in u)throw new H(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",o),u=O(i,Nt(C()));if("error"in u)throw new H(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),i=O(o,Nt(K(te)));if("error"in i)throw new H(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);Ft(o.length===1);const i=o[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),i=O(o,Iu);if("error"in i)throw new H(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",o),u=O(i,Nt(S()));if("error"in u)throw new H(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=O(r,Yc);if("error"in o)throw new H(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:i}=jt(r),u=this._buildArgs([t.map(k=>k.toBase58())],o,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),w=await this._rpcRequest("getInflationReward",u),b=O(w,Oc);if("error"in b)throw new H(b.error,"failed to get inflation reward");return b.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=O(t,jc);if("error"in e)throw new H(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",o),u=O(i,Xc);if("error"in u)throw new H(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=O(t,Qc);if("error"in e)throw new H(e.error,"failed to get epoch schedule");const r=e.result;return new Xs(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=O(t,tu);if("error"in e)throw new H(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=O(o,Au);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),o=O(r,zu);if("error"in o)throw new H(o.error,"failed to get recent blockhash");return o.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=O(e,Fu);if("error"in r)throw new H(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=O(o,qu);if("error"in i)throw new H(i.error,"failed to get fee calculator");const{context:u,value:w}=i.result;return{context:u,value:w!==null?w.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ot(t.serialize()).toString("base64"),o=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",o),u=O(i,Qt(z(S())));if("error"in u)throw new H(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(w=>w.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),i=O(o,Jc);if("error"in i)throw new H(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",o),u=O(i,Ku);if("error"in u)throw new H(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgs([t],r,void 0,o),u=await this._rpcRequest("isBlockhashValid",i),w=O(u,Uu);if("error"in w)throw new H(w.error,"failed to determine if the blockhash `"+t+"`is valid");return w.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=O(t,Nt(Hc));if("error"in e)throw new H(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=O(t,Nt(C()));if("error"in e)throw new H(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const w=O(u,Tu);if("error"in w)throw w.error;return w.result}case"none":{const w=O(u,Pu);if("error"in w)throw w.error;return w.result}default:{const w=O(u,Bu);if("error"in w)throw w.error;const{result:b}=w;return b?{...b,transactions:b.transactions.map(({transaction:k,meta:v,version:A})=>({meta:v,transaction:{...k,message:$n(A,k.message)},version:A}))}:null}}}catch(w){throw new H(w,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const w=O(u,Cu);if("error"in w)throw w.error;return w.result}case"none":{const w=O(u,Nu);if("error"in w)throw w.error;return w.result}default:{const w=O(u,Lu);if("error"in w)throw w.error;return w.result}}}catch(w){throw new H(w,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:w,...b}=t;r=w,e=b}const o=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",o),u=O(i,Vc);if("error"in u)throw new H(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),u=await this._rpcRequest("getTransaction",i),w=O(u,Gn);if("error"in w)throw new H(w.error,"failed to get transaction");const b=w.result;return b&&{...b,transaction:{...b.transaction,message:$n(b.version,b.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),u=await this._rpcRequest("getTransaction",i),w=O(u,yn);if("error"in w)throw new H(w.error,"failed to get transaction");return w.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=jt(e),i=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(i)).map(b=>{const k=O(b,yn);if("error"in k)throw new H(k.error,"failed to get transactions");return k.result})}async getTransactions(t,e){const{commitment:r,config:o}=jt(e),i=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,void 0,o)}));return(await this._rpcBatchRequest(i)).map(b=>{const k=O(b,Gn);if("error"in k)throw new H(k.error,"failed to get transactions");const v=k.result;return v&&{...v,transaction:{...v.transaction,message:$n(v.version,v.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedBlock",r),i=O(o,Ou);if("error"in i)throw new H(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");const w={...u,transactions:u.transactions.map(({transaction:b,meta:k})=>{const v=new Le(b.message);return{meta:k,transaction:{...b,message:v}}})};return{...w,transactions:w.transactions.map(({transaction:b,meta:k})=>({meta:k,transaction:Ht.populate(b.message,b.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",o),u=O(i,Nt(K(S())));if("error"in u)throw new H(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=O(o,ts);if("error"in i)throw new H(i.error,"failed to get block");const u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getConfirmedBlock",r),i=O(o,ts);if("error"in i)throw new H(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedTransaction",r),i=O(o,Gn);if("error"in i)throw new H(i.error,"failed to get transaction");const u=i.result;if(!u)return u;const w=new Le(u.transaction.message),b=u.transaction.signatures;return{...u,transaction:Ht.populate(w,b)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getConfirmedTransaction",r),i=O(o,yn);if("error"in i)throw new H(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const w=O(u,yn);if("error"in w)throw new H(w.error,"failed to get confirmed transactions");return w.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},i=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<i));)try{const b=await this.getConfirmedBlockSignatures(e,"finalized");b.signatures.length>0&&(o.until=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}let u=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>u));)try{const b=await this.getConfirmedBlockSignatures(r);b.signatures.length>0&&(o.before=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(b=>b.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),u=O(i,lu);if("error"in u)throw new H(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",o),u=O(i,fu);if("error"in u)throw new H(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=new ti({key:t,state:ti.deserialize(o.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=Ln.fromAccountData(o.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=O(r,Du);if("error"in o)throw new H(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Er(100);const r=Date.now()-this._blockhashInfo.lastFetch>=to;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Er(Ys/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=jt(t),o=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",o),u=O(i,Qt(S()));if("error"in u)throw new H(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const R=t.serialize(),L=Z.from(R).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const W=e||{};W.encoding="base64","commitment"in W||(W.commitment=this.commitment);const dt=[L,W],Q=await this._rpcRequest("simulateTransaction",dt),Dt=O(Q,Xi);if("error"in Dt)throw new Error("failed to simulate transaction: "+Dt.error.message);return Dt.result}let o;if(t instanceof Ht){let B=t;o=new Ht,o.feePayer=B.feePayer,o.instructions=t.instructions,o.nonceInfo=B.nonceInfo,o.signatures=B.signatures}else o=Ht.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(o.nonceInfo&&i)o.sign(...i);else{let B=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(B);if(o.lastValidBlockHeight=R.lastValidBlockHeight,o.recentBlockhash=R.blockhash,!i)break;if(o.sign(...i),!o.signature)throw new Error("!signature");const L=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(L)&&!this._blockhashInfo.transactionSignatures.includes(L)){this._blockhashInfo.simulatedSignatures.push(L);break}else B=!0}}const u=o._compile(),w=u.serialize(),k=o._serialize(w).toString("base64"),v={encoding:"base64",commitment:this.commitment};if(r){const B=(Array.isArray(r)?r:u.nonProgramIds()).map(R=>R.toBase58());v.accounts={encoding:"base64",addresses:B}}i&&(v.sigVerify=!0);const A=[k,v],T=await this._rpcRequest("simulateTransaction",A),E=O(T,Xi);if("error"in E){let B;if("data"in E.error&&(B=E.error.data.logs,B&&Array.isArray(B))){const R=`
    `,L=R+B.join(R);console.error(E.error.message,L)}throw new hn({action:"simulate",signature:"",transactionMessage:E.error.message,logs:B})}return E.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let u=this._disableBlockhashCaching;for(;;){const w=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=w.lastValidBlockHeight,t.recentBlockhash=w.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const b=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(b))u=!0;else{this._blockhashInfo.transactionSignatures.push(b);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ot(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,i=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),i&&(r.preflightCommitment=i);const u=[t,r],w=await this._rpcRequest("sendTransaction",u),b=O(w,Hu);if("error"in b){let k;throw"data"in b.error&&(k=b.error.data.logs),new hn({action:o?"send":"simulate",signature:"",transactionMessage:b.error.message,logs:k})}return b.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:u}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const w=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...o,serverSubscriptionId:w,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[w]=o.callbacks,await this._updateSubscriptions()}catch(w){if(w instanceof Error&&console.error(`${u} error for argument`,i,w.message),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:u}=o;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(w){if(w instanceof Error&&console.error(`${u} error:`,w.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=O(t,du);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=ji([t.method,e]),i=this._subscriptionsByHash[o];return i===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[o];Ft(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=O(t,gu);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",o?{filters:o}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=O(t,$u);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=O(t,yu);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=O(t,bu);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const i=e||this._commitment;if(i||r||o){let u={};r&&(u.encoding=r),i&&(u.commitment=i),o&&(u=Object.assign(u,o)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=O(t,vu);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,w)=>{if(u.type==="status"){e(u.result,w);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return i}onSignatureWithOptions(t,e,r){const{commitment:o,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],o,void 0,i),w=this._makeSubscription({callback:(b,k)=>{e(b,k);try{this.removeSignatureListener(w)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return w}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=O(t,ku);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class zr{constructor(t){this._keypair=void 0,this._keypair=t??Gi()}static generate(){return new zr(Gi())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),i=_n(o);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new zr({publicKey:r,secretKey:t})}static fromSeed(t){const e=_n(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new zr({publicKey:e,secretKey:r})}get publicKey(){return new N(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const $e=Object.freeze({CreateLookupTable:{index:0,layout:q([F("instruction"),Fr("recentSlot"),Wt("bumpSeed")])},FreezeLookupTable:{index:1,layout:q([F("instruction")])},ExtendLookupTable:{index:2,layout:q([F("instruction"),Fr(),he(Kt(),nr(F(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:q([F("instruction")])},CloseLookupTable:{index:4,layout:q([F("instruction")])}});class Yu{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=F("instruction").decode(t.data);let o;for(const[i,u]of Object.entries($e))if(u.index==r){o=i;break}if(!o)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return o}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Vt($e.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Vt($e.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new N(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ci.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Ci{constructor(){}static createLookupTable(t){const[e,r]=N.findProgramAddressSync([t.authority.toBuffer(),Ds(BigInt(t.recentSlot),8)],this.programId),o=$e.CreateLookupTable,i=Ut(o,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:oe.programId,isSigner:!1,isWritable:!1}];return[new Gt({programId:this.programId,keys:u,data:i}),e]}static freezeLookupTable(t){const e=$e.FreezeLookupTable,r=Ut(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:o,data:r})}static extendLookupTable(t){const e=$e.ExtendLookupTable,r=Ut(e,{addresses:t.addresses.map(i=>i.toBytes())}),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&o.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:oe.programId,isSigner:!1,isWritable:!1}),new Gt({programId:this.programId,keys:o,data:r})}static deactivateLookupTable(t){const e=$e.DeactivateLookupTable,r=Ut(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:o,data:r})}static closeLookupTable(t){const e=$e.CloseLookupTable,r=Ut(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Gt({programId:this.programId,keys:o,data:r})}}Ci.programId=new N("AddressLookupTab1e1111111111111111111111111");class ju{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Wt("instruction").decode(t.data);let o;for(const[i,u]of Object.entries(ze))if(u.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return o}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Vt(ze.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Vt(ze.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Vt(ze.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Vt(ze.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Ni.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ze=Object.freeze({RequestUnits:{index:0,layout:q([Wt("instruction"),F("units"),F("additionalFee")])},RequestHeapFrame:{index:1,layout:q([Wt("instruction"),F("bytes")])},SetComputeUnitLimit:{index:2,layout:q([Wt("instruction"),F("units")])},SetComputeUnitPrice:{index:3,layout:q([Wt("instruction"),Fr("microLamports")])}});class Ni{constructor(){}static requestUnits(t){const e=ze.RequestUnits,r=Ut(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=ze.RequestHeapFrame,r=Ut(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=ze.SetComputeUnitLimit,r=Ut(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=ze.SetComputeUnitPrice,r=Ut(e,{microLamports:BigInt(t.microLamports)});return new Gt({keys:[],programId:this.programId,data:r})}}Ni.programId=new N("ComputeBudget111111111111111111111111111111");const es=64,rs=32,ns=64,is=q([Wt("numSignatures"),Wt("padding"),Ee("signatureOffset"),Ee("signatureInstructionIndex"),Ee("publicKeyOffset"),Ee("publicKeyInstructionIndex"),Ee("messageDataOffset"),Ee("messageDataSize"),Ee("messageInstructionIndex")]);class On{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,instructionIndex:i}=t;Ft(e.length===rs,`Public Key must be ${rs} bytes but received ${e.length} bytes`),Ft(o.length===ns,`Signature must be ${ns} bytes but received ${o.length} bytes`);const u=is.span,w=u+e.length,b=w+o.length,k=1,v=Z.alloc(b+r.length),A=i??65535;return is.encode({numSignatures:k,padding:0,signatureOffset:w,signatureInstructionIndex:A,publicKeyOffset:u,publicKeyInstructionIndex:A,messageDataOffset:b,messageDataSize:r.length,messageInstructionIndex:A},v),v.fill(e,u),v.fill(o,w),v.fill(r,b),new Gt({keys:[],programId:On.programId,data:v})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ft(e.length===es,`Private key must be ${es} bytes but received ${e.length} bytes`);try{const i=zr.fromSecretKey(e),u=i.publicKey.toBytes(),w=xi(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:w,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}On.programId=new N("Ed25519SigVerify111111111111111111111111111");const Ju=(c,t)=>{const e=ui.sign(c,t);return[e.toCompactRawBytes(),e.recovery]};ui.utils.isValidPrivateKey;const Xu=ui.getPublicKey,ss=32,Zn=20,os=64,Qu=11,Yn=q([Wt("numSignatures"),Ee("signatureOffset"),Wt("signatureInstructionIndex"),Ee("ethAddressOffset"),Wt("ethAddressInstructionIndex"),Ee("messageDataOffset"),Ee("messageDataSize"),Wt("messageInstructionIndex"),Yt(20,"ethAddress"),Yt(64,"signature"),Wt("recoveryId")]);class Kr{constructor(){}static publicKeyToEthAddress(t){Ft(t.length===os,`Public key must be ${os} bytes but received ${t.length} bytes`);try{return Z.from(Fi(Ot(t))).slice(-Zn)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,recoveryId:i,instructionIndex:u}=t;return Kr.createInstructionWithEthAddress({ethAddress:Kr.publicKeyToEthAddress(e),message:r,signature:o,recoveryId:i,instructionIndex:u})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:o,recoveryId:i,instructionIndex:u=0}=t;let w;typeof e=="string"?e.startsWith("0x")?w=Z.from(e.substr(2),"hex"):w=Z.from(e,"hex"):w=e,Ft(w.length===Zn,`Address must be ${Zn} bytes but received ${w.length} bytes`);const b=1+Qu,k=b,v=b+w.length,A=v+o.length+1,T=1,E=Z.alloc(Yn.span+r.length);return Yn.encode({numSignatures:T,signatureOffset:v,signatureInstructionIndex:u,ethAddressOffset:k,ethAddressInstructionIndex:u,messageDataOffset:A,messageDataSize:r.length,messageInstructionIndex:u,signature:Ot(o),ethAddress:Ot(w),recoveryId:i},E),E.fill(Ot(r),Yn.span),new Gt({keys:[],programId:Kr.programId,data:E})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ft(e.length===ss,`Private key must be ${ss} bytes but received ${e.length} bytes`);try{const i=Ot(e),u=Xu(i,!1).slice(1),w=Z.from(Fi(Ot(r))),[b,k]=Ju(w,i);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:b,recoveryId:k,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Kr.programId=new N("KeccakSecp256k11111111111111111111111111111");var ho;const lo=new N("StakeConfig11111111111111111111111111111111");class fo{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class gn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ho=gn;gn.default=new ho(0,0,N.default);class th{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=F("instruction").decode(t.data);let o;for(const[i,u]of Object.entries(se))if(u.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a StakeInstruction");return o}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Vt(se.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new fo(new N(e.staker),new N(e.withdrawer)),lockup:new gn(r.unixTimestamp,r.epoch,new N(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Vt(se.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Vt(se.Authorize,t.data),o={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new N(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:o,authorityOwner:i}=Vt(se.AuthorizeWithSeed,t.data),u={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:o,authorityOwner:new N(i),newAuthorizedPubkey:new N(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(u.custodianPubkey=t.keys[3].pubkey),u}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Vt(se.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Vt(se.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Vt(se.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Vt(se.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(zn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const se=Object.freeze({Initialize:{index:0,layout:q([F("instruction"),rc(),nc()])},Authorize:{index:1,layout:q([F("instruction"),Kt("newAuthorized"),F("stakeAuthorizationType")])},Delegate:{index:2,layout:q([F("instruction")])},Split:{index:3,layout:q([F("instruction"),_e("lamports")])},Withdraw:{index:4,layout:q([F("instruction"),_e("lamports")])},Deactivate:{index:5,layout:q([F("instruction")])},Merge:{index:7,layout:q([F("instruction")])},AuthorizeWithSeed:{index:8,layout:q([F("instruction"),Kt("newAuthorized"),F("stakeAuthorizationType"),Rr("authoritySeed"),Kt("authorityOwner")])}}),eh=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class zn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:o}=t,i=o||gn.default,u=se.Initialize,w=Ut(u,{authorized:{staker:Ot(r.staker.toBuffer()),withdrawer:Ot(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ot(i.custodian.toBuffer())}}),b={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Wr,isSigner:!1,isWritable:!1}],programId:this.programId,data:w};return new Gt(b)}static createAccountWithSeed(t){const e=new Ht;e.add(oe.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static createAccount(t){const e=new Ht;e.add(oe.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:o}=t,i=se.Delegate,u=Ut(i);return new Ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:lo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,stakeAuthorizationType:i,custodianPubkey:u}=t,w=se.Authorize,b=Ut(w,{newAuthorized:Ot(o.toBuffer()),stakeAuthorizationType:i.index}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&k.push({pubkey:u,isSigner:!0,isWritable:!1}),new Ht().add({keys:k,programId:this.programId,data:b})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:o,authorityOwner:i,newAuthorizedPubkey:u,stakeAuthorizationType:w,custodianPubkey:b}=t,k=se.AuthorizeWithSeed,v=Ut(k,{newAuthorized:Ot(u.toBuffer()),stakeAuthorizationType:w.index,authoritySeed:o,authorityOwner:Ot(i.toBuffer())}),A=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ne,isSigner:!1,isWritable:!1}];return b&&A.push({pubkey:b,isSigner:!0,isWritable:!1}),new Ht().add({keys:A,programId:this.programId,data:v})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:o,lamports:i}=t,u=se.Split,w=Ut(u,{lamports:i});return new Gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:w})}static split(t,e){const r=new Ht;return r.add(oe.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,basePubkey:u,seed:w,lamports:b}=t,k=new Ht;return k.add(oe.allocate({accountPubkey:i,basePubkey:u,seed:w,space:this.space,programId:this.programId})),e&&e>0&&k.add(oe.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),k.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,lamports:b}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:o}=t,i=se.Merge,u=Ut(i);return new Ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:o,lamports:i,custodianPubkey:u}=t,w=se.Withdraw,b=Ut(w,{lamports:i}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&k.push({pubkey:u,isSigner:!0,isWritable:!1}),new Ht().add({keys:k,programId:this.programId,data:b})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,o=se.Deactivate,i=Ut(o);return new Ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}zn.programId=new N("Stake11111111111111111111111111111111111111");zn.space=200;class po{constructor(t,e,r,o){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=o}}class rh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=F("instruction").decode(t.data);let o;for(const[i,u]of Object.entries(Ke))if(u.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a VoteInstruction");return o}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Vt(Ke.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new po(new N(e.nodePubkey),new N(e.authorizedVoter),new N(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Vt(Ke.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new N(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:o,voteAuthorizationType:i}}=Vt(Ke.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new N(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new N(o),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Vt(Ke.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals($r.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ke=Object.freeze({InitializeAccount:{index:0,layout:q([F("instruction"),ic()])},Authorize:{index:1,layout:q([F("instruction"),Kt("newAuthorized"),F("voteAuthorizationType")])},Withdraw:{index:3,layout:q([F("instruction"),_e("lamports")])},UpdateValidatorIdentity:{index:4,layout:q([F("instruction")])},AuthorizeWithSeed:{index:10,layout:q([F("instruction"),sc()])}}),nh=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class $r{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:o}=t,i=Ke.InitializeAccount,u=Ut(i,{voteInit:{nodePubkey:Ot(o.nodePubkey.toBuffer()),authorizedVoter:Ot(o.authorizedVoter.toBuffer()),authorizedWithdrawer:Ot(o.authorizedWithdrawer.toBuffer()),commission:o.commission}}),w={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Wr,isSigner:!1,isWritable:!1},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u};return new Gt(w)}static createAccount(t){const e=new Ht;return e.add(oe.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,voteAuthorizationType:i}=t,u=Ke.Authorize,w=Ut(u,{newAuthorized:Ot(o.toBuffer()),voteAuthorizationType:i.index}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ht().add({keys:b,programId:this.programId,data:w})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:o,newAuthorizedPubkey:i,voteAuthorizationType:u,votePubkey:w}=t,b=Ke.AuthorizeWithSeed,k=Ut(b,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ot(r.toBuffer()),currentAuthorityDerivedKeySeed:o,newAuthorized:Ot(i.toBuffer()),voteAuthorizationType:u.index}}),v=[{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:Ne,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Ht().add({keys:v,programId:this.programId,data:k})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:o,toPubkey:i}=t,u=Ke.Withdraw,w=Ut(u,{lamports:o}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ht().add({keys:b,programId:this.programId,data:w})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return $r.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:o}=t,i=Ke.UpdateValidatorIdentity,u=Ut(i),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ht().add({keys:w,programId:this.programId,data:u})}}$r.programId=new N("Vote111111111111111111111111111111111111111");$r.space=3762;const go=new N("Va1idator1nfo111111111111111111111111111111"),ih=P({name:C(),website:j(C()),details:j(C()),keybaseUsername:j(C())});class Oi{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(ve(e)!==2)return null;const o=[];for(let i=0;i<2;i++){const u=new N(ke(e,0,Ue)),w=Oe(e)===1;o.push({publicKey:u,isSigner:w})}if(o[0].publicKey.equals(go)&&o[1].isSigner){const i=Rr().decode(Z.from(e)),u=JSON.parse(i);return Co(u,ih),new Oi(o[1].publicKey,u)}return null}}const sh=new N("Vote111111111111111111111111111111111111111"),oh=q([Kt("nodePubkey"),Kt("authorizedWithdrawer"),Wt("commission"),ae(),he(q([ae("slot"),F("confirmationCount")]),nr(F(),-8),"votes"),Wt("rootSlotValid"),ae("rootSlot"),ae(),he(q([ae("epoch"),Kt("authorizedVoter")]),nr(F(),-8),"authorizedVoters"),q([he(q([Kt("authorizedPubkey"),ae("epochOfLastAuthorizedSwitch"),ae("targetEpoch")]),32,"buf"),ae("idx"),Wt("isEmpty")],"priorVoters"),ae(),he(q([ae("epoch"),ae("credits"),ae("prevCredits")]),nr(F(),-8),"epochCredits"),q([ae("slot"),ae("timestamp")],"lastTimestamp")]);class zi{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=oh.decode(Ot(t),4);let o=r.rootSlot;return r.rootSlotValid||(o=null),new zi({nodePubkey:new N(r.nodePubkey),authorizedWithdrawer:new N(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:o,authorizedVoters:r.authorizedVoters.map(ah),priorVoters:ch(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function ah({authorizedVoter:c,epoch:t}){return{epoch:t,authorizedVoter:new N(c)}}function as({authorizedPubkey:c,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new N(c),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function ch({buf:c,idx:t,isEmpty:e}){return e?[]:[...c.slice(t+1).map(as),...c.slice(0,t).map(as)]}const cs={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function uh(c,t){const e=t===!1?"http":"https";if(!c)return cs[e].devnet;const r=cs[e][c];if(!r)throw new Error(`Unknown ${e} cluster: ${c}`);return r}async function hh(c,t,e,r){let o,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(o=e,i=r):i=e;const u=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},w=await c.sendRawTransaction(t,u),b=i&&i.commitment,v=(await(o?c.confirmTransaction(o,b):c.confirmTransaction(w,b))).value;if(v.err)throw w!=null?new hn({action:u!=null&&u.skipPreflight?"send":"simulate",signature:w,transactionMessage:`Status: (${JSON.stringify(v)})`}):new Error(`Raw transaction ${w} failed (${JSON.stringify(v)})`);return w}const lh=1e9,gh=Object.freeze(Object.defineProperty({__proto__:null,Account:Qa,AddressLookupTableAccount:ti,AddressLookupTableInstruction:Yu,AddressLookupTableProgram:Ci,Authorized:fo,BLOCKHASH_CACHE_TIMEOUT_MS:to,BPF_LOADER_DEPRECATED_PROGRAM_ID:tc,BPF_LOADER_PROGRAM_ID:vc,BpfLoader:kc,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ze,ComputeBudgetInstruction:ju,ComputeBudgetProgram:Ni,Connection:Zu,Ed25519Program:On,Enum:Ja,EpochSchedule:Xs,FeeCalculatorLayout:js,Keypair:zr,LAMPORTS_PER_SOL:lh,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:$e,Loader:Pr,Lockup:gn,MAX_SEED_LENGTH:$s,Message:Le,MessageAccountKeys:un,MessageV0:Br,NONCE_ACCOUNT_LENGTH:Qn,NonceAccount:Ln,PACKET_DATA_SIZE:ir,PUBLIC_KEY_LENGTH:Ue,PublicKey:N,SIGNATURE_LENGTH_IN_BYTES:cn,SOLANA_SCHEMA:on,STAKE_CONFIG_ID:lo,STAKE_INSTRUCTION_LAYOUTS:se,SYSTEM_INSTRUCTION_LAYOUTS:Zt,SYSVAR_CLOCK_PUBKEY:Ne,SYSVAR_EPOCH_SCHEDULE_PUBKEY:hc,SYSVAR_INSTRUCTIONS_PUBKEY:lc,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:wn,SYSVAR_RENT_PUBKEY:Wr,SYSVAR_REWARDS_PUBKEY:fc,SYSVAR_SLOT_HASHES_PUBKEY:dc,SYSVAR_SLOT_HISTORY_PUBKEY:pc,SYSVAR_STAKE_HISTORY_PUBKEY:bn,Secp256k1Program:Kr,SendTransactionError:hn,SolanaJSONRPCError:H,SolanaJSONRPCErrorCode:gc,StakeAuthorizationLayout:eh,StakeInstruction:th,StakeProgram:zn,Struct:_i,SystemInstruction:wc,SystemProgram:oe,Transaction:Ht,TransactionExpiredBlockheightExceededError:Ii,TransactionExpiredNonceInvalidError:Or,TransactionExpiredTimeoutError:Ai,TransactionInstruction:Gt,TransactionMessage:Ri,TransactionStatus:He,VALIDATOR_INFO_KEY:go,VERSION_PREFIX_MASK:Pn,VOTE_PROGRAM_ID:sh,ValidatorInfo:Oi,VersionedMessage:Ei,VersionedTransaction:Bi,VoteAccount:zi,VoteAuthorizationLayout:nh,VoteInit:po,VoteInstruction:rh,VoteProgram:$r,clusterApiUrl:uh,sendAndConfirmRawTransaction:hh,sendAndConfirmTransaction:Xn},Symbol.toStringTag,{value:"Module"}));export{zr as K,N as P,Wr as S,Gt as T,Ds as a,Yt as b,oe as c,F as d,Ht as e,Xn as f,gh as i,q as s,Ca as t,Wt as u};
